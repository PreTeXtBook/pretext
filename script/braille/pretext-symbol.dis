# liblouis add-on symbol table for PreTeXt-generated HTML
#
# History:
#   2019-06-30: Initiated


# As suggested by Alexei Kolesnikov, this file
# translates more exotic Unicode characters
# generated by PreTeXt's HTML conversion into
# Braille dot patterns

# Identical definitions are resolved by the *first*
# definition, so to overide a stock defintion, we
# have this table come first by including the English
# UEB Grade 2 table as its last act (see bottom).
#
# Full chain of includes is:
#
# pretext-symbol.dis
# en-ueb-g2.ctb
# en-ueb-g1.ctb
# en-ueb-chardefs.uti (lots of different constructions)
# latinLetterDef8Dots.uti (Latin letters, 6-dot lower and 8-dot upper with capital indicator)
# en-ueb-math.ctb
# braille-patterns.cti (256 Unicode characters mapping to 8-dot patterns)

# See "2.8 Translation Opcodes" in
# "Liblouis User's and Programmer's Manual" for
# codes like "punctuation" and  "begword"

# PTX: ldblbracket, rdblbracket, dblbrackets
# Unicode:
# MATHEMATICAL LEFT WHITE SQUARE BRACKET, x27e6
# MATHEMATICAL RIGHT WHITE SQUARE BRACKET, x27e7
# Translation:  [[, ]]

punctuation \x27e6 46-126-46-126
punctuation \x27e7 46-345-46-345


# Single quote characters
# Unicode Character 'LEFT SINGLE QUOTATION MARK' (U+2018)
# Unicode Character 'RIGHT SINGLE QUOTATION MARK' (U+2019)
# These are the characters the PreTeXt HTML produces
# for single quotes, so we pick them up so as to use
# the right dot patterns.  Otherwise an apostrophe
# (U+0027) should be an apostrophe.
# Dot patterns from Al Maneki, 2019-07-22

# We need to define two characters for the "endword"
# code to not raise errors, the open single quote
# is just for good measure

# From latinLetterDef8Dots.uti
uplow Ss 2347,234

# From en-ueb-chardefs.uti
punctuation \x2018 6-236
punctuation \x2019 6-356

# Now for the main event.  The en-ueb-chardefs.uti table says
#
# "Unicode prefers \x2019 for apostrophe instead of \x27"
#
# We beg to differ.  Or more properly, PreTeXt reserves \x27 for
# apostrophes and uses Unicode for single quote marks, exclusively.
# The  liblouis  table tries to correct eight (non-Braille)
# contractions built with \x2019.  The worst is possesive with a
# plural (s'), which can bite us badly.  So we override that
# attempt at correction.

endword s\x2019 234-6-356


# Now do the normal thing
include en-ueb-g2.ctb

# Necessary to have a newline following
# last directive, or it is not processed
