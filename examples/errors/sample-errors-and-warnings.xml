<?xml version="1.0" encoding="UTF-8"?>
<!--********************************************************************
Copyright 2015 Robert A. Beezer

This file is part of MathBook XML.

MathBook XML is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 2 or version 3 of the
License (at your option).

MathBook XML is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with MathBook XML.  If not, see <http://www.gnu.org/licenses/>.
*********************************************************************-->
<!--
To process this file, at the command-line issue:

xsltproc /path/to/mathbook/xsl/pretext-html.xsl /path/to/mathbook/examples/sample-errors-and-warnings.xml

Some warnings are converter-specific (such as 
triple braces in LaTeX source migrating to Sage
notebooks where that syntax is relevant).

Errors and warnings will be output at the console, 
so the actual HTML output should not be of interest,
and may not even be usable.  That's not the point.

Developers: use this file as a permanent place to
test specific errors or warnings, and/or to test
improvements to the error/warning/deprecation
systems.
-->
<pretext>

    <docinfo>
        <!-- rename/lang  replaced by  rename/@xml:lang -->
        <rename element="proposition" lang="en-US">Conundrum</rename>
        <!-- Moved to publisher file, 100% -->
        <analytics/>
    </docinfo>

    <article xml:id="errors-and-warnings">
        <title>Errors and Warnings in MathBook XML</title>

        <section xml:id="introduction-id">
            <title>Introduction</title>

            <p>We collect some bad things here, to test deprecation warnings and error handling.  Don't be alarmed.</p>
        </section>

        <section>
            <title>Global Deprecations</title>
            <p>These are sprinkled around as necessary, but listed here.</p>
            <!-- Newer deprecations first  -->
            <p>Cite element subsumed into xref scheme (2014/06/25).</p>
            <p>Obsolete filebase attribute (2014/05/04).</p>
            <p>Once upon a time there was a hyphen element for hyphenated<hyphen/>words.</p>
            <p>The <c latexsep="|">c</c> element no longer needs a <c latexsep="?">@latexsep</c> attribute.</p>
        </section>

        <section filebase="obsolete-way-to-introduce-filename-strings">
            <title>Introduction</title>
            <p>A sample paragraph.</p>
            <!-- these index entries should prompt warnings -->
            <!-- a "see" must not have a page locator       -->
            <idx><h>ACK</h></idx>
            <idx><h>ACK</h><see>Yuck</see></idx>
            <!-- a "seealso" needs to have a page locator -->
            <idx><h>SND</h><seealso>Yuck</seealso></idx>
        </section>

        <section>
            <title>Cross-References</title>
            <p>A <c>cite</c> is replaced directly by an <c>xref</c>, the obsolete use here would be functional <cite ref="errors-and-warning"/> and  <cite provisional="just-a-test"/>.</p>

            <p>A cross-reference to nowhere (warnings): <xref ref="pointer-to-nowhere-as-test"/></p>

            <p>A cross-reference with a bad/missing attribute: <xref perversional="spelled-bad"/>.</p>

            <p>A cross-reference with a bad value for the autoname attribute: <xref ref="errors-and-warnings" autoname="maybe"/>.</p>

            <p>The <q>detail</q> attribute of a cross-reference is only implemented for a reference to a bibliographic item: <xref ref="errors-and-warnings" detail="blah"/>.</p>

            <p>The <q>plural</q> attribute of a cross-reference is deprecated with no equivalent replacment: <xref ref="errors-and-warnings" autoname="plural"/>.</p>

            <p>A cross-reference to a range with incompatible targets (article and section):  <xref first="errors-and-warnings" last="introduction-id" />.</p>

            <p>A cross-reference to a range where the two targets are in the wrong order, so generates a warning:  <xref first="section-images" last="introduction-id" />.</p>

            <p>We supply two broken cross-references for testing purposes only, one a list, one not: <xref ref="theorem-number-87"/>, <xref ref="errors-and-warnings, theorem-number-85"/>.</p>

            <p>We supply two more broken cross-references for testing purposes only, both of the <attr>first</attr>/<attr>last</attr> variety: <xref first="errors-and-warnings" last="theorem-number-28"/>, <xref first="theorem-number-832" last="errors-and-warnings"/>.</p>

            <todo>A <tag>todo</tag> element now becomes a prefixed XML comment.</todo>
        </section>

        <section>
            <title>Bad Math</title>
            <!-- we mean this construction to provide a link back to a "contributor" -->
            <author><xref ref="errors-and-warnings"/></author>

            <p>Some math that gives the Sage notebook trouble:  first the fixed version, where we use a small negative space followed by a small positive space to breakup the triple braces: <m>x^2{{\!\,{y^3}}}</m></p>

            <p>Now the problem version, which in the Sage notebook will wreck this page.  You should be warned about this at the console when you built this worksheet.  Elsewhere the fixed version should look like this version: <m>x^2{{{y^3}}}</m></p>

        </section>

        <section xml:id="section-images">
            <title>Images</title>

            <p>TikZ code no longer goes in a <c>tikz</c> element, but <c>latex-image-code</c> instead.  And similar graphics languages need to go into an <c>image</c>c&gt; element.  We globally trap occurrence inside <c>figure</c>c&gt; without an intervening <c>image</c>, which may not be the only way this could occur.</p>

            <tikz/>

            <figure>
                <tikz>
                </tikz>
            </figure>

            <figure>
                <asymptote>
                </asymptote>
            </figure>

            <figure>
                <sageplot>
                </sageplot>
            </figure>

            <p>And the <c>task</c> element has a new purpose and should not exist at the top-level of a division.  We include a <c>project</c> with a real <c>task</c> to test effect.</p>

            <task>
                <p>I should not be here.</p>
            </task>

            <project>
                <task><p>First real task.</p></task>
                <task><p>Second real task.</p></task>
            </project>

            <p>The <c>program</c> and <c>console</c> elements cannot occur without a wrapper, a <c>sidebyside</c> or a <c>console</c>.</p>

            <console>
                <input>cd</input>
            </console>

            <program language="r">
                <input>
                a = b + c
                </input>
            </program>


        </section>

        <section>
            <title>Miscellaneous</title>

            <p>A circumflex should still be obtainable with <c>circum</c>: <circum/>. And <circa/> is now <ca/>.</p>

            <paragraph>
                <title>Groups of paragraphs</title>

                <p>There has always been a sort of odd mini-sectioning element, called <c>paragraph</c> orignally since that is what it is in <latex/>, but now better named as <c>paragraphs</c>.</p>
            </paragraph>

            <!-- # $ % ^ & _ { } ~ \  -->
            <p><latex/>'s ten reserved characters once each had an empty element of its own: <hash/> <dollar/> <percent/> <circumflex/> <ampersand/> <underscore/> <lbrace/> <rbrace/> <tilde/> <backslash/>.</p>

            <!-- <, >, [, ], *, /, `, braces and brackets  -->
            <p>And similarly, nine other elements were made redundant:  <less/> <greater/> <lbracket/> <rbracket/> <asterisk/> <slash/> <backtick/> <braces>braces</braces> <brackets>brackets</brackets>.</p>

            <p>Tables once looked like this, but now are really different.</p>

             <table xml:id="table-euler1">
                <tgroup cols="4" align="center">
                    <thead>
                        <row><entry><m>i</m></entry><entry><m>t_i</m></entry><entry><m>x_i</m></entry><entry><m>y_i</m></entry></row>
                    </thead>
                    <tbody>
                        <row><entry>0</entry><entry>0</entry><entry>0</entry><entry>0.5000</entry></row>
                        <row><entry>1</entry><entry>0.20</entry><entry>0.1000</entry><entry>0.4800</entry></row>
                        <row><entry>2</entry><entry>0.40</entry><entry>0.1960</entry><entry>0.4560</entry></row>
                        <row><entry>3</entry><entry>0.60</entry><entry>0.2872</entry><entry>0.4295</entry></row>
                        <row><entry>4</entry><entry>0.80</entry><entry>0.3731</entry><entry>0.4027</entry></row>
                        <row><entry>5</entry><entry>1.00</entry><entry>0.4536</entry><entry>0.3783</entry></row>
                        <row><entry>6</entry><entry>1.20</entry><entry>0.5293</entry><entry>0.3591</entry></row>
                        <row><entry>7</entry><entry>1.40</entry><entry>0.6011</entry><entry>0.3480</entry></row>
                        <row><entry>8</entry><entry>1.60</entry><entry>0.6707</entry><entry>0.3474</entry></row>
                        <row><entry>9</entry><entry>1.80</entry><entry>0.7402</entry><entry>0.3603</entry></row>
                        <row><entry>10</entry><entry>2.00</entry><entry>0.8123</entry><entry>0.3900</entry></row>
                    </tbody>
                </tgroup>
            </table>

        </section>

        <section>
            <title>Ordered Lists with No Labels</title>

            <p>Once in the sample article, but now with two problems, not one.  What were we thinking?</p>

            <ol label="">
                <li>Level 1, first.</li>
                <li>Level 1, second.<ol label="++A">
                    <li>Level 2, first.</li>
                    <li>Level 2, second.<ol label="">
                            <li>Level 3, first.</li>
                            <li>Level 3, second.</li>
                            <li>Level 3, third.</li>
                        </ol></li>
                    <li>Level 2, third.</li>
                </ol></li>
                <li>Level 1, third.</li>
            </ol>
        </section>

        <section>
            <title>Catching Mis-Authored Code Chunks</title>

            <p>The XML special characters are often misunderstood.  We can <q>see</q> when an element expecting pure text has a stray XML element.  This could happen when code outputs legitimate HTML elements via print statements.  But there are other possibilities.  Solution, generally, is to use an escaped <q>less than</q> (<c>&amp;lt;</c>) or use a CDATA section.  First a silly inline verbatim that has a problem: <c>foo <bar/> foo</c>, and a structured code display<cd>
                <cline>I'm fine.</cline>
                <cline>I'm <broken/>.</cline>
            </cd>Note, this is no help for stray <q>less than</q> in places like tikz code for diagrams.</p>
        </section>

        <section>
            <title>A Badly Structured Section</title>

            <p>This introductory paragraph should be inside an introduction, since it is followed by a sequence of subsections (well, just one anyway).  This will fail validation, and <em>also</em> raise a warning.</p>

            <subsection>
                <title>First Subsection</title>

                <p>With a single paragraph.  We try to catch this common structural violation.</p>
            </subsection>
        </section>

        <section>
            <title>Prohibited Cross-References in Display Mathematics</title>

            <p>Cross-references can be built into display mathematics, but they can only point to one item (<ie/> a comma-delimited list of targets is not supported).<md>
                <mrow>x^2 + y^2 &amp;= z^2&amp;&amp;<xref ref="table-euler1"/></mrow>
                <mrow>x^2 + y^2 &amp;= z^2&amp;&amp;<xref ref="section-images"/></mrow>
                <mrow>a^2 + b^2 &amp;= c^2&amp;&amp;<xref ref="table-euler1, table-euler1"/></mrow>
            </md></p>
        </section>

        <section>
            <title>Side-by-Side Paragraphs</title>

            <sidebyside>
                <p>First panel.</p>
                <paragraphs>
                    <title>Mock Title</title>
                    <p>Paragraph one.</p>
                    <image source="images/foobar.png"/>
                    <p>Paragraph two.</p>
                </paragraphs>
            </sidebyside>

        </section>

        <section>
            <title>WeBWorK</title>

            <p>A WeBWorK problem will need a server.  You will get a warning if you do not specify one.  But you should not be warned just because you use the empty element to get the stylized version, like this: <webwork/>.  So you can test warnings by commenting out one or the other instance.</p>

            <exercise>
                <title>Mock WW Exercise</title>

                <webwork>
                    <statement>
                        <p>Very minimal.</p>
                    </statement>
                </webwork>
            </exercise>

        </section>

        <section>
            <title>Image Descriptions</title>

            <p>The <c>height</c> attribute is ineffective on <c>image</c> elements.</p>

            <figure>
                <image height="30%" source="images/foobar.png"/>
            </figure>

            <p><c>width</c> attributes once could be dimensionless, but now need to be percentages.</p>

            <figure>
                <image width="300" source="images/foobar.png"/>
            </figure>

        </section>

        <section>
            <title>Bona Fide <webwork/> Problems</title>

            <p>These are two legitimate <webwork/> problems copied from the WW sample chapter on 2018-07-12.  We are using them, and variants below, to test Schematron rules enforcing locations where <webwork/>-specific exceptions are alllowed.  The third problem is a clone of the second, but with a <tag>setup</tag> element that is deprecated as of 2020-03-13.</p>

            <exercise>
                <title>Solving Quadratic Equations</title>

                <webwork xml:id="quadratic-equation">
                    <!-- TODO: move out context shift -->
                    <pg-code>
                        Context("Fraction");

                        $a = Compute(random(2,6,1));
                        do {$k = Compute(random(2,6,1))} until (gcd($a,$k)==1);
                        $r = Compute(random(2,6,1));
                        $c = $k*-$r;
                        $b = $a*-$r+$k;
                        $quadratic = Formula("$a x^2 + $b x + $c")->reduce;
                        $x1 = Fraction($r,1);
                        $x2 = Fraction(-$k,$a);
                        Context()->flags->set(reduceConstants=>0,reduceConstantFunctions=>0);
                        $solnum1 = Formula("-$b+sqrt(($b)**2-4($a)($c))");
                        $solnum2 = Formula("-$b-sqrt(($b)**2-4($a)($c))");

                        $evaluatorfora = $a->cmp()->withPostFilter(AnswerHints(
                            [-$a] =>
                            "Do you have the sign correct?"));
                        $evaluatorforb = $b->cmp()->withPostFilter(AnswerHints(
                            [-$b] =>
                            "Do you have the sign correct?"));
                        $evaluatorforc = $c->cmp()->withPostFilter(AnswerHints(
                            [-$c] =>
                            "Do you have the sign correct?"));

                        Context("LimitedFraction");
                        $multians1 = MultiAnswer(Fraction("$x1"),Fraction("$x2"))->with(
                            singleResult => 0,
                            allowBlankAnswers => 1,
                            checker => sub {
                                my ($correct,$student,$self) = @_;
                                my ($s1, $s2) = @{$student};
                                my ($c1, $c2) = @{$correct};

                                return (1,1) if ($c1 == $s1 and $c2 == $s2) or
                                                ($c1 == $s2 and $c2 == $s1);
                                return (1,0) if $c1 == $s1 or $c2 == $s1;
                                return (0,1) if $c1 == $s2 or $c2 == $s2;
                                return (0,0);
                            }
                        );
                    </pg-code>

                    <stage>
                        <title>Part 1: Identify the coefficients</title>

                        <statement>
                            <p>Consider the quadratic equation given by <me><var name="$quadratic" /> = 0\text{.}</me>  First, identify the coefficients for the quadratic equation using the standard form from <xref ref="theorem-quadratic-formula" />.</p>

                            <p><m>a=</m> <var name="$a" width="4" evaluator="$evaluatorfora"/>, <m>b=</m> <var name="$b" width="4" evaluator="$evaluatorforb"/>, <m>c=</m> <var name="$c" width="4" evaluator="$evaluatorforc"/></p>
                        </statement>

                        <solution>
                            <p> Take the coefficient of <m>x^2</m> for the value of <m>a</m>, the coefficient of <m>x</m> for <m>b</m>, and the constant for <m>c</m>.  <em>In this case</em>, they are <m>a = <var name="$a" /></m>, <m>b = <var name="$b" /></m>, <m>c = <var name="$c" /></m>.</p>
                        </solution>
                    </stage>

                    <stage>
                        <title>Part 2: Solve using the quadratic formula</title>

                        <statement>
                            <p>Using the quadratic formula, solve <m><var name="$quadratic"/>=0</m>.</p>
                            <p><m>x=</m> <var name="$multians1" width="15"/> or <m>x=</m> <var name="$multians1" width="15"/></p>
                        </statement>

                        <solution>
                            <p>Recall that the quadratic formula is given in <xref ref="theorem-quadratic-formula" />.</p>

                            <p>You already identified <m>a = <var name="$a"/></m>, <m>b = <var name="$b"/></m>, and <m>c = <var name="$c"/></m>, so the results are: <me>x = {<var name="$solnum1"/> \over 2(<var name="$a"/>)} = <var name="$x1"/></me> or <me>x = {<var name="$solnum2"/> \over 2(<var name="$a"/>)} = <var name="$x2"/></me></p>
                        </solution>
                    </stage>
                </webwork>
            </exercise>


            <exercise>
                <title>Tables</title>

                <webwork xml:id="tables">
                    <pg-code>
                        $x = Real(5);
                    </pg-code>

                    <statement>
                        <p>A table with minimal XML source.</p>

                        <sidebyside>
                            <tabular>
                                <row>
                                    <cell>A</cell>
                                    <cell>B</cell>
                                    <cell>C</cell>
                                </row>
                                <row>
                                    <cell>D</cell>
                                    <cell>E</cell>
                                    <cell>F</cell>
                                </row>
                                <row>
                                    <cell>G</cell>
                                    <cell>H</cell>
                                    <cell>I</cell>
                                </row>
                            </tabular>
                        </sidebyside>
                        <p>Finish this table.</p>

                        <sidebyside>
                            <tabular top="major" left="major" bottom="major" right="minor" halign="center">
                                <col halign="right" top="minor"/>
                                <col right="medium"/>
                                <col halign="left"/>
                                <row bottom="none" left="none">
                                <cell right="minor">1</cell>
                                    <cell>two</cell>
                                    <cell><m>\lfloor\pi\rfloor</m></cell>
                                </row>
                                <row valign="bottom">
                                    <cell bottom="minor"><line><m>\text{I}+\text{I}</m></line><line><m>{}+\text{I}+\text{I}</m></line></cell>
                                    <cell><var name="$x" form="none" category="integer"/></cell>
                                    <cell>six</cell>
                                </row>
                                <row halign="right">
                                    <cell><m>2^3-1</m></cell>
                                    <cell colspan="2" halign="center">VIII</cell>
                                </row>
                            </tabular>
                        </sidebyside>
                    </statement>

                    <solution>
                        <p>The missing number is <var name="$x"/>.</p>
                    </solution>
                </webwork>
            </exercise>

            <exercise>
                <title>Tables Part Two</title>

                <webwork xml:id="tables-with-setup">
                    <setup>
                        <pg-code>
                            $x = Real(5);
                        </pg-code>
                    </setup>

                    <statement>
                        <p>A table with minimal XML source.</p>

                        <sidebyside>
                            <tabular>
                                <row>
                                    <cell>A</cell>
                                    <cell>B</cell>
                                    <cell>C</cell>
                                </row>
                                <row>
                                    <cell>D</cell>
                                    <cell>E</cell>
                                    <cell>F</cell>
                                </row>
                                <row>
                                    <cell>G</cell>
                                    <cell>H</cell>
                                    <cell>I</cell>
                                </row>
                            </tabular>
                        </sidebyside>
                        <p>Finish this table.</p>

                        <sidebyside>
                            <tabular top="major" left="major" bottom="major" right="minor" halign="center">
                                <col halign="right" top="minor"/>
                                <col right="medium"/>
                                <col halign="left"/>
                                <row bottom="none" left="none">
                                <cell right="minor">1</cell>
                                    <cell>two</cell>
                                    <cell><m>\lfloor\pi\rfloor</m></cell>
                                </row>
                                <row valign="bottom">
                                    <cell bottom="minor"><line><m>\text{I}+\text{I}</m></line><line><m>{}+\text{I}+\text{I}</m></line></cell>
                                    <cell><var name="$x" form="none" category="integer"/></cell>
                                    <cell>six</cell>
                                </row>
                                <row halign="right">
                                    <cell><m>2^3-1</m></cell>
                                    <cell colspan="2" halign="center">VIII</cell>
                                </row>
                            </tabular>
                        </sidebyside>
                    </statement>

                    <solution>
                        <p>The missing number is <var name="$x"/>.</p>
                    </solution>
                </webwork>
            </exercise>
        </section>


        <section>
            <title>Broken <webwork/> Problems</title>

            <p>These are remnants of the two legitimate <webwork/> problems copied from the WW sample chapter on 2018-07-12 (above).  We are leaving them as <tag>exercise</tag> but removing the <tag>webwork</tag> wrapper to provoke errors.</p>

            <exercise>
                        <title>Part 1: Identify the coefficients</title>

                        <statement>
                            <p>Consider the quadratic equation given by <me><var name="$quadratic" /> = 0\text{.}</me>  First, identify the coefficients for the quadratic equation using the standard form from <xref ref="theorem-quadratic-formula" />.</p>

                            <p><m>a=</m> <var name="$a" width="4" evaluator="$evaluatorfora"/>, <m>b=</m> <var name="$b" width="4" evaluator="$evaluatorforb"/>, <m>c=</m> <var name="$c" width="4" evaluator="$evaluatorforc"/></p>
                        </statement>

                        <solution>
                            <p> Take the coefficient of <m>x^2</m> for the value of <m>a</m>, the coefficient of <m>x</m> for <m>b</m>, and the constant for <m>c</m>.  <em>In this case</em>, they are <m>a = <var name="$a" /></m>, <m>b = <var name="$b" /></m>, <m>c = <var name="$c" /></m>.</p>
                        </solution>
            </exercise>

            <exercise>
                        <title>Part 2: Solve using the quadratic formula</title>

                        <statement>
                            <p>Using the quadratic formula, solve <m><var name="$quadratic"/>=0</m>.</p>
                            <p><m>x=</m> <var name="$multians1" width="15"/> or <m>x=</m> <var name="$multians1" width="15"/></p>
                        </statement>

                        <solution>
                            <p>Recall that the quadratic formula is given in <xref ref="theorem-quadratic-formula" />.</p>

                            <p>You already identified <m>a = <var name="$a"/></m>, <m>b = <var name="$b"/></m>, and <m>c = <var name="$c"/></m>, so the results are: <me>x = {<var name="$solnum1"/> \over 2(<var name="$a"/>)} = <var name="$x1"/></me> or <me>x = {<var name="$solnum2"/> \over 2(<var name="$a"/>)} = <var name="$x2"/></me></p>
                        </solution>
            </exercise>


            <exercise>
                <title>Tables</title>


                    <statement>
                        <p>A table with minimal XML source.</p>

                        <sidebyside>
                            <tabular>
                                <row>
                                    <cell>A</cell>
                                    <cell>B</cell>
                                    <cell>C</cell>
                                </row>
                                <row>
                                    <cell>D</cell>
                                    <cell>E</cell>
                                    <cell>F</cell>
                                </row>
                                <row>
                                    <cell>G</cell>
                                    <cell>H</cell>
                                    <cell>I</cell>
                                </row>
                            </tabular>
                        </sidebyside>
                        <p>Finish this table.</p>

                        <sidebyside>
                            <tabular top="major" left="major" bottom="major" right="minor" halign="center">
                                <col halign="right" top="minor"/>
                                <col right="medium"/>
                                <col halign="left"/>
                                <row bottom="none" left="none">
                                <cell right="minor">1</cell>
                                    <cell>two</cell>
                                    <cell><m>\lfloor\pi\rfloor</m></cell>
                                </row>
                                <row valign="bottom">
                                    <cell bottom="minor"><line><m>\text{I}+\text{I}</m></line><line><m>{}+\text{I}+\text{I}</m></line></cell>
                                    <cell><var name="$x" form="none" category="integer"/></cell>
                                    <cell>six</cell>
                                </row>
                                <row halign="right">
                                    <cell><m>2^3-1</m></cell>
                                    <cell colspan="2" halign="center">VIII</cell>
                                </row>
                            </tabular>
                        </sidebyside>
                    </statement>

                    <solution>
                        <p>The missing number is <var name="$x"/>.</p>
                    </solution>
            </exercise>

                <figure>
                    <caption>Two named lists</caption>
                    <sidebyside widths="30% 60%" valign="top">
                        <list>
                            <caption>Sea Life</caption>
                            <title>Employed, so Caption is commented</title>
                            <introduction>
                                <p>Dr. Seuss again.</p>
                            </introduction>
                            <ul>
                                <li>One fish</li>
                                <li>Two fish</li>
                                <li>Red fish</li>
                                <li>Blue fish</li>
                            </ul>
                        </list>
                        <list xml:id="color-list-as-panel">
                            <caption>Color Shades</caption>
                            <idx><h>colors</h><h>shades</h></idx>
                            <ol>
                                <li><p>Blue<ol>
                                    <li>Light</li>
                                    <li>Navy</li>
                                    <li>Royal</li>
                                </ol></p></li>
                                <li><p>Red<ol>
                                    <li>Maroon</li>
                                    <li>Pink</li>
                                    <li>Shocking</li>
                                </ol></p></li>
                            </ol>
                            <conclusion>
                                <p>This ends our example.</p>
                            </conclusion>
                        </list>
                    </sidebyside>
                </figure>

                <table>
                    <caption>Supported Currency</caption>
                    <tabular>
                        <row bottom="medium">
                            <cell>Sign</cell>
                            <cell>Unicode</cell>
                            <cell>Name</cell>
                        </row>
                        <row>
                            <cell>&#x0024;</cell>
                            <cell><c>U+0024</c></cell>
                            <cell>dollar</cell>
                        </row>
                        <row>
                            <cell>&#x00a2;</cell>
                            <cell><c>U+00A2</c></cell>
                            <cell>cent</cell>
                        </row>
                    </tabular>
                </table>

        </section>

        <!-- These worksheets frequently have too much space alloted, -->
        <!-- so we can test the response to that author "error".      -->
        <!-- 2020-03-22: copied verbatim from the sample article      -->
       <worksheet>
          <title>A Geometric Prelude</title>
          <!-- <author>Dave Rosoff</author> -->
          <objectives xml:id="objectives">
            <ul>
              <li>Practice visualizing vector addition</li>
              <li>Use vectors without explicit coordinates</li>
            </ul>
          </objectives>
          <introduction>
            <p>This two-page worksheet was generously donated to the sample article by Dave Rosoff at a CuratedCourses workshop in August<nbsp/>2018.  It has the default (skinny) margins.</p>

            <p>It was known to Euclid, and probably earlier, that the midpoints of the sides of any quadrilateral all lie in the same plane (even if the vertices of the quadrilateral do not). In fact, these midpoints are the vertices of a parallelogram, as pictured in <xref ref="figure-midpoints-of-quadrilateral" text="type-global"/>.</p>
            <sidebyside width="30%">
              <figure xml:id="figure-midpoints-of-quadrilateral">
                <caption>The midpoints of the sides of a quadrilateral are the vertices of a parallelogram.</caption>
                <image xml:id="worksheet-midpoints-of-quadrilateral">
                  <latex-image>
                    \begin{tikzpicture}[xscale=0.8, yscale=0.8]
                     \draw[style={black, ultra thick}] (0,0) -- (5,0) -- (4,4) -- (2,5) -- (0,0);
                     \draw[style={black, dashed, very thick}] (2.5, 0) -- (4.5, 2) -- (3, 4.5) -- (1, 2.5) -- (2.5, 0);
                    \end{tikzpicture}
                  </latex-image>
                </image>
              </figure>
              <figure xml:id="figure-triangle-cyclic-vectors">
                <caption>The sides of a triangle presented as vectors.</caption>
                <image xml:id="worksheet-triangle-cyclic-vectors">
                  <latex-image>
                    \begin{tikzpicture}[xscale=1.5, yscale=1.5]
                      \draw[->,>=latex, style={black, thick}] (0,0) -- (2.30 , 0) node [below] {$\vec{A}$} --  (3,0);
                      \draw[->,>=latex, style={black, thick}] (3,0) -- (1.47, 1.53) node [above right =1mm] {$\vec{B}$} -- (1,2);
                      \draw[->,>=latex, style={black, thick}] (1,2) -- (0.23 , 0.46) node [above left=1mm] {$\vec{C}$} -- (0,0);
                      % \draw[->,>=latex, style={black,semithick,dashed}] (1,2) -- (7/6, 4/3) node
                      %   {} -- (1.5,0) node[below right=0mm and 3mm] {$\vec{A}$};
                      %\draw[->,>=latex, style={black,semithick,dashed}] (0,0) -- (2/3, 1/3) node
                      %  {} -- (2,1) node[above left=5mm and 1mm] {$\vec{B}$};
                      %\draw[->,>=latex, style={black,semithick,dashed}] (3,0) -- (13/6,1/3) node
                      %  {} -- (0.5,1) node[below left=1mm and 3mm] {$\vec{C}$};
                      %\node[draw,shape=circle,fill=black,name=P,scale=0.5] at (4/3,2/3) {};
                      %\node[above right=1.2mm and -0.5mm of P] at (4/3,2/3) {$P$};
                      % \node {$P$} (1.3333,0.6667);
                    \end{tikzpicture}
                  </latex-image>
                </image>
              </figure>
              <figure xml:id="figure-triangle-cyclic-medians">
                <caption>The medians of the triangle are <m>\vec{M}_1</m>, <m>\vec{M}_2</m>, and <m>\vec{M}_3</m>.</caption>
                <image xml:id="worksheet-triangle-cyclic-medians" width="50%">
                  <latex-image>
                    \begin{tikzpicture}[xscale=1.5, yscale=1.5]
                      \draw[->,>=latex, style={black, thick}] (0,0) -- (2.30 , 0) node [below] {$\vec{A}$} --  (3,0);
                      \draw[->,>=latex, style={black, thick}] (3,0) -- (1.47, 1.53) node [above right =1mm] {$\vec{B}$} -- (1,2);
                      \draw[->,>=latex, style={black, thick}] (1,2) -- (0.23 , 0.46) node [above left=1mm] {$\vec{C}$} -- (0,0);
                      \draw[->,>=latex, style={black,semithick,dashed}] (1,2) -- (7/6, 4/3) node
                        {$\vec{M}_{1}$} -- (1.5,0);% node[below right=0mm and 3mm] {$\vec{A}$};
                      \draw[->,>=latex, style={black,semithick,dashed}] (0,0) -- (2/3, 1/3) node
                       {$\vec{M}_{2}$} -- (2,1);% node[above left=5mm and 1mm] {$\vec{B}$};
                      \draw[->,>=latex, style={black,semithick,dashed}] (3,0) -- (13/6,1/3) node
                       {$\vec{M}_{3}$} -- (0.5,1);% node[below left=1mm and 3mm] {$\vec{C}$};
                      \node[draw,shape=circle,fill=black,name=P,scale=0.5] at (4/3,2/3) {};
                      \node[above right=1.2mm and -0.5mm of P] at (4/3,2/3) {$P$};
                      % \node {$P$} (1.3333,0.6667);
                    \end{tikzpicture}
                  </latex-image>
                </image>
              </figure>
            </sidebyside>
            <p>In this exercise, we'll use vectors to show that the medians of any triangle (<xref ref="figure-triangle-cyclic-vectors" text="type-global"/>) intersect at a point. Recall that medians are the lines connecting the vertices of the triangle to the midpoints of their opposite edges, as in the figure. We'll do this in a few steps.</p>
          </introduction>
<page>
          <exercise xml:id="ex-cyclic" workspace="4in">
            <statement>
              <p>What is the value of <m>\vec{A} + \vec{B} + \vec{C}</m>?</p>
            </statement>
          </exercise>
</page>

<page>
          <p><xref ref="figure-triangle-cyclic-medians" text="type-global"/> from the previous page is reproduced for your convenience.</p>
          <figure xml:id="figure-triangle-cyclic-medians-copy">
            <caption>The medians of the triangle are <m>\vec{M}_1</m>, <m>\vec{M}_2</m>, and <m>\vec{M}_3</m>.</caption>
            <image xml:id="worksheet-triangle-cyclic-medians-copy" width="50%">
              <latex-image>
                \begin{tikzpicture}[xscale=1.5, yscale=1.5]
                  \draw[->,>=latex, style={black, thick}] (0,0) -- (2.30 , 0) node [below] {$\vec{A}$} --  (3,0);
                  \draw[->,>=latex, style={black, thick}] (3,0) -- (1.47, 1.53) node [above right =1mm] {$\vec{B}$} -- (1,2);
                  \draw[->,>=latex, style={black, thick}] (1,2) -- (0.23 , 0.46) node [above left=1mm] {$\vec{C}$} -- (0,0);
                  \draw[->,>=latex, style={black,semithick,dashed}] (1,2) -- (7/6, 4/3) node
                    {$\vec{M}_{1}$} -- (1.5,0);% node[below right=0mm and 3mm] {$\vec{A}$};
                  \draw[->,>=latex, style={black,semithick,dashed}] (0,0) -- (2/3, 1/3) node
                   {$\vec{M}_{2}$} -- (2,1);% node[above left=5mm and 1mm] {$\vec{B}$};
                  \draw[->,>=latex, style={black,semithick,dashed}] (3,0) -- (13/6,1/3) node
                   {$\vec{M}_{3}$} -- (0.5,1);% node[below left=1mm and 3mm] {$\vec{C}$};
                  \node[draw,shape=circle,fill=black,name=P,scale=0.5] at (4/3,2/3) {};
                  \node[above right=1.2mm and -0.5mm of P] at (4/3,2/3) {$P$};
                  % \node {$P$} (1.3333,0.6667);
                \end{tikzpicture}
              </latex-image>
            </image>
          </figure>
          <sidebyside margins="0%" widths="30% 60%" valign="top">
            <exercise xml:id="exercise-vector-addition" workspace="5.5in">
              <statement>
                <p>Show that <m>\vec{M}_{1} + \vec{M}_{2} + \vec{M}_{3} = 0</m>.</p>
              </statement>
              <hint>
                <p>Use <xref ref="ex-cyclic" text="type-global"/>.</p>
              </hint>
            </exercise>
            <exercise workspace="2in">
              <statement>
                <p>To show that the point <m>P</m> exists (as the common intersection of the <m>\vec{M}_{i}</m>), show that <me>
                  \vec{A} + \frac{2}{3} \vec{M}_{3} = \frac{2}{3} \vec{M}_{2} = <fillin characters="10"/>
                </me>.</p>
              </statement>
            </exercise>
          </sidebyside>
          <exercise workspace="2.54cm">
            <p>If you have time, try to devise a vector proof of Euclid's result presented at the beginning of the workshop. Recall that a <term>parallelogram</term> is a four-sided polygon whose opposite sides are parallel.</p>
          </exercise>
</page>
          <conclusion>
            <title>Wrap-up</title>
            <p>It's possible to do interesting things with vector arithmetic in a coordinate-free way: we didn't specify an origin, or any entries of any vectors in the examples.</p>
          </conclusion>
        </worksheet>

        <worksheet top="3cm" bottom="100pt">
            <title>Networks Worksheet</title>
            <!-- <subtitle>An Activity Using Linear Algebra to Solve Network Applications</subtitle> -->

            <introduction>
                <title>Basic laws for electrical circuits</title>

                <p>This two-page worksheet was generously donated to the sample article by Virgil Pierce at a CuratedCourses workshop in August<nbsp/>2018.  It has default (skinny) left and right margins, but we have specified longer top and bottom margins, with the top being the larger of the two.</p>

                <theorem>
                    <title> Ohms Law </title>
                    <p> The current through a resistor is proportional to the ratio of the <em> Voltage </em> to the <em> Resistance </em>
                        <me> I = \frac{V}{R} </me>
                        Or for our purposes
                        <me> I R = V </me>
                    </p>
                </theorem>

                <theorem>
                    <title>Kirchoffs Current Law</title>
                    <p> The sum of the currents in a network meeting at a point is zero.
                        <me> \sum_{k=1}^n I_k = 0 </me>
                    </p>
                </theorem>

                <example>
                    <title> Kirchoff's Current Law </title>
                    <p> For the circuit below <m> I_1 + I_2 = I_3 </m>.</p>
                    <image xml:id="worksheet-kirchoff-law" width="40%">
                        <latex-image>
                        \begin{circuitikz}
                        \draw (0,0)
                        to[R, i=$I_1$, *-o](2,2);
                        \draw (0,0)
                        to[R, i=$I_2$, *-o](2,-2);
                        \draw (-3, 0)
                        to[R, i=$I_3$, o-*](0,0);
                        \end{circuitikz}
                        </latex-image>
                    </image>
                </example>

                <theorem>
                    <title> Kirchoffs Voltage Law </title>
                    <p> The sum of the voltages around any closed circuit (or subcircuit) is zero.
                        <me> \sum_{k=1}^n V_k = 0 </me>
                    </p>
                </theorem>

                <p> Kirchoffs Current Law and Kirkoffs Voltage Law combined with Ohms Law gives for any circuit of resistors and sources a linear system that may (or may not) determine the currents.
                </p>
            </introduction>
<page>
</page>

<page>
            <sidebyside width="45%" margins="0%">
                <exercise workspace="1.5in">
                    <statement>
                    <p>For the simple network pictured, calculuate the amperage in each part of the network by setting up a system of linear equations for the amperages. </p>
                    <image xml:id="worksheet-simple-network">
                        <latex-image>
                        \begin{circuitikz}
                        \draw (0,0)
                        to[V, v=$11\quad \mbox{volt}$](0, 3)
                        to[short](2,3)
                        to[R, R=$4\quad \mbox{ohm}$] (3, 3)
                        to[short](4,3)
                        to[R, R=$3\quad \mbox{ohm}$](4,0)
                        to[short](3,0)
                        to[R, R=$3\quad \mbox{ohm}$](2,0)
                        to[short](0,0);
                        \end{circuitikz}
                        </latex-image>
                    </image>
                   </statement>
                </exercise>

                <exercise workspace="2in">
                    <statement>
                    <p> Compare it with a parallel circuit network. Calculate the amperage in each part of the network by setting up a system of linear equations for the amperages. </p>
                    <image xml:id="worksheet-parallel-circuit">
                        <latex-image>
                        \begin{circuitikz}
                        \draw(0,0)
                        to[V, v=$11\quad \mbox{volt}$](0, 3)
                        to[short](5,3)
                        to[R, R=$4\quad \mbox{ohm}$](6,3)
                        to[short](7,3)
                        to[R, R=$3\quad \mbox{ohm}$](7,0)
                        to[short](6,0)
                        to[R, R=$3\quad \mbox{ohm}$](5,0)
                        to[short](0,0);
                        \draw(4,0)
                        to[R, R=$3\quad \mbox{ohm}$](4,3);
                        \end{circuitikz}
                        </latex-image>
                    </image>
                    </statement>
                </exercise>
            </sidebyside>

            <exercise workspace="1in">
                <statement>
                <p> Now for a more complicated network. Calculate the amperage in each part of the network by setting up a system of linear equations for the amperages. </p>
                <image xml:id="worksheet-complicated-network">
                    <latex-image>
                    \begin{circuitikz}
                    \draw(0,0)
                    to[V, v=$11 \quad \mbox{volt}$](0, 3)
                    to[short](5,3)
                    to[R, R=$4 \quad \mbox{ohm}$](6,3)
                    to[short](9,3)
                    to[R, R=$4 \quad \mbox{ohm}$](10,3)
                    to[short](11,3)
                    to[R, R=$3 \quad \mbox{ohm}$](11, 0)
                    to[short](10,0)
                    to[R, R=$2\quad \mbox{ohm}$](9,0)
                    to[short](6,0)
                    to[R, R=$2\quad \mbox{ohm}$](5,0)
                    to[short](0,0);
                    \draw(4,0)
                    to[R, R=$3\quad \mbox{ohm}$](4,3);
                    \draw(8,0)
                    to[R, R=$1\quad \mbox{ohm}$](8,3);
                    \end{circuitikz}
                    </latex-image>
                </image>
                </statement>
            </exercise>
</page>

<page>
            <exercise workspace="3in">
                <statement>
                    <p> Now generalize these ideas to a context outside of electrical circuits. Consider the network of streets given in the diagram (with one-way directions as indicated).</p>

                    <image xml:id="worksheet-street-network" width="65%">
                        <latex-image>
                        <![CDATA[
                        \begin{tikzpicture}[>=stealth]
                        \draw[->, very thick] (0,0) -- (10, 0) node[midway, below]{East Bound Winooski Ave};
                        \draw[<-, very thick] (0, 1) -- (10, 1) node[midway, above]{West Bound Winooski Ave};
                            \draw[<-, very thick] (0, 4) -- (10, 4) node[midway, above]{Shelburne St};
                            \draw[<-, very thick] (1, -1) -- (1, 5) node[midway, above, sloped]{Willow};
                            \draw[->, very thick] (9, -1) -- (9, 5) node[midway, above, sloped]{Jay};
                            \end{tikzpicture}
                        ]]>
                        </latex-image>
                    </image>

                    <p>A traffic engineer counts the hourly flow of cars into and out of this network at the entrances.  They get (EB = East Bound; WB = West Bound): </p>

                    <table>
                        <title>Estimated hourly traffic flow for the road network</title>
                        <tabular>
                            <row>
                                <cell>
                                </cell>
                                <cell>
                                    EB Winooski
                                </cell>
                                <cell>
                                    WB Winooski
                                </cell>
                                <cell>
                                    Shelburne St
                                </cell>
                                <cell>
                                    Willow
                                </cell>
                                <cell>
                                    Jay
                                </cell>
                            </row>
                            <row>
                                <cell>
                                    into
                                </cell>
                                <cell>
                                    50
                                </cell>
                                <cell>
                                    400
                                </cell>
                                <cell>
                                    0
                                </cell>
                                <cell>
                                    10
                                </cell>
                                <cell>
                                    50
                                </cell>
                            </row>
                            <row>
                                <cell>
                                    out of
                                </cell>
                                <cell>
                                    55
                                </cell>
                                <cell>
                                    390
                                </cell>
                                <cell>
                                    20
                                </cell>
                                <cell>
                                    15
                                </cell>
                                <cell>
                                    30
                                </cell>
                            </row>
                        </tabular>
                    </table>

                    <p> Use a variable for each segment inside of the network and set up a system of linear equations restricting the flow. Solve the system.  Note that you should not get a unique solution as traffic should be able to flow through the network in various ways. </p>
                </statement>
            </exercise>
</page>
        </worksheet>

        <worksheet margin="1cm">
            <introduction>
                <p>This is a mock one-page worksheet for testing purposes. We have specified an overall margin just slightly less than the default.</p>
            </introduction>

<page>
            <sidebyside width="45%" margins="0%">
                <exercise workspace="1in">
                    <statement>
                        <p>Praesent rutrum scelerisque felis sit amet adipiscing. Phasellus in mollis velit. Nunc malesuada felis sit amet massa cursus, eget elementum neque viverra.</p>
                    </statement>
                </exercise>

                <exercise workspace="1.8in">
                    <statement>
                        <p>Integer sagittis dictum turpis vel aliquet. Fusce ut suscipit dolor, nec tristique nisl. Aenean luctus, leo et ornare fermentum, nibh dui vulputate leo, nec tincidunt augue ipsum sed odio. Nunc non erat sollicitudin, iaculis eros consequat, dapibus eros.</p>
                    </statement>
                </exercise>
            </sidebyside>

            <p>A two-line paragraph interspersed to check on spacing, breaks and all that.</p>

            <exercise workspace="1.5in">
                <title>A full-width exercise</title>
                <statement>
                    <p>Praesent rutrum scelerisque felis sit amet adipiscing. Phasellus in mollis velit. Nunc malesuada felis sit amet massa cursus, eget elementum neque viverra.</p>
                    <p>Integer sagittis dictum turpis vel aliquet. Fusce ut suscipit dolor, nec tristique nisl. Aenean luctus, leo et ornare fermentum, nibh dui vulputate leo, nec tincidunt augue ipsum sed odio. Nunc non erat sollicitudin, iaculis eros consequat, dapibus eros.</p>
                </statement>
            </exercise>

            <p>Another two-line paragraph interspersed to check on spacing, breaks and all that.</p>

            <sidebyside width="30%" margins="0%">
                <exercise>
                    <statement>
                        <p>Praesent rutrum scelerisque felis sit amet adipiscing. Phasellus in mollis velit. Nunc malesuada felis sit amet massa cursus, eget elementum neque viverra.</p>
                    </statement>
                </exercise>

                <exercise workspace="1in">
                    <!-- <title>The Tallest</title> -->
                    <statement>
                        <p>Integer sagittis dictum turpis vel aliquet. Fusce ut suscipit dolor, nec tristique nisl. Aenean luctus, leo et ornare fermentum, nibh dui vulputate leo, nec tincidunt augue ipsum sed odio. Nunc non erat sollicitudin, iaculis eros consequat, dapibus eros.</p>
                    </statement>
                </exercise>

                <exercise workspace="1in">
                    <statement>
                        <p>Praesent rutrum scelerisque felis sit amet adipiscing. Phasellus in mollis velit. Nunc malesuada felis sit amet massa cursus, eget elementum neque viverra.</p>
                    </statement>
                </exercise>
            </sidebyside>

            <activity>
                <title>A Mock Activity</title>

                <statement>
                    <p>The problem, as we see it.</p>
                </statement>
                <hint>
                    <p>A worksheet could have hints, no?  But no spacing. Note row below has widths set to balance the heights.</p>
                </hint>
            </activity>

            <sidebyside widths="25% 40% 25%" margins="0%">
                <exercise workspace="0.5in">
                    <statement>
                        <p>Praesent rutrum scelerisque felis sit amet adipiscing. Phasellus in mollis velit. Nunc malesuada felis sit amet massa cursus, eget elementum neque viverra.</p>
                    </statement>
                </exercise>

                <exercise workspace="0.5in">
                    <!-- <title>Balanced Heights</title> -->
                    <statement>
                        <p>Integer sagittis dictum turpis vel aliquet. Fusce ut suscipit dolor, nec tristique nisl. Aenean luctus, leo et ornare fermentum, nibh dui vulputate leo, nec tincidunt augue ipsum sed odio. Nunc non erat sollicitudin, iaculis eros consequat, dapibus eros.</p>
                    </statement>
                </exercise>

                <exercise workspace="0.5in">
                    <statement>
                        <p>Praesent rutrum scelerisque felis sit amet adipiscing. Phasellus in mollis velit. Nunc malesuada felis sit amet massa cursus, eget elementum neque viverra.</p>
                    </statement>
                </exercise>
            </sidebyside>
</page>
        </worksheet>



        <worksheet courseid="MAT-150" series="Activity" seriescode="13">
          <title>Dot products and projection</title>
<page>
            <sidebyside width="45%" margins="0%">
                <exercise>
                    <introduction>
                        <p>Let
<m>{\vec v}_1 = (-4,1)</m>,
<m>{\vec v}_2 = (2,2)</m>,
<m>{\vec v}_3 = (1,2,3)</m>,
<m>{\vec v}_4 = (-2,1,0)</m>.
                         Find the values of the following expressions:</p>
                    </introduction>

<task workspace="1in">
<m>{\vec v}_1 \cdot {\vec v}_2 = <fillin/></m>
</task>
<task workspace="1.0in">
<m>{\vec v}_3 \cdot {\vec v}_4 = <fillin/></m>
</task>
<task workspace="1in">
<m>\lVert{\vec v}_1\rVert = <fillin/></m>
</task>
<task workspace="1in">
<m>\lVert{\vec v}_4\rVert = <fillin/></m>
</task>
<task workspace="1in">
<p>
Are any of these vectors perpendicular to each other?
<fillin/>
</p>
</task>
                </exercise>

                <exercise workspace="3in">
                    <statement>
                        <p>The vectors <m>\vec a = (3,9)</m> and <m>\vec u = (4,2)</m>
are pictured below.  Derive the formula for projection on a line and use it to find the
projection of <m>\vec a</m> on the line spanned by <m>\vec u</m>.
Also compute the length of the residual vector.</p>
<image width="100%" source="images/projection1.png">
                    <description>two vectors...</description>
                </image>
                    </statement>
                </exercise>
            </sidebyside>
</page>

<page>
          <sidebyside width="48%" margins="0%">
            <exercise>
                <introduction>
                    <p>Consider the vector equation
<me>
m \begin{bmatrix}2 \\ 5\end{bmatrix} = \begin{bmatrix}3 \\ 7\end{bmatrix}
</me>.
</p>
                </introduction>
<task workspace="1in">
<p>Check that there is no solution <m>m</m> that makes the equation true.</p>
</task>

<task workspace="2in">
<p>Use projection to find the best approximation <m>\hat m</m>.</p>
</task>

<task workspace="1.0in">
<p>Compute <m>\hat m \begin{bmatrix}2 \\ 5\end{bmatrix} </m>.</p>
</task>

<task workspace="1.5in">
<p>Compute the residual vector.</p>
</task>

<task workspace="2.5in">
<p>Compute the length of the residual vector and explain what it means.</p>
</task>
            </exercise>

            <exercise>
     <introduction>
                    <p>Consider the system of equations
<md>
<mrow>
3t \amp =5
</mrow>
<mrow>
2t \amp = 9
</mrow>
</md>.
</p>
    </introduction>
<task workspace="2in">
<p>Write the system in vector form.</p>
</task>

<task workspace="3.9in">
<p>Find the best estimate, <m>\hat t</m>, of <m>t</m> using projection.</p>
</task>

<task workspace="2in">
<p>Compute the length of the residual vector.</p>
</task>
            </exercise>
          </sidebyside>
</page>
        </worksheet>



        <backmatter>
            <!-- need an index to provoke error warnings above -->
            <index>
                <title>Index</title>
                <index-list />
            </index>
        </backmatter>
    </article>

</pretext>
