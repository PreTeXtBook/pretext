<?xml version="1.0" encoding="UTF-8" ?>

<!--********************************************************************
Copyright 2016 Robert A. Beezer

This file is part of MathBook XML.

MathBook XML is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 2 or version 3 of the
License (at your option).

MathBook XML is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with MathBook XML.  If not, see <http://www.gnu.org/licenses/>.
*********************************************************************-->
<!-- This file was originally part of the book     -->
<!-- (as copied on 2016/03/25)                     -->
<!--                                               -->
<!--   Abstract Algebra: Theory and Applications   -->
<!--                                               -->
<!-- Copyright (C) 1997-2014  Thomas W. Judson     -->
<chapter xml:id="rune" xmlns:xi="http://www.w3.org/2001/XInclude">
    <title>Runestone Testing</title>

    <introduction>
        <p>We collect Runestone interactive items for testing here, in sections of their own.</p>
        <p>Some of these samples only function if hosted on a Runestone server. To see those in action, visit the copy of the <url href="https://runestone.academy/ns/books/published/PTXSB/sample-book.html">Sample Book hosted on Runestone</url></p>
    </introduction>

    <section xml:id="inactive-code">
        <title>Programs</title>

        <p>First, some samples of programs that are not interactive. They will be syntax highlighted if a valid <attr>language</attr> is specified. Optionally, lines can be numbered and selected lines highlighted.</p>

        <xi:include href="./rune-examples/static-listing-java.xml"/>

        <p>Instead of specifying <attr>language</attr> on each program, a default can be specified at <c>docinfo/programs/@language</c>. That value will be used for any program that lacks a <attr>language</attr> attribute. This sample does not specify it's own <attr>language</attr> and is relying on the default set in this book.</p>

        <listing>
            <caption>Python program, relying on default programs language</caption>
            <program line-numbers="yes" include-source="yes">
                <code>
                def say_hello():
                    print("Hello, World!")

                say_hello()
                </code>
            </program>
        </listing>

    </section>

    <section xml:id="activecode">
        <title>ActiveCode</title>

        <p>Programs in supported languages are made interactive in HTML when <attr>interactive</attr> is set to <c>activecode</c>. Some languages can be made interactive on any server, while others require being served from Runestone servers. See <url href="https://pretextbook.org/doc/guide/html/topic-program-console.html#interactive-program-capabilities">Interactive Programs Capabilities in the PreTeXt Guide</url> for a list of what languages are supported in which environs.</p>

        <listing xml:id="program-activecode-python">
            <title>An interactive Python program, using <pubtitle>Runestone</pubtitle></title>
            <program xml:id="python-hello-world" interactive='activecode' language="python" label="hello-world">
                <code>
                print("Hello, World!")
                </code>
            </program>
        </listing>

        <p>Otherwise they are rendered as text with syntax coloring. Either way, if a <attr>language</attr> is not specified, <c>docinfo/programs/@language</c> will be checked to determine what language to assume the code is written in.
        </p>

        <listing xml:id="program-activecode-python2">
            <title>An interactive Python program, using <pubtitle>Runestone</pubtitle></title>
            <program xml:id="python-hello-world2" label="hello-world2">
                <code>
                print("Hello, World!")
                </code>
            </program>
        </listing>

        <p>A C program will only be interactive if hosted on a Runestone server.</p>

        <listing xml:id="program-activecode-c">
            <title>An C program, interactive on a <pubtitle>Runestone</pubtitle> server</title>
            <program xml:id="c-hello-world" interactive='activecode' language="c">
                <code>
                #include &lt;stdio.h&gt;

                int main(void)
                {
                    puts("Hello, world!");
                }
                </code>
            </program>
        </listing>

        <p>A Java program will only be interactive if hosted on a Runestone server.</p>

        <listing xml:id="program-activecode-java">
            <title>Informal Java <q>Hello, World</q></title>
            <title>A Java program, interactive on a <pubtitle>Runestone</pubtitle> server</title>
            <program xml:id="java-hello-world" interactive='activecode' language="java">
                <title>"hi" in Java</title>
                <code>
                public class HelloWorld {
                    public static void main(String[] args) {
                        System.out.println("Hi world!");
                    }
                }
                </code>
            </program>
        </listing>

        <p>Javascript programs are made interactive in HTML, on request.</p>

        <listing xml:id="program-activecode-javascript">
            <title>An interactive JavaScript program, using <pubtitle>Runestone</pubtitle></title>
            <program xml:id="javascript-hello-world" interactive='activecode' language="javascript">
                <code>
                document.write('Hello, world!');
                </code>
            </program>
        </listing>

        <p>Some languages, like Java or C++, are only interactive when run on a Runestone server where the code can be compiled and run. Those languages can specify <attr>compiler-args</attr> and <attr>linker-args</attr> or <attr>interpreter-args</attr> as appropriate to the language. Default values for those options can be set in <tag>docinfo/programs</tag> - any defaults set there will be used for any program that lacks the corresponding attribute.</p>

        <listing>
            <title>A C++ program with compiler-args and stdin</title>
            <p>It may be convenient to set <attr>compiler-args</attr> and <attr>linker-args</attr> at the book level in <tag>docinfo/programs</tag>. Values specified in that location will be used for any <tag>program</tag> that does not override the values by specifying its own attributes.</p>
            <program interactive="activecode" label="hello-world-cpp" language="cpp" compiler-args="-std=c++17,-Wall,-g" linker-args="-g,-s" include-source="yes">
                <code>
                    #include &lt;iostream&gt;
                    #include &lt;string&gt;
                    using namespace std;
                    int main() {
                        string name;
                        cin &gt;&gt; name;
                        cout &lt;&lt; "Hello, " &lt;&lt; name &lt;&lt; endl;
                        return 0;
                    }
                </code>
                <stdin>Jane</stdin>
            </program>
        </listing>

        <listing xml:id="program-static-java">
            <title>A static Java program</title>
            <program xml:id="java-static" interactive='no' language="java">
                <code>
                import javax.swing.JFrame;  //Importing class JFrame
                import javax.swing.JLabel;  //Importing class JLabel
                public class HelloWorld {
                    public static void main(String[] args) {
                        JFrame frame = new JFrame();           //Creating frame
                        frame.setTitle("Hi!");                 //Setting title frame
                        frame.add(new JLabel("Hello, world!"));//Adding text to frame
                        frame.pack();                          //Setting size to smallest
                        frame.setLocationRelativeTo(null);     //Centering frame
                        frame.setVisible(true);                //Showing frame
                    }
                }
                </code>
            </program>
        </listing>


        <p>An Octave program will also only be interactive if hosted on a Runestone server.  Octave is meant to be a drop-in replacement for Matlab.</p>

        <listing xml:id="program-activecode-octave">
            <title>A simple Octave program</title>
            <program xml:id="octave-simple" interactive='activecode' language="octave" include-source="yes">
                <code>
                x = 2 + 2
                printf("%d\n", x)
                </code>
            </program>
        </listing>

        <p>Likewise, a Kotlin program will only be interactive if hosted on a Runestone server.</p>

        <listing xml:id="program-activecode-kotlin">
            <title>A simple Kotlin program</title>
            <program xml:id="kotlin-hello-world" interactive='activecode' language="kotlin" include-source="yes">
                <code>
                fun main() {
                    println("Hello, world!!")
                }
                </code>
            </program>
        </listing>

        <p>A language not supported by Runestone Services will always be rendered static.</p>

        <listing xml:id="program-mistake-pascal">
            <title>A Pascal program that cannot be interactive on Runestone</title>
            <program xml:id="pascal-mistake" interactive='activecode' language="pascal" include-source="yes">
                <code>
                program HelloWorld;
                begin
                  WriteLn('Hello, world!');
                end.
                </code>
            </program>
        </listing>

        <p>The <attr>highlight-lines</attr> works on ActiveCode programs, but the highlighted lines are only shown when viewing the initial code. Any version of the code that the reader has edited may have shifted lines of code and thus highlighting might affect the wrong lines, causing confusion.</p>

        <program interactive='activecode' language="python" label="program-activecode-highlights" highlight-lines="1-2,5" include-source="yes">
            def add(a, b):
                return a + b

            # Use the function
            result = add(2, 3)
            if result == 5:
                print("Test passed")
            else:
                print("Test failed")
        </program>

        <p>A program can have a <tag>preamble</tag> and/or <tag>postamble</tag> which are added to the code that the user writes before it is run. They are visible by default, but can be made invisible with <attr>visible</attr> set to <c>"no"</c>. When visible, the code editor will prevent those regions from being modified. The indentation for lines in the <c>preamble/code/postamble</c> elements will be calculated relative to each other - make sure to indent them all to a similar extent. (In the source for the sample below, the <c># TODO...</c> is intentially indented one stop extra so that the user's code is part of the <c>add</c> function.</p>
        <p><tag>tests</tag> are similar to <tag>postamble</tag> in that it represents code that is added to the users submission. However, <tag>tests</tag> is intended specifically for unit testing code (see examples below for unit testing in Python, Java, C++, SQL). Tests are invisble by default and can be made visible with <attr>visible</attr> set to <c>"yes"</c>. For historical reasons, the indentation of the <tag>tests</tag> is treated separately from the rest of the program.</p>

        <xi:include href="./rune-examples/activecode-ambles.xml"/>

        <p>Here is the same Python program from the previous section, but now with a <tag>preamble</tag> and <tag>postamble</tag> that are invisible.  The user will not see the code that is added to their submission.  Not actually useful in this case, but it might be if you wanted to hide boilerplate setup from the reader.</p>

        <listing>
            <caption>A Python program with invisible pre/post ambles</caption>
            <program interactive='activecode' language="python" label="program-activecode-python-ambles-invisible" include-source="yes">
                <preamble visible="no">
                def add(a, b):
                </preamble>
                <code>
                    # TODO - complete the add function
                </code>
                <postamble visible="no">

                # Use the function
                result = add(2, 3)
                if result == 5:
                    print("Test passed")
                else:
                    print("Test failed")
                </postamble>
            </program>
        </listing>

        <p>The following Python program is in a <tag>listing</tag> since we will want to reference it shortly.  The program does not do very much, it just defines four variables whose values are lists of statistics.  It should run, and there will be no syntax errors, but it is a bit boring since there is no output. Note that it does not have an <attr>language</attr> and is relying on the default one specified in <tag>docinfo/programs</tag></p>

        <listing xml:id="listing-python-included">
            <title>A Python program that defines some statistics</title>
            <program xml:id="python-statistics" interactive='activecode' label="statistics" include-source="yes">
                <code>
                loan_amount = [1250.0, 500.0, 1450.0, 200.0, 700.0, 100.0, 250.0, 225.0, 1200.0, 150.0, 600.0, 300.0, 700.0, 125.0, 650.0, 175.0, 1800.0, 1525.0, 575.0, 700.0, 1450.0, 400.0, 200.0, 1000.0, 350.0]

                country_name = ['Azerbaijan', 'El Salvador', 'Bolivia', 'Paraguay', 'El Salvador', 'Philippines', 'Philippines', 'Nicaragua', 'Guatemala', 'Philippines', 'Paraguay', 'Philippines', 'Bolivia', 'Philippines', 'Philippines', 'Madagascar', 'Georgia', 'Uganda', 'Kenya', 'Tajikistan', 'Jordan', 'Kenya', 'Philippines', 'Ecuador', 'Kenya']

                time_to_raise = [193075.0, 1157108.0, 1552939.0, 244945.0, 238797.0, 1248909.0, 773599.0, 116181.0, 2288095.0, 51668.0, 26717.0, 48030.0, 1839190.0, 71117.0, 580401.0, 800427.0, 1156218.0, 1166045.0, 2924705.0, 470622.0, 24078.0, 260044.0, 445938.0, 201408.0, 2370450.0]

                num_lenders_total = [38, 18, 51, 3, 21, 1, 10, 8, 42, 1, 18, 6, 28, 5, 16, 7, 54, 1, 18, 22, 36, 12, 8, 24, 8]
                </code>
            </program>
        </listing>

        <p>An ActiveCode running on the Runestone server (rather than in a browser) can be provided with attributes that are flags to influence the compiler and linker, as in this <tag>program</tag> recycled from before.</p>

        <listing xml:id="program-activecode-java-flags">
            <title>A Java program, interactive on a <pubtitle>Runestone</pubtitle> server, with compiler and linker flags</title>
            <program xml:id="java-hello-world-flags" interactive='activecode' language="java" compiler-args="-g" linker-args="-s">
                <title>"hi" in Java</title>
                <code>
                import javax.swing.JFrame;  //Importing class JFrame
                import javax.swing.JLabel;  //Importing class JLabel
                public class HelloWorld {
                    public static void main(String[] args) {
                        JFrame frame = new JFrame();           //Creating frame
                        frame.setTitle("Hi!");                 //Setting title frame
                        frame.add(new JLabel("Hello, world!"));//Adding text to frame
                        frame.pack();                          //Setting size to smallest
                        frame.setLocationRelativeTo(null);     //Centering frame
                        frame.setVisible(true);                //Showing frame
                    }
                }
                </code>
            </program>
        </listing>

        <p>Now a programming exercise.  The program upcoming is going to <term>include</term> all the code of the program preceding.  This is accomplished with an <attr>include</attr> attribute on the <em>including</em> program whose value is the <attr>xml:id</attr> of the <em>included</em> program.  So by running the next program, it should pass all of its three tests (for example another example using unit tests, see <xref ref="unit-test-example"/>).  Now reload the page, do not run the program in the listing, and then see that the program in the exercise still runs correctly.</p>

        <p>You'll see nothing that tells the reader that the one chunk of code is prefacing the other.  And in static formats it might be even less obvious.  So you will want to say <em>something</em> to alert the reader.  Here it is easy: <xref ref="exercise-python-including"/> includes all the code from <xref ref="listing-python-included"/>.</p>

        <p>This program also makes use of <attr>autorun</attr> to execute on page load and the <attr>codelens</attr>to disable the codelens feature.</p>

        <exercise xml:id="exercise-python-including" include-source="yes">
            <title>A Python program, including another</title>
            <statement>
                <p>Compute the total amount of money loaned and store it in the variable <c>loan_total</c>.</p>
            </statement>
            <program autorun="yes" codelens="no" xml:id="python-summation" interactive='activecode' language="python" label="python-sum-total" include="python-statistics">
                <code>
                loan_total = 0
                for loan in loan_amount:
                    loan_total += loan
                print(loan_total)
                </code>
                <tests>
                from unittest.gui import TestCaseGui

                class MyTests(TestCaseGui):

                    def testOne(self):
                        self.assertTrue('loan_total' in self.getEditorText(), "you need a loan_total variable")
                        self.assertEqual(loan_total, sum(loan_amount), "Use the accumulator pattern to add up all the loans")
                        self.assertFalse('sum(' in self.getEditorText(), "you may not use sum()")

                MyTests().main()
                </tests>
            </program>
        </exercise>

        <p>Exact same exercise again, but now we include <em>three</em> programs.  We first get the simple <q>Hello, world!</q> program at <xref ref="program-activecode-python"/>, then the program defining the variables with lists of statistics at <xref ref="listing-python-included"/>, and finally the program from the appendix just to test linking to material there.</p>

        <p>This program also makes use of <attr>hidecode</attr> to initially keep the code hidden and <attr>download</attr> to enable a file download of the program (that includes all the included code).</p>

        <exercise xml:id="exercise-python-including-two" include-source="yes">
            <title>A Python program, including two others</title>
            <statement>
                <p>Compute the total amount of money loaned and store it in the variable <c>loan_total</c>.</p>
            </statement>
            <program xml:id="python-summation-two" interactive='activecode' language="python" label="python-sum-total-two" include="python-hello-world python-statistics program-appendix" hidecode="yes" download="yes">
                <code>
                loan_total = 0
                for loan in loan_amount:
                    loan_total += loan
                print(loan_total)
                </code>
                <tests>
                from unittest.gui import TestCaseGui

                class MyTests(TestCaseGui):

                    def testOne(self):
                        self.assertTrue('loan_total' in self.getEditorText(), "you need a loan_total variable")
                        self.assertEqual(loan_total, sum(loan_amount), "Use the accumulator pattern to add up all the loans")
                        self.assertFalse('sum(' in self.getEditorText(), "you may not use sum")

                MyTests().main()
                </tests>
            </program>
        </exercise>

        <p>Here is an activecode with <attr>language</attr> set to <c>sql</c> uses the <attr>database</attr> to load a SQLite database file.</p>

        <exercise xml:id="exercise-sql-using-db" include-source="yes">
            <title>An SQL program that uses an SQLite database file</title>
            <statement>
                <p>Select all the columns of all the rows in the <c>test</c> database table.</p>
            </statement>
            <program xml:id="sql-using-db" interactive='activecode' language="sql" label="sql-using-db" database="sql/test.db">
                <code>
                    SELECT * FROM test
                </code>
                <tests>
                    assert 1,1 == world
                    assert 0,1 == hello
                    assert 2,1 == 35
                </tests>
            </program>
        </exercise>

        <p>Now a C++ program that is spread across multiple files. This example will only be interactive on a Runestone server.</p>

        <p>First, we have a <c>.h</c> file that defines an <attr>filename</attr>. It has an <attr>xml:id</attr> so other elements can reference it. It also has an <attr>label</attr> which is it's unique identifier in the Runestone database. (The label is intentionally different than the xml:id for demonstration purposes, but they can be the same.) The <attr>filename</attr> is used to indicate what to name to use when the contents of the element are written to a file on the server - other program code and/or tools on the server can look for it using this name. The <attr>filename</attr> need not be unique<mdash/>we could have multiple programs with <attr>filename="add.h"</attr>. As we will see below, the author specifies which <q>version</q> of a file should be used in any given location with its unique xml:id.</p>

        <p>The <tag>program</tag> is inside of a <tag>listing</tag> so that we have a place to add a caption and so that we can reference the code sample, including that caption, with an <tag>xref</tag> from elsewhere. Note that the <tag>listing</tag> has both a <tag>caption</tag> and a <tag>title</tag>. The <tag>caption</tag> will be rendered with the program. The <tag>title</tag> will not appear locally. It will be used if an <tag>xref</tag> links to the <tag>listing</tag> using <attr>text="title"</attr></p>

        <listing xml:id="addh-v1-listing">
            <title>add.h (version 1)</title>
            <caption>add.h (version 1) - A very simple header file that lacks header guards.</caption>
            <program filename="add.h" xml:id="addh-v1" label="addh-v1-label" language="cpp" include-source="yes">
                int add(int a, int b);
            </program>
        </listing>

        <p>Next, a <c>.cpp</c> file. Note that because it is part of an exercise, the <attr>label</attr> is applied to the exercise that contains it. The <attr>xml:id</attr> and <attr>filename</attr> still belong on the program itself.</p>

        <p>It also has <attr>extra-compiler-args</attr>. These will be added to any default compiler args for the book. In this case, the <c>-c</c> indicates that we only want to compile this file when it is <q>Run</q> and not try to link it or actually run it.</p>

        <exercise label="addcpp-v1">
            <statement>
                <p>You can leave this code as is or modify it. When you click <q>Run</q>, the code will be compiled. However, it will not be run as this is not a standalone program. To run it, use the full program below.</p>
            </statement>
            <program filename="add.cpp" xml:id="addcpp-v1" extra-compiler-args="-c" interactive="activecode" language="cpp" include-source="yes">
                int add(int a, int b) {
                    return a + b;
                }
            </program>
        </exercise>

        <p>Finally, the core program. <attr>add-files</attr> is used to specify (by xml:id) the files that need to be added to the program directory. <attr>compile-also</attr> specifies files that must be compiled with this source file (they will be assumed to be also part of <attr>add-files</attr>). Notice that when using <attr>add-files</attr> to reference code we want to include, we use the xml:id of the target program - it has the contents we want to include. When making a textual reference with an <tag>xref</tag> we can't link to the program, as it lacks the contextual information required to create a valid reference. Instead, we should link to a listing (or some other container) that surrounds the code, like this: <xref ref="addh-v1-listing"/> or <xref ref="addh-v1-listing" text="title"/></p>

        <program label="multiple-file-program" interactive="activecode" add-files="addh-v1" compile-also="addcpp-v1" include-source="yes" language="cpp">
            <![CDATA[
            #include "add.h"
            #include <iostream>
            using namespace std;
            int main() {
                int a = 1;
                int b = 2;
                cout << "The sum of " << a << " and " << b << " is " << add(a, b) << endl;
            }]]>
        </program>

        <p>Note that there is a cross page test of <attr>add-files</attr> located in <xref ref="runestone-hodgepodge"/></p>

        <p>A nonsense paragraph just to check on spacing.  A nonsense paragraph just to check on spacing.  A nonsense paragraph just to check on spacing.  A nonsense paragraph just to check on spacing.</p>
    </section>

    <section xml:id="code-lens">
        <title>Code Lens</title>

        <p>CodeLens is an interactive tool for following program execution, much like a debugger, without the ability to influence flow control or variable values.  For use without a server, traces must be computed beforehand.  First, we have some trivial programs, to provide minimal testing.</p>

        <listing xml:id="program-codelens-python">
            <title>A Python program, stepable with CodeLens</title>
            <program label="python-hello-world-code-lens" interactive="codelens" language="python">
                <code>
                print('Hello, World!')
                </code>
            </program>
        </listing>

        <listing xml:id="program-codelens-c">
            <title>An C program, stepable with CodeLens</title>
            <program label="c-hello-world-code-lens" interactive="codelens" language="c">
                <code>
                #include &lt;stdio.h&gt;

                int main(void)
                {
                    puts("Hello, World!");
                }
                </code>
            </program>
        </listing>

        <listing xml:id="program-codelens-java">
            <title>A Java program, stepable with CodeLens</title>
            <program label="java-hello-world-code-lens" interactive="codelens" language="java">
                <code>
                public class HelloWorld {
                    public static void main(String[] args) {
                        System.out.println("Hello, World!");
                    }
                }
                </code>
            </program>
        </listing>

        <p>Codelens interactives can be given one or more checkpoints where the user is asked a question as the code is executed:</p>

        <listing xml:id="program-codelens-python-questions">
            <title>A Python program, stepable with CodeLens, with questions</title>
            <program label="python-code-lens-questions" interactive="codelens" language="python" include-source="yes">
                <code>
                def foo(n):
                    n = n + 1
                    return n
                x = 7
                y = x // 3
                z = foo(y)
                </code>
                <checkpoint line="4" answer="x">
                    <prompt>What variable is being assigned to?</prompt>
                </checkpoint>
                <checkpoint line="5" answer-variable="globals.y">
                    <prompt>What value will be assigned to <c>y</c>?</prompt>
                    <feedback><c>//</c> does integer division</feedback>
                </checkpoint>
                <checkpoint line="3" answer-variable="current_frame.n">
                    <prompt>What value will be returned?</prompt>
                    <feedback>What is <c>n</c> right now?</feedback>
                </checkpoint>
            </program>
        </listing>

        <p>If a Codelens contains checkpoints, it is also possible to make it into an exercise. For use on Runestone, there should be an <attr>label</attr> on the exercise:</p>

        <exercise label="program-codelens-cpp-questions">
            <title>A C++ program as CodeLens exercise</title>
            <statement>Run the codelens and answer the questions it asks.</statement>
            <program interactive="codelens" language="cpp" include-source="yes">
                <code><![CDATA[
                  int foo() {
                      int x = 2;
                      int y = ++x;
                      return y;
                  }
                  int main() {
                      int x = foo();
                      while (x < 20) {
                        x *= 2;
                      }
                  }
                  ]]>
                </code>
                <checkpoint line="3" answer="3">
                    <prompt>What value will be assigned to <c>y</c>?</prompt>
                    <feedback><c>++</c> has precedence over <c>=</c></feedback>
                </checkpoint>
                <checkpoint line="9" answer-variable="current_frame.x">
                    <prompt>What value will be assigned to <c>x</c>?</prompt>
                    <feedback>We are doubling it</feedback>
                </checkpoint>
            </program>
        </exercise>

        <p>Now some moderately more complicated programs to find the prime numbers less than <m>20</m>.  We do not vouch for the quality of these, or even their correctness!</p>

        <listing xml:id="sieve-python">
            <title><url href="https://www.tutorialspoint.com/python-program-for-sieve-of-eratosthenes" visual="www.tutorialspoint.com/python-program-for-sieve-of-eratosthenes">Sieve of Eratosthenes</url>, Java</title>
            <program label="sieve-codelens-python" interactive="codelens" language="python" starting-step="73" include-source="yes">
                <code><![CDATA[
                def SieveOfEratosthenes(n):
                   # array of type boolean with True values in it
                   prime = [True for i in range(n + 1)]
                   p = 2
                   while (p * p <= n):
                      # If it remain unchanged it is prime
                      if (prime[p] == True):
                         # updating all the multiples
                         for i in range(p * 2, n + 1, p):
                            prime[i] = False
                      p += 1
                   prime[0]= False
                   prime[1]= False
                   # Print
                   for p in range(n + 1):
                      if prime[p]:
                         print (p,end=" ")
                # main
                if __name__=='__main__':
                   n = 20
                   print ("The prime numbers smaller than or equal to", n,"is")
                   SieveOfEratosthenes(n)
                ]]>
                </code>
            </program>
        </listing>

        <listing xml:id="sieve-cpp">
            <title><url href="https://www.tutorialspoint.com/cplusplus-program-to-implement-sieve-of-eratosthenes-to-generate-prime-numbers-between-given-range" visual="www.tutorialspoint.com/cplusplus-program-to-implement-sieve-of-eratosthenes-to-generate-prime-numbers-between-given-range">Sieve of Eratosthenes</url>, C++</title>
            <program label="sieve-codelens-cpp" interactive="codelens" language="cpp">
                <code> <![CDATA[
                #include <stdio.h>
                const int len = 20;
                int main() {
                   int arr[20] = {0};
                   for (int i = 2; i < len; i++) {
                      for (int j = i * i; j < len; j+=i) {
                         arr[j - 1] = 1;
                      }
                   }
                   for (int i = 1; i < len; i++) {
                      if (arr[i - 1] == 0)
                        printf(" %d", i);
                   }
                }
                ]]>
                </code>
            </program>
        </listing>

        <listing xml:id="sieve-java">
            <title><url href="https://www.tutorialspoint.com/Sieve-of-Eratosthenes-in-java" visual="www.tutorialspoint.com/Sieve-of-Eratosthenes-in-java">Sieve of Eratosthenes</url>, Java</title>
            <program label="sieve-codelens-java" interactive="codelens" language="java">
                <code><![CDATA[
                public class SievePrimeFactors  {
                   public static void main(String args[]) {
                      int num = 20;
                      boolean[] bool = new boolean[num];

                      for (int i = 0; i< bool.length; i++) {
                         bool[i] = true;
                      }
                      for (int i = 2; i < Math.sqrt(num); i++) {
                         if(bool[i] == true) {
                            for(int j = (i*i); j < num; j = j+i) {
                               bool[j] = false;
                            }
                         }
                      }
                      System.out.println("List of prime numbers: ");
                      for (int i = 2; i< bool.length; i++) {
                         if(bool[i]==true) {
                            System.out.println(i);
                         }
                      }
                   }
                }
                ]]>
                </code>
            </program>
        </listing>
    </section>

    <section xml:id="coding-exercises">
        <title>Coding Exercises</title>

        <p>Program listings can be more that just live demonstrations, they can be exercises.  The first two also occur in the sample article where they just get a static rendering, if at all.</p>

        <exercise label="coding-exercise-blank" include-source="yes">
            <title>Inline Coding Exercise, No Help</title>

            <statement>
                <p>An exercise might ask a reader to write a computer program, that would go here in the <tag>statement</tag>.  But you can also add a <tag>program</tag> element after a <tag>statement</tag>.  Here we place no code at all, but we do say we want it to be interactive.  The purpose is to make it a live coding environment for a version of your output that allows the reader to perhaps submit a solution.  The <tag>program</tag> element is necessary so you can specify a programming language.</p>

                <p>In interactive formats, try creating and running a Python program below.  Use CodeLens to step through the program.</p>
            </statement>
            <program interactive="activecode" language="python"/>
            <hint><p>We didn't really ask you to do anything.</p></hint>
        </exercise>

        <exercise label="coding-exercise-partial-one" include-source="yes">
            <title>Inline Coding Exercise, Partial</title>

            <statement>
                <p>Similar to above, but we provide a starting point for the exercise.</p>
            </statement>
            <program interactive="activecode" language="c">
                <code>
                #include &lt;stdio.h&gt;

                int main(void)
                </code>
            </program>
            <answer>
                <p>We're not really sure.  But it would begin as follows:</p>
                <program language="c">
                    <code>
                    #include &lt;stdio.h&gt;

                    int main(void)
                    </code>
                </program>
            </answer>
        </exercise>

        <activity xml:id="coding-exercise-partial-two" include-source="yes">
            <title>Activity Coding Exercise</title>

            <statement>
                <p>Similar to above, but now as a complete Python program inside an <tag>activity</tag>.  This demonstrates the possibility to use any <q>project-like</q> block (<tag>project</tag>, <tag>activity</tag>, <tag>exploration</tag>, <tag>investigation</tag>), but not in the case when structured with <tag>task</tag>.  (There is an empty <tag>tests</tag> element here, designed to test relief for an error this will cause on a Runestone server.)</p>
            </statement>
            <program label="activity-program" interactive="activecode" language="python">
                <code>
                for i in range(10):
                    print(i)
                </code>
                <tests>

                </tests>
            </program>
            <answer><p>We're still not really sure.</p></answer>
        </activity>

        <exercise include-source="yes">
            <title>An Exercise with a Static Program</title>

            <statement>
                <p>Similar to above, again, but we place the <tag>program</tag> element <em>inside</em> the <tag>statement</tag>, not after it as a peer.  This signals that this is not a coding exercise and the program will render static, since it is explicitly labeled as not being interactive.</p>
                <program xml:id="coding-exercise-static" language="c" interactive="no">
                    <code>
                    #include &lt;stdio.h&gt;

                    int main(void)
                    </code>
                </program>
            </statement>
            <solution><p>We're not really sure. Still.</p></solution>
        </exercise>

        <p>Unit testing can be used to automatically evaluate student work. Unit testing frameworks are available for Python, Java, and C++</p>

        <xi:include href="./rune-examples/activecode-unittest.xml"/>

        <exercise xml:id="unit-test-example-java" label="coding-exercise-java-unit-test" include-source="yes">
            <title>Java Exercise, with Unit Tests</title>
            <statement>
                <p>Unit tests for Java can be written using junit.</p>
            </statement>
            <program interactive="activecode" language="java">
                <code>
                    public class Test1
                    {
                        public static void main(String[] args)
                        {
                            boolean isRaining = true;
                            if (isRaining)
                            {
                                System.out.println("Take an umbrella!");
                            }
                            System.out.println("Drive carefully");
                        }
                    }
                </code>
                <tests>
                    import static org.junit.Assert.*;
                    import org.junit.*;
                    import java.io.*;

                    public class RunestoneTests extends CodeTestHelper
                    {
                        @Test
                        public void testMain() throws IOException
                        {
                            String output = getMethodOutput("main");
                            String expect = "Take an umbrella! \nDrive carefully";
                            boolean passed = getResults(expect, output, "Expected output from main");
                            assertTrue(passed);
                        }
                    }
                </tests>
            </program>
        </exercise>

        <exercise xml:id="unit-test-example-cpp" label="coding-exercise-cpp-unit-test" include-source="yes">
            <title>C++ Exercise, with Unit Tests</title>
            <statement>
                <p>Unit tests for C++ can be written using doctest or catch. Doctest based tests build substantially faster than catch based ones.</p>
                <p>In an interactive environment, the tests in this exercise will be made visible, but uneditable, so that in the event of a failed test the student can see exactly what is being tested (Doctest does not report on individual passed tests and the feedback on failed tests generally won't make sense without the test itself).</p>
            </statement>
            <program interactive="activecode" language="cpp">
                <code>
                // Complete the function to return the sum of two numbers
                int add(int a, int b) {

                }
                </code>
                <tests visible="yes">
<![CDATA[

//There should be two visible empty lines above this line
#define DOCTEST_CONFIG_IMPLEMENT_WITH_MAIN
#include "doctest.h"

TEST_CASE( "Test the add function" ) {
    REQUIRE( add(2, 3) == 5 );
    REQUIRE( add(6, 1) == 7 );
    REQUIRE( add(-5, 5) == 0 );
}
]]>
                </tests>
            </program>
        </exercise>

        <p>For simple programs, or languages without an available unit testing framework, input-output testing can be done instead. IO testing can only be done on languages that are run on a Runestone server (Java/C/C++/Octave/Python3).</p>

        <exercise xml:id="io-test-example-cpp" label="coding-exercise-cpp-io-tests" include-source="yes">
            <title>C++ Exercise, with IO Tests</title>
            <statement>
                <p>Read in an integer <c>n</c>. Print out a n by n square of asterisks.</p>
            </statement>
            <program interactive="activecode" language="cpp">
                <code><![CDATA[
                #include <iostream>
                using namespace std;
                int main() {
                    int n;
                    cin >> n;
                    for (int i = 0; i < n; i++) {
                        for (int j = 0; j < n; j++) {
                            cout << "*";
                        }
                        cout << endl;
                    }
                } ]]>
                </code>
                <tests>
                    <iotest>
                        <input>1</input>
                        <output>
                            *
                        </output>
                    </iotest>
                    <iotest>
                        <input>3</input>
                        <output>
                            ***
                            ***
                            ***
                        </output>
                    </iotest>
                    <iotest>
                        <input>5</input>
                        <output>
                            *****
                            *****
                            *****
                            *****
                            *****
                        </output>
                    </iotest>
                </tests>
            </program>
        </exercise>
    </section>

    <section xml:id="data-files">
        <title>Data Files</title>

        <p>In the following file of climate data, the first column is Year, second column is Global Average Temperature (Celcius), and the third column is Global Emmisions C02 (Giga-tons).  [Normally you might place this inside a block with the <tag>datafile</tag>.]</p>

        <!-- # Section 11.4 Think Like a Computer Scientist, Runestone 2023-01-23 -->
        <datafile label="file-global-climate-one" xml:id="file-global-climate-one" filename="ccdata1.txt" rows="18" cols="40" editable="yes" include-source="yes">
            <pre>
            1850    -0.37     2.24E-7
            1860    -0.34     3.94E-7
            1870    -0.28     6.6E-7
            1880    -0.24     1.1
            1890    -0.42     1.72
            1900    -0.2      2.38
            1910    -0.49     3.34
            1920    -0.25     4.01
            1930    -0.14     4.53
            1940     0.01     5.5
            1950    -0.17     6.63
            1960    -0.05     10.5
            1970    -0.03     16
            1980     0.09     20.3
            1990     0.3      22.6
            2000     0.29     24.9
            2010     0.56     32.7
            2019     0.74     33.3
            </pre>
        </datafile>

        <p>Browser based programs are automatically given access to data files by their filename.</p>

        <program label="python-average-climate" xml:id="python-average-climate" interactive='activecode' language="python" include-source="yes">
            <code>
            ccfile = open("ccdata1.txt", "r")

            for aline in ccfile:
                values = aline.split()
                print('In', values[0], 'the average temp. was', values[1], 'Â°C and CO2 emmisions were', values[2], 'gigatons.')

            ccfile.close()
            </code>
        </program>

        <!-- # Fundamentals of Python Programming, Stack Overflow Developer Survey, Runestone 2023-02-01 -->
        <data>
            <title>Stack Overflow Developer Survey</title>

            <p>[A data file can go lots of places.  But to make it more prominent, and easy to cross-reference, it would be natural to put it into a <tag>data</tag> block.]</p>

            <p>Now that you are experienced with working with files lets look at a bit of the data set. The survey had 98,855 respondents. We will work with a sample of 2000 of those responses for this lab. In addition we have narrowed down the questions from 129 to just 13.  The columns we have included in this data set are:<ol>
                <li>Respondent</li>
                <li>Country</li>
                <li>JobSatisfaction</li>
                <li>UndergradMajor</li>
                <li>ConvertedSalary</li>
                <li>Exercise</li>
                <li>Gender</li>
                <li>RaceEthnicity</li>
                <li>EducationParents</li>
                <li>HoursOutside</li>
                <li>Age</li>
                <li>LastNewJob</li>
                <li>LanguageWorkedWith</li>
            </ol></p>

            <datafile label="stack-overflow-survey" filename="so_survey.csv" rows="10" cols="65" editable="no" include-source="yes">
                <pre source="datafiles/stackoverflow.csv"/>
            </datafile>
        </data>

        <!-- 400px wide, so 400/600 = 66% -->
        <datafile label="luther-bell" filename="luther-bell.jpg" include-source="yes">
            <image source="datafiles/LutherBellPic.jpg" width="66%"/>
        </datafile>

        <program label="python-one-pixel" interactive='activecode' language="python" include-source="yes">
            <code>
            import image
            img = image.Image("luther-bell.jpg")

            print(img.getWidth())
            print(img.getHeight())

            p = img.getPixel(45, 55)
            print(p.getRed(), p.getGreen(), p.getBlue())
            </code>
        </program>

        <computation>
            <title>Golden Gate Bridge Image processing</title>

            <p>This image has a Creative Commons license, but we've lost track of the exact terms.</p>

            <p>[Now a data file and a program to process it, all bundled up inside a <tag>computation</tag>, since an <tag>example</tag> gets knowled and the ActiveCode does not fill.]</p>

            <!-- 300px wide so 300/600 = 50% -->
            <datafile label="golden-gate" filename="golden_gate.png" include-source="yes">
                <image source="datafiles/golden-gate-bridge.png" width="50%"/>
            </datafile>

            <p>This program changes every pixel of the image.</p>

            <program label="python-change-pixels" interactive='activecode' language="python" include-source="yes">
                <code>
                import image

                img = image.Image("golden_gate.png")
                win = image.ImageWin(img.getWidth(), img.getHeight())
                img.draw(win)

                # img.setDelay(delay, number of pixels between delay)
                # setDelay(1, 400) will speed up a lot
                img.setDelay(1,15)

                for row in range(img.getHeight()):
                    for col in range(img.getWidth()):
                        p = img.getPixel(col, row)

                        newred = p.red * 1.4
                        newgreen =  p.green * .75
                        newblue =  p.blue * 1.1

                        newpixel = image.Pixel(newred, newgreen, newblue)

                        img.setPixel(col, row, newpixel)

                img.draw(win)
                win.exitonclick()
                </code>
            </program>
        </computation>

        <p>The examples above all use Python, which will run in your browser.   Other languages will only run when a project is hosted on Runestone Academy servers.  And in this case there is a small twist.  You need to indicate which existing <tag>datafile</tag> your program needs, even if that seems obvious by reading the code.  To do this, make sure each datafile has an <attr>xml:id</attr> and then use the <attr>add-files</attr> attribute on <tag>program</tag> to specify a list of xml:id's that you want to be available.  These datafiles will be written to the program's working directory using the filename specified by the <attr>filename</attr> attribute of the <tag>datafile</tag> element, and are the names you use in your program's code.  As before, no path information is needed, nor allowed.</p>

        <p>When the <attr>language</attr> attribute of a <tag>program</tag> is set to <c>python3</c> that means in-browser Python is not good enough, and you want the greater power and flexibility of having your code run on a Runestone Academy server.  So this is our first example of using the <attr>datafile</attr> attribute.</p>

        <p>The data file is an abbreviated version of the example above, just to be different.  And is not editable.</p>

        <datafile label="file-global-climate-two" xml:id="file-global-climate-two" filename="ccdata2.txt" rows="4" cols="40" editable="no" include-source="yes">
            <pre>
            1900    -0.2      2.38
            1910    -0.49     3.34
            1920    -0.25     4.01
            1930    -0.14     4.53
            1940     0.01     5.5
            1950    -0.17     6.63
            1960    -0.05     10.5
            1970    -0.03     16
            1980     0.09     20.3
            1990     0.3      22.6
            2000     0.29     24.9
            2010     0.56     32.7
            2019     0.74     33.3
            </pre>
        </datafile>

        <p>The program is identical to the above, but we specify <c>python3</c> as the language, and use the smaller file.  So this example is only active when this content is hosted on a Runestone Academy server.</p>

        <program label="python-average-climate-two" interactive='activecode' language="python3" add-files="file-global-climate-two" include-source="yes">
            <code>
            ccfile = open("ccdata2.txt", "r")

            for aline in ccfile:
                values = aline.split()
                print('In', values[0], 'the average temp. was', values[1], 'Â°C and CO2 emmisions were', values[2], 'gigatons.')

            ccfile.close()
            </code>
        </program>

        <p>[2023-02-24 Testing Java with multiple data files]</p>

        <data>
            <title>Flowers</title>

            <p>Two flower images as <tag>datafile</tag> for use in upcoming Java program.</p>

            <!-- Images are 100 x 100.  So width are 100/600 = 17% -->

            <datafile label="flower1-datafile" xml:id="flower1-datafile" filename="flower1.jpg" include-source="yes">
                <image source="datafiles/flower-one.jpeg" width="17%"/>
            </datafile>

            <datafile label="flower2-datafile" xml:id="flower2-datafile" filename="flower2.jpg" include-source="yes">
                <image source="datafiles/flower-two.jpeg" width="17%"/>
            </datafile>
        </data>

        <program label="java-flower-collage" interactive='activecode' language="java" add-files="file-picture-classes-jar, flower1-datafile, flower2-datafile" include-source="yes">
            <!-- About 10 XML characters, hence CDATA -->
            <code><![CDATA[
            import java.awt.*;
            import java.awt.font.*;
            import java.awt.geom.*;
            import java.awt.image.BufferedImage;
            import java.text.*;
            import java.util.*;
            import java.util.List;

            /**
             * A class that represents a picture.  This class inherits from
             * SimplePicture and allows the student to add functionality to
             * the Picture class.
             *
             * @author Barbara Ericson ericson@cc.gatech.edu
             */
            public class Picture extends SimplePicture
            {
              ///////////////////// constructors //////////////////////////////////

              /**
               * Constructor that takes no arguments
               */
              public Picture ()
              {
                /* not needed but use it to show students the implicit call to super()
                 * child constructors always call a parent constructor
                 */
                super();
              }

              /**
               * Constructor that takes a file name and creates the picture
               * @param fileName the name of the file to create the picture from
               */
              public Picture(String fileName)
              {
                // let the parent class handle this fileName
                super(fileName);
              }

              /**
               * Constructor that takes the height and width
               * @param height the height of the desired picture
               * @param width the width of the desired picture
               */
              public Picture(int width, int height)
              {
                // let the parent class handle this width and height
                super(width,height);
              }

              /**
               * Constructor that takes a picture and creates a
               * copy of that picture
               * @param copyPicture the picture to copy
               */
              public Picture(Picture copyPicture)
              {
                // let the parent class do the copy
                super(copyPicture);
              }

              /**
               * Constructor that takes a buffered image
               * @param image the buffered image to use
               */
              public Picture(BufferedImage image)
              {
                super(image);
              }
              ////////////////////// methods ///////////////////////////////////////

              /**
               * Method to return a string with information about this picture.
               * @return a string with information about the picture such as fileName,
               * height and width.
               */
              public String toString()
              {
                String output = "Picture, filename " + getFileName() +
                  " height " + getHeight()
                  + " width " + getWidth();
                return output;
              }

              /**
                zeroBlue() method sets the blue values at all pixels to zero
             */
              public void zeroBlue()
              {
                Pixel[][] pixels = this.getPixels2D();

                for (Pixel[] rowArray : pixels)
                 {
                   for (Pixel p: rowArray)
                   {
                          p.setBlue(0);
                   }
                }
              }

              /* mirrorVertical() */
              public void mirrorVertical()
              {
                   Pixel[][] pixels = this.getPixels2D();
                   Pixel leftPixel = null;
                   Pixel rightPixel = null;
                   int width = pixels[0].length;
                   for (int row = 0; row < pixels.length; row++)
                   {
                        for (int col = 0; col < width / 2; col++)
                        {
                             leftPixel = pixels[row][col];
                             rightPixel = pixels[row][width - 1 - col];
                             rightPixel.setColor(leftPixel.getColor());
                        }
                   }
              }

               /** copy from the passed fromPic to the
                 * specified startRow and startCol in the
                 * current picture
                 * @param fromPic the picture to copy from
                 * @param startRow the start row to copy to
                 * @param startCol the start col to copy to
                 */
               public void copy(Picture fromPic,
                              int startRow, int startCol)
               {
                 Pixel fromPixel = null;
                 Pixel toPixel = null;
                 Pixel[][] toPixels = this.getPixels2D();
                 Pixel[][] fromPixels = fromPic.getPixels2D();
                 for (int fromRow = 0, toRow = startRow;
                      fromRow < fromPixels.length &&
                      toRow < toPixels.length;
                      fromRow++, toRow++)
                 {
                   for (int fromCol = 0, toCol = startCol;
                        fromCol < fromPixels[0].length &&
                        toCol < toPixels[0].length;
                        fromCol++, toCol++)
                   {
                     fromPixel = fromPixels[fromRow][fromCol];
                     toPixel = toPixels[toRow][toCol];
                     toPixel.setColor(fromPixel.getColor());
                   }
                 }
               }

              public void createCollage()
              {
                   // You can also try butterfly.jpg and snowflake.jpg
                   Picture flower1 = new Picture("flower1.jpg");
                   Picture flower2 = new Picture("flower2.jpg");
                   this.copy(flower1,0,0);
                   this.copy(flower2,100,0);
                   this.copy(flower1,200,0);
                   Picture flowerNoBlue = new Picture(flower2);
                   flowerNoBlue.zeroBlue();
                   this.copy(flowerNoBlue,300,0);
                   this.copy(flower1,400,0);
                   this.copy(flower2,500,0);
                   this.mirrorVertical();
                   this.show();
              }

              /* Main method for testing
               */
              public static void main(String[] args)
              {
                 Picture p = new Picture(500,500);
                 p.createCollage();
              }
            }
            ]]>
            </code>
        </program>

        <!-- Multi-file, Java -->
        <!-- https://runestone.academy/ns/books/published/csawesome/Unit8-2DArray/pictureLabA8.html -->

        <p>The following is experimental, as of 2023-07-05, and needs some organization, plus some credit to CSAwesome and Barb Ericson.</p>

        <!-- https://runestone.academy/ns/books/published/csawesome/Unit8-2DArray/pictureLabA5.html -->
        <!-- https://github.com/bhoffman0/CSAwesome/blob/master/_sources/Unit8-2DArray/pictureLabA5.rst -->

        <datafile label="beach-datafile" xml:id="beach-datafile" filename="beach.jpg" include-source="yes">
            <image source="datafiles/beach.jpg" width="17%"/>
        </datafile>

        <datafile label="file-picture-classes-jar" xml:id="file-picture-classes-jar" filename="pictureClasses1.jar" editable="no" hide="yes" include-source="yes">
            <pre>
            <![CDATA[
            import java.awt.Image;
            import java.awt.image.BufferedImage;

            /**
             * Interface to describe a digital picture.  A digital picture can have an
             * associated file name.  It can have a title.  It has pixels
             * associated with it and you can get and set the pixels.  You
             * can get an Image from a picture or a BufferedImage.  You can load
             * it from a file name or image.  You can show a picture.  You can
             * explore a picture.  You can create a new image for it.
             *
             * @author Barb Ericson ericson@cc.gatech.edu
             */
            public interface DigitalPicture
            {
              public String getFileName(); // get the file name that the picture came from
              public String getTitle(); // get the title of the picture
              public void setTitle(String title); // set the title of the picture
              public int getWidth(); // get the width of the picture in pixels
              public int getHeight(); // get the height of the picture in pixels
              public Image getImage(); // get the image from the picture
              public BufferedImage getBufferedImage(); // get the buffered image
              public int getBasicPixel(int x, int y); // get the pixel information as an int
              public void setBasicPixel(int x, int y, int rgb); // set the pixel information
              public Pixel getPixel(int x, int y); // get the pixel information as an object
              public Pixel[] getPixels(); // get all pixels in row-major order
              public Pixel[][] getPixels2D(); // get 2-D array of pixels in row-major order
              public void load(Image image); // load the image into the picture
              public boolean load(String fileName); // load the picture from a file
              public void show(); // show the picture
              public boolean write(String fileName); // write out a file
            }

            import java.awt.Color;

            /**
             * Class that references a pixel in a picture. Pixel
             * stands for picture element where picture is
             * abbreviated pix.  A pixel has a column (x) and
             * row (y) location in a picture.  A pixel knows how
             * to get and set the red, green, blue, and alpha
             * values in the picture.  A pixel also knows how to get
             * and set the color using a Color object.
             *
             * @author Barb Ericson ericson@cc.gatech.edu
             */
            public class Pixel
            {

              ////////////////////////// fields ///////////////////////////////////

              /** the digital picture this pixel belongs to */
              private DigitalPicture picture;

              /** the x (column) location of this pixel in the picture; (0,0) is top left */
              private int x;

              /** the y (row) location of this pixel in the picture; (0,0) is top left */
              private int y;

              ////////////////////// constructors /////////////////////////////////

              /**
               * A constructor that takes the x and y location for the pixel and
               * the picture the pixel is coming from
               * @param picture the picture that the pixel is in
               * @param x the x location of the pixel in the picture
               * @param y the y location of the pixel in the picture
               */
              public Pixel(DigitalPicture picture, int x, int y)
              {
                // set the picture
                this.picture = picture;

                // set the x location
                this.x = x;

                // set the y location
                this.y = y;

              }

              ///////////////////////// methods //////////////////////////////

              /**
               * Method to get the x location of this pixel.
               * @return the x location of the pixel in the picture
               */
              public int getX() { return x; }

              /**
               * Method to get the y location of this pixel.
               * @return the y location of the pixel in the picture
               */
              public int getY() { return y; }

              /**
               * Method to get the row (y value)
               * @return the row (y value) of the pixel in the picture
               */
              public int getRow() { return y; }

              /**
               * Method to get the column (x value)
               * @return the column (x value) of the pixel
               */
              public int getCol() { return x; }

              /**
               * Method to get the amount of alpha (transparency) at this pixel.
               * It will be from 0-255.
               * @return the amount of alpha (transparency)
               */
              public int getAlpha() {

                /* get the value at the location from the picture as a 32 bit int
                 * with alpha, red, green, blue each taking 8 bits from left to right
                 */
                int value = picture.getBasicPixel(x,y);

                // get the alpha value (starts at 25 so shift right 24)
                // then and it with all 1's for the first 8 bits to keep
                // end up with from 0 to 255
                int alpha = (value >> 24) & 0xff;

                return alpha;
              }

              /**
               * Method to get the amount of red at this pixel.  It will be
               * from 0-255 with 0 being no red and 255 being as much red as
               * you can have.
               * @return the amount of red from 0 for none to 255 for max
               */
              public int getRed() {

                /* get the value at the location from the picture as a 32 bit int
                 * with alpha, red, green, blue each taking 8 bits from left to right
                 */
                int value = picture.getBasicPixel(x,y);

                // get the red value (starts at 17 so shift right 16)
                // then AND it with all 1's for the first 8 bits to
                // end up with a resulting value from 0 to 255
                int red = (value >> 16) & 0xff;

                return red;
              }

              /**
               * Method to get the red value from a pixel represented as an int
               * @param value the color value as an int
               * @return the amount of red
               */
              public static int getRed(int value)
              {
                int red = (value >> 16) & 0xff;
                return red;
              }

              /**
               * Method to get the amount of green at this pixel.  It will be
               * from 0-255 with 0 being no green and 255 being as much green as
               * you can have.
               * @return the amount of green from 0 for none to 255 for max
               */
              public int getGreen() {

                /* get the value at the location from the picture as a 32 bit int
                 * with alpha, red, green, blue each taking 8 bits from left to right
                 */
                int value = picture.getBasicPixel(x,y);

                // get the green value (starts at 9 so shift right 8)
                int green = (value >>  8) & 0xff;

                return green;
              }

              /**
               * Method to get the green value from a pixel represented as an int
               * @param value the color value as an int
               * @return the amount of green
               */
              public static int getGreen(int value)
              {
                int green = (value >> 8) & 0xff;
                return green;
              }

              /**
               * Method to get the amount of blue at this pixel.  It will be
               * from 0-255 with 0 being no blue and 255 being as much blue as
               * you can have.
               * @return the amount of blue from 0 for none to 255 for max
               */
              public int getBlue() {

                /* get the value at the location from the picture as a 32 bit int
                 * with alpha, red, green, blue each taking 8 bits from left to right
                 */
                int value = picture.getBasicPixel(x,y);

                // get the blue value (starts at 0 so no shift required)
                int blue = value & 0xff;

                return blue;
              }

              /**
               * Method to get the blue value from a pixel represented as an int
               * @param value the color value as an int
               * @return the amount of blue
               */
              public static int getBlue(int value)
              {
                int blue = value & 0xff;
                return blue;
              }

              /**
               * Method to get a color object that represents the color at this pixel.
               * @return a color object that represents the pixel color
               */
              public Color getColor()
              {
                 /* get the value at the location from the picture as a 32 bit int
                 * with alpha, red, green, blue each taking 8 bits from left to right
                 */
                int value = picture.getBasicPixel(x,y);

                // get the red value (starts at 17 so shift right 16)
                // then AND it with all 1's for the first 8 bits to
                // end up with a resulting value from 0 to 255
                int red = (value >> 16) & 0xff;

                // get the green value (starts at 9 so shift right 8)
                int green = (value >>  8) & 0xff;

                // get the blue value (starts at 0 so no shift required)
                int blue = value & 0xff;

                return new Color(red,green,blue);
              }

              /**
               * Method to set the pixel color to the passed in color object.
               * @param newColor the new color to use
               */
              public void setColor(Color newColor)
              {
                // set the red, green, and blue values
                int red = newColor.getRed();
                int green = newColor.getGreen();
                int blue = newColor.getBlue();

                // update the associated picture
                updatePicture(this.getAlpha(),red,green,blue);
              }

              /**
               * Method to update the picture based on the passed color
               * values for this pixel
               * @param alpha the alpha (transparency) at this pixel
               * @param red the red value for the color at this pixel
               * @param green the green value for the color at this pixel
               * @param blue the blue value for the color at this pixel
               */
              public void updatePicture(int alpha, int red, int green, int blue)
              {
                // create a 32 bit int with alpha, red, green blue from left to right
                int value = (alpha << 24) + (red << 16) + (green << 8) + blue;

                // update the picture with the int value
                picture.setBasicPixel(x,y,value);
              }

              /**
               * Method to correct a color value to be within 0 to 255
               * @param the value to use
               * @return a value within 0 to 255
               */
              private static int correctValue(int value)
              {
                if (value < 0)
                  value = 0;
                if (value > 255)
                  value = 255;
                return value;
              }

              /**
               * Method to set the red to a new red value
               * @param value the new value to use
               */
              public void setRed(int value)
              {
                // set the red value to the corrected value
                int red = correctValue(value);

                // update the pixel value in the picture
                updatePicture(getAlpha(), red, getGreen(), getBlue());
              }

              /**
               * Method to set the green to a new green value
               * @param value the value to use
               */
              public void setGreen(int value)
              {
                // set the green value to the corrected value
                int green = correctValue(value);

                // update the pixel value in the picture
                updatePicture(getAlpha(), getRed(), green, getBlue());
              }

              /**
               * Method to set the blue to a new blue value
               * @param value the new value to use
               */
              public void setBlue(int value)
              {
                // set the blue value to the corrected value
                int blue = correctValue(value);

                // update the pixel value in the picture
                updatePicture(getAlpha(), getRed(), getGreen(), blue);
              }

               /**
               * Method to set the alpha (transparency) to a new alpha value
               * @param value the new value to use
               */
              public void setAlpha(int value)
              {
                // make sure that the alpha is from 0 to 255
                int alpha = correctValue(value);

                // update the associated picture
                updatePicture(alpha, getRed(), getGreen(), getBlue());
              }

              /**
              * Method to get the distance between this pixel's color and the passed color
              * @param testColor the color to compare to
              * @return the distance between this pixel's color and the passed color
              */
             public double colorDistance(Color testColor)
             {
               double redDistance = this.getRed() - testColor.getRed();
               double greenDistance = this.getGreen() - testColor.getGreen();
               double blueDistance = this.getBlue() - testColor.getBlue();
               double distance = Math.sqrt(redDistance * redDistance +
                                           greenDistance * greenDistance +
                                           blueDistance * blueDistance);
               return distance;
             }

             /**
              * Method to compute the color distances between two color objects
              * @param color1 a color object
              * @param color2 a color object
              * @return the distance between the two colors
              */
             public static double colorDistance(Color color1,Color color2)
             {
               double redDistance = color1.getRed() - color2.getRed();
               double greenDistance = color1.getGreen() - color2.getGreen();
               double blueDistance = color1.getBlue() - color2.getBlue();
               double distance = Math.sqrt(redDistance * redDistance +
                                           greenDistance * greenDistance +
                                           blueDistance * blueDistance);
               return distance;
             }

             /**
              * Method to get the average of the colors of this pixel
              * @return the average of the red, green, and blue values
              */
             public double getAverage()
             {
               double average = (getRed() + getGreen() + getBlue()) / 3.0;
               return average;
             }

              /**
               * Method to return a string with information about this pixel
               * @return a string with information about this pixel
               */
              public String toString()
              {
                return "Pixel row=" + getRow() +
                  " col=" + getCol() +
                  " red=" + getRed() +
                  " green=" + getGreen() +
                  " blue=" + getBlue();
              }

            }

            import javax.imageio.ImageIO;
            import java.awt.image.BufferedImage;
            import javax.swing.ImageIcon;
            import java.awt.*;
            import java.io.*;
            import java.awt.geom.*;

            import java.io.ByteArrayOutputStream;
            //import javax.xml.bind.DatatypeConverter;
            import java.util.Base64;

            import java.util.Scanner;

            /**
             * A class that represents a simple picture.  A simple picture may have
             * an associated file name and a title.  A simple picture has pixels,
             * width, and height.  A simple picture uses a BufferedImage to
             * hold the pixels. You can also explore a simple picture.
             *
             * @author Barb Ericson ericson@cc.gatech.edu
             */
            public class SimplePicture implements DigitalPicture
            {

              /////////////////////// Fields /////////////////////////

              /**
               * the file name associated with the simple picture
               */
              private String fileName;

              /**
               * the path name for the file
               */
              private String pathName;

              /**
               * the title of the simple picture
               */
              private String title;

              /**
               * buffered image to hold pixels for the simple picture
               */
              private BufferedImage bufferedImage;

              /**
               * extension for this file (jpg or bmp)
               */
              private String extension;


             /////////////////////// Constructors /////////////////////////

             /**
              * A Constructor that takes no arguments.  It creates a picture with
              * a width of 200 and a height of 100 that is all white.
              * A no-argument constructor must be given in order for a class to
              * be able to be subclassed.  By default all subclasses will implicitly
              * call this in their parent's no-argument constructor unless a
              * different call to super() is explicitly made as the first line
              * of code in a constructor.
              */
             public SimplePicture()
             {this(200,100);}

             /**
              * A Constructor that takes a file name and uses the file to create
              * a picture
              * @param fileName the file name to use in creating the picture
              */
             public SimplePicture(String fileName)
             {

               // load the picture into the buffered image
               load(fileName);

             }

             /**
              * A constructor that takes the width and height desired for a picture and
              * creates a buffered image of that size.  This constructor doesn't
              * show the picture.  The pixels will all be white.
              * @param width the desired width
              * @param height the desired height
              */
             public  SimplePicture(int width, int height)
             {
               bufferedImage = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);
               title = "None";
               fileName = "None";
               extension = "jpg";
               setAllPixelsToAColor(Color.white);
             }

             /**
              * A constructor that takes the width and height desired for a picture and
              * creates a buffered image of that size.  It also takes the
              * color to use for the background of the picture.
              * @param width the desired width
              * @param height the desired height
              * @param theColor the background color for the picture
              */
             public  SimplePicture(int width, int height, Color theColor)
             {
               this(width,height);
               setAllPixelsToAColor(theColor);
             }

             /**
              * A Constructor that takes a picture to copy information from
              * @param copyPicture the picture to copy from
              */
             public SimplePicture(SimplePicture copyPicture)
             {
               if (copyPicture.fileName != null)
               {
                  this.fileName = new String(copyPicture.fileName);
                  this.extension = copyPicture.extension;
               }
               if (copyPicture.title != null)
                  this.title = new String(copyPicture.title);
               if (copyPicture.bufferedImage != null)
               {
                 this.bufferedImage = new BufferedImage(copyPicture.getWidth(),  copyPicture.getHeight(), BufferedImage.TYPE_INT_RGB);
                 this.copyPicture(copyPicture);
               }
             }

             /**
              * A constructor that takes a buffered image
              * @param image the buffered image
              */
             public SimplePicture(BufferedImage image)
             {
               this.bufferedImage = image;
               title = "None";
               fileName = "None";
               extension = "jpg";
             }

             ////////////////////////// Methods //////////////////////////////////

             /**
              * Method to get the extension for this picture
              * @return the extension (jpg, bmp, giff, etc)
              */
             public String getExtension() { return extension; }

             /**
              * Method that will copy all of the passed source picture into
              * the current picture object
              * @param sourcePicture  the picture object to copy
              */
             public void copyPicture(SimplePicture sourcePicture)
             {
               Pixel sourcePixel = null;
               Pixel targetPixel = null;

               // loop through the columns
               for (int sourceX = 0, targetX = 0;
                    sourceX < sourcePicture.getWidth() &&
                    targetX < this.getWidth();
                    sourceX++, targetX++)
               {
                 // loop through the rows
                 for (int sourceY = 0, targetY = 0;
                      sourceY < sourcePicture.getHeight() &&
                      targetY < this.getHeight();
                      sourceY++, targetY++)
                 {
                   sourcePixel = sourcePicture.getPixel(sourceX,sourceY);
                   targetPixel = this.getPixel(targetX,targetY);
                   targetPixel.setColor(sourcePixel.getColor());
                 }
               }

             }

             /**
              * Method to set the color in the picture to the passed color
              * @param color the color to set to
              */
             public void setAllPixelsToAColor(Color color)
             {
               // loop through all x
               for (int x = 0; x < this.getWidth(); x++)
               {
                 // loop through all y
                 for (int y = 0; y < this.getHeight(); y++)
                 {
                   getPixel(x,y).setColor(color);
                 }
               }
             }

             /**
              * Method to get the buffered image
              * @return the buffered image
              */
             public BufferedImage getBufferedImage()
             {
                return bufferedImage;
             }

             /**
              * Method to get a graphics object for this picture to use to draw on
              * @return a graphics object to use for drawing
              */
             public Graphics getGraphics()
             {
               return bufferedImage.getGraphics();
             }

             /**
              * Method to get a Graphics2D object for this picture which can
              * be used to do 2D drawing on the picture
              */
             public Graphics2D createGraphics()
             {
               return bufferedImage.createGraphics();
             }

             /**
              * Method to get the file name associated with the picture
              * @return  the file name associated with the picture
              */
             public String getFileName() { return fileName; }

             /**
              * Method to set the file name
              * @param name the full pathname of the file
              */
             public void setFileName(String name)
             {
               fileName = name;
             }

             /**
              * Method to get the title of the picture
              * @return the title of the picture
              */
             public String getTitle()
             { return title; }

             /**
              * Method to set the title for the picture
              * @param title the title to use for the picture
              */
             public void setTitle(String title)
             {
               this.title = title;
             }

             /**
              * Method to get the width of the picture in pixels
              * @return the width of the picture in pixels
              */
             public int getWidth() { return bufferedImage.getWidth(); }

             /**
              * Method to get the height of the picture in pixels
              * @return  the height of the picture in pixels
              */
             public int getHeight() { return bufferedImage.getHeight(); }

             /**
              * Method to get an image from the picture
              * @return  the buffered image since it is an image
              */
             public Image getImage()
             {
               return bufferedImage;
             }

             /**
              * Method to return the pixel value as an int for the given x and y location
              * @param x the x coordinate of the pixel
              * @param y the y coordinate of the pixel
              * @return the pixel value as an integer (alpha, red, green, blue)
              */
             public int getBasicPixel(int x, int y)
             {
                return bufferedImage.getRGB(x,y);
             }

             /**
              * Method to set the value of a pixel in the picture from an int
              * @param x the x coordinate of the pixel
              * @param y the y coordinate of the pixel
              * @param rgb the new rgb value of the pixel (alpha, red, green, blue)
              */
             public void setBasicPixel(int x, int y, int rgb)
             {
               bufferedImage.setRGB(x,y,rgb);
             }

             /**
              * Method to get a pixel object for the given x and y location
              * @param x  the x location of the pixel in the picture
              * @param y  the y location of the pixel in the picture
              * @return a Pixel object for this location
              */
             public Pixel getPixel(int x, int y)
             {
               // create the pixel object for this picture and the given x and y location
               Pixel pixel = new Pixel(this,x,y);
               return pixel;
             }

             /**
              * Method to get a one-dimensional array of Pixels for this simple picture
              * @return a one-dimensional array of Pixel objects starting with y=0
              * to y=height-1 and x=0 to x=width-1.
              */
             public Pixel[] getPixels()
             {
               int width = getWidth();
               int height = getHeight();
               Pixel[] pixelArray = new Pixel[width * height];

               // loop through height rows from top to bottom
               for (int row = 0; row < height; row++)
                 for (int col = 0; col < width; col++)
                   pixelArray[row * width + col] = new Pixel(this,col,row);

               return pixelArray;
             }

             /**
              * Method to get a two-dimensional array of Pixels for this simple picture
              * @return a two-dimensional array of Pixel objects in row-major order.
              */
             public Pixel[][] getPixels2D()
             {
               int width = getWidth();
               int height = getHeight();
               Pixel[][] pixelArray = new Pixel[height][width];

               // loop through height rows from top to bottom
               for (int row = 0; row < height; row++)
                 for (int col = 0; col < width; col++)
                   pixelArray[row][col] = new Pixel(this,col,row);

               return pixelArray;
             }

             /**
              * Method to load the buffered image with the passed image
              * @param image  the image to use
              */
             public void load(Image image)
             {
               // get a graphics context to use to draw on the buffered image
               Graphics2D graphics2d = bufferedImage.createGraphics();

               // draw the image on the buffered image starting at 0,0
               graphics2d.drawImage(image,0,0,null);

               // show the new image
               show();
             }

             /**
              * Method to show the picture in a picture frame
              */
             public void show()
             {
                 try {
                     ByteArrayOutputStream output = new ByteArrayOutputStream();
                     ImageIO.write(this.bufferedImage, "png", output);
                     String result = Base64.getEncoder().encodeToString(output.toByteArray());
                     //BH: using Base64 instead of DatatypeConverter.printBase64Binary(output.toByteArray());
                     System.out.println("&lt;img src=\'data:image/" + this.extension + ";base64," + result + "\'/>");
                 } catch (IOException e) {
                     System.out.println("Errors occured in image conversion");
                 }
             }

             /**
              * Method to open a picture explorer on a copy (in memory) of this
              * simple picture
              */
             /*
             public void explore()
             {
               // create a copy of the current picture and explore it
               new PictureExplorer(new SimplePicture(this));
             }
             */

             /**
              * Method to load the picture from the passed file name
              * @param fileName the file name to use to load the picture from
              * @throws IOException if the picture isn't found
              */
             public void loadOrFail(String fileName) throws IOException
             {
                // set the current picture's file name
               this.fileName = fileName;

               // set the extension
               int posDot = fileName.lastIndexOf('.');
               if (posDot >= 0)
                 this.extension = fileName.substring(posDot + 1);

                // get file location
                String[] paths = fileName.split("/");
                this.pathName = "";
                if(paths.length != 1) {
                    for(int i = 0; i < paths.length - 1; i++) {
                        this.pathName = this.pathName + paths[i] + "/";
                    }
                }
               // if the current title is null use the file name
               if (title == null)
                 title = fileName;

               File file = new File(this.fileName);


               if (!file.canRead())
               {
                 throw new IOException(this.fileName +
                                     " could not be opened. Check that you specified the path");
               }
               this.bufferedImage = ImageIO.read(file);


             }

             /**
              * Method to read the contents of the picture from a filename
              * without throwing errors
              * @param fileName the name of the file to write the picture to
              * @return true if success else false
              */
             public boolean load(String fileName)
             {
                 try {
                     this.loadOrFail(fileName);
                     return true;

                 } catch (Exception ex) {
                     System.out.println("There was an error trying to open " + fileName);
                     bufferedImage = new BufferedImage(600,200,
                                                       BufferedImage.TYPE_INT_RGB);
                     addMessage("Couldn't load " + fileName,5,100);
                     return false;
                 }

             }

             /**
              * Method to load the picture from the passed file name
              * this just calls load(fileName) and is for name compatibility
              * @param fileName the file name to use to load the picture from
              * @return true if success else false
              */
             public boolean loadImage(String fileName)
             {
                 return load(fileName);
             }

             /**
              * Method to draw a message as a string on the buffered image
              * @param message the message to draw on the buffered image
              * @param xPos  the x coordinate of the leftmost point of the string
              * @param yPos  the y coordinate of the bottom of the string
              */
             public void addMessage(String message, int xPos, int yPos)
             {
               // get a graphics context to use to draw on the buffered image
               Graphics2D graphics2d = bufferedImage.createGraphics();

               // set the color to white
               graphics2d.setPaint(Color.white);

               // set the font to Helvetica bold style and size 16
               graphics2d.setFont(new Font("Helvetica",Font.BOLD,16));

               // draw the message
               graphics2d.drawString(message,xPos,yPos);

             }

             /**
              * Method to draw a string at the given location on the picture
              * @param text the text to draw
              * @param xPos the left x for the text
              * @param yPos the top y for the text
              */
             public void drawString(String text, int xPos, int yPos)
             {
               addMessage(text,xPos,yPos);
             }

             /**
               * Method to create a new picture by scaling the current
               * picture by the given x and y factors
               * @param xFactor the amount to scale in x
               * @param yFactor the amount to scale in y
               * @return the resulting picture
               */
              public Picture scale(double xFactor, double yFactor)
              {
                // set up the scale transform
                AffineTransform scaleTransform = new AffineTransform();
                scaleTransform.scale(xFactor,yFactor);

                // create a new picture object that is the right size
                Picture result = new Picture((int) (getHeight() * yFactor),
                                             (int) (getWidth() * xFactor));

                // get the graphics 2d object to draw on the result
                Graphics graphics = result.getGraphics();
                Graphics2D g2 = (Graphics2D) graphics;

                // draw the current image onto the result image scaled
                g2.drawImage(this.getImage(),scaleTransform,null);

                return result;
              }

              /**
               * Method to create a new picture of the passed width.
               * The aspect ratio of the width and height will stay
               * the same.
               * @param width the desired width
               * @return the resulting picture
               */
              public Picture getPictureWithWidth(int width)
              {
                // set up the scale transform
                double xFactor = (double) width / this.getWidth();
                Picture result = scale(xFactor,xFactor);
                return result;
              }

              /**
               * Method to create a new picture of the passed height.
               * The aspect ratio of the width and height will stay
               * the same.
               * @param height the desired height
               * @return the resulting picture
               */
              public Picture getPictureWithHeight(int height)
              {
                // set up the scale transform
                double yFactor = (double) height / this.getHeight();
                Picture result = scale(yFactor,yFactor);
                return result;
              }

             /**
              * Method to load a picture from a file name and show it in a picture frame
              * @param fileName the file name to load the picture from
              * @return true if success else false
              */
             public boolean loadPictureAndShowIt(String fileName)
             {
               boolean result = true;  // the default is that it worked

               // try to load the picture into the buffered image from the file name
               result = load(fileName);

               // show the picture in a picture frame
               show();

               return result;
             }

             /**
              * Method to write the contents of the picture to a file with
              * the passed name
              * @param fileName the name of the file to write the picture to
              */
             public void writeOrFail(String fileName) throws IOException
             {
               String extension = this.extension; // the default is current

               // create the file object
               File file = new File(this.pathName + fileName);
               //File fileLoc = file.getParentFile(); // directory name

               // if there is no parent directory use the current media dir
               //if (fileLoc == null)
               //{
                 //fileName = FileChooser.getMediaPath(fileName);
                 //file = new File(fileName);
                 //fileLoc = file.getParentFile();
               //}

               // check that you can write to the directory
               //if (!fileLoc.canWrite()) {
                //    throw new IOException(fileName +
                //    " could not be opened. Check to see if you can write to the directory.");
               //}

               // get the extension
               int posDot = fileName.indexOf('.');
               if (posDot >= 0)
                   extension = fileName.substring(posDot + 1);

               // write the contents of the buffered image to the file
               ImageIO.write(bufferedImage, extension, file);

             }

             /**
              * Method to write the contents of the picture to a file with
              * the passed name without throwing errors
              * @param fileName the name of the file to write the picture to
              * @return true if success else false
              */
             public boolean write(String fileName)
             {
                 try {
                     this.writeOrFail(fileName);
                     return true;
                 } catch (Exception ex) {
                     System.out.println("There was an error trying to write " + fileName);
                     ex.printStackTrace();
                     return false;
                 }

             }

              /**
               * Method to get the coordinates of the enclosing rectangle after this
               * transformation is applied to the current picture
               * @return the enclosing rectangle
               */
              public Rectangle2D getTransformEnclosingRect(AffineTransform trans)
              {
                int width = getWidth();
                int height = getHeight();
                double maxX = width - 1;
                double maxY = height - 1;
                double minX, minY;
                Point2D.Double p1 = new Point2D.Double(0,0);
                Point2D.Double p2 = new Point2D.Double(maxX,0);
                Point2D.Double p3 = new Point2D.Double(maxX,maxY);
                Point2D.Double p4 = new Point2D.Double(0,maxY);
                Point2D.Double result = new Point2D.Double(0,0);
                Rectangle2D.Double rect = null;

                // get the new points and min x and y and max x and y
                trans.deltaTransform(p1,result);
                minX = result.getX();
                maxX = result.getX();
                minY = result.getY();
                maxY = result.getY();
                trans.deltaTransform(p2,result);
                minX = Math.min(minX,result.getX());
                maxX = Math.max(maxX,result.getX());
                minY = Math.min(minY,result.getY());
                maxY = Math.max(maxY,result.getY());
                trans.deltaTransform(p3,result);
                minX = Math.min(minX,result.getX());
                maxX = Math.max(maxX,result.getX());
                minY = Math.min(minY,result.getY());
                maxY = Math.max(maxY,result.getY());
                trans.deltaTransform(p4,result);
                minX = Math.min(minX,result.getX());
                maxX = Math.max(maxX,result.getX());
                minY = Math.min(minY,result.getY());
                maxY = Math.max(maxY,result.getY());

                // create the bounding rectangle to return
                rect = new Rectangle2D.Double(minX,minY,maxX - minX + 1, maxY - minY + 1);
                return rect;
              }

              /**
               * Method to get the coordinates of the enclosing rectangle after this
               * transformation is applied to the current picture
               * @return the enclosing rectangle
               */
              public Rectangle2D getTranslationEnclosingRect(AffineTransform trans)
              {
                return getTransformEnclosingRect(trans);
              }

             /**
              * Method to return a string with information about this picture
              * @return a string with information about the picture
              */
             public String toString()
             {
               String output = "Simple Picture, filename " + fileName +
                 " height " + getHeight() + " width " + getWidth();
               return output;
             }

            } // end of SimplePicture class
            ]]>
            </pre>
            <!-- <pre source="datafiles/picture-classes-library.jar"/> -->
        </datafile>

        <program label="java-only-blue" interactive='activecode' language="java" add-files="file-picture-classes-jar, beach-datafile" include-source="yes">
            <code>
                <![CDATA[
                import java.awt.*;
                import java.awt.font.*;
                import java.awt.geom.*;
                import java.awt.image.BufferedImage;
                import java.text.*;
                import java.util.*;
                import java.util.List;

                /**
                 * A class that represents a picture.  This class inherits from
                 * SimplePicture and allows the student to add functionality to
                 * the Picture class.
                 *
                 * @author Barbara Ericson ericson@cc.gatech.edu
                 */
                public class Picture extends SimplePicture
                {
                  ///////////////////// constructors //////////////////////////////////

                  /**
                   * Constructor that takes no arguments
                   */
                  public Picture ()
                  {
                    /* not needed but use it to show students the implicit call to super()
                     * child constructors always call a parent constructor
                     */
                    super();
                  }

                  /**
                   * Constructor that takes a file name and creates the picture
                   * @param fileName the name of the file to create the picture from
                   */
                  public Picture(String fileName)
                  {
                    // let the parent class handle this fileName
                    super(fileName);
                  }

                  /**
                   * Constructor that takes the height and width
                   * @param height the height of the desired picture
                   * @param width the width of the desired picture
                   */
                  public Picture(int height, int width)
                  {
                    // let the parent class handle this width and height
                    super(width,height);
                  }

                  /**
                   * Constructor that takes a picture and creates a
                   * copy of that picture
                   * @param copyPicture the picture to copy
                   */
                  public Picture(Picture copyPicture)
                  {
                    // let the parent class do the copy
                    super(copyPicture);
                  }

                  /**
                   * Constructor that takes a buffered image
                   * @param image the buffered image to use
                   */
                  public Picture(BufferedImage image)
                  {
                    super(image);
                  }
                  ////////////////////// methods ///////////////////////////////////////

                  /**
                   * Method to return a string with information about this picture.
                   * @return a string with information about the picture such as fileName,
                   * height and width.
                   */
                  public String toString()
                  {
                    String output = "Picture, filename " + getFileName() +
                      " height " + getHeight()
                      + " width " + getWidth();
                    return output;

                  }

                  /**
                    zeroBlue() method sets the blue values at all pixels to zero
                 */
                  public void zeroBlue()
                  {
                    Pixel[][] pixels = this.getPixels2D();

                    for (Pixel[] rowArray : pixels)
                     {
                       for (Pixel p: rowArray)
                       {
                              p.setBlue(0);
                       }
                    }
                  }


                 /*
                    keepOnlyBlue() method sets the blue values at all pixels to zero.

                    Add new method here and call it from main.
                 */

                  /* Main method for testing
                   */
                  public static void main(String[] args)
                  {
                    Picture pict = new Picture("beach.jpg");
                    pict.show();
                    pict.zeroBlue(); // Change this to call keepOnlyBlue()
                    pict.show();
                  }
                }
                ]]>
            </code>
            <tests>
                <![CDATA[
                import static org.junit.Assert.*;
                import org.junit.*;
                import java.io.*;
                import java.util.List;
                import java.util.ArrayList;
                import java.util.Arrays;

                public class RunestoneTests extends CodeTestHelper
                {
                  @Test
                  public void test1()
                  {
                    String target = "public void keepOnlyBlue()";
                    boolean passed = checkCodeContains("keepOnlyBlue() method",target);
                    assertTrue(passed);
                  }
                  @Test
                  public void test1b()
                  {
                    String target = ".keepOnlyBlue()";
                    boolean passed = checkCodeContains("Call to keepOnlyBlue() in main",target);
                    assertTrue(passed);
                  }

                  @Test
                  public void test2()
                  {
                    String target = ".setGreen(0);";
                    boolean passed = checkCodeContains("keepOnlyBlue() setting green pixels to the number 0",target);
                    assertTrue(passed);
                  }
                   @Test
                  public void test2b()
                  {
                    String target = ".setRed(0);";
                    boolean passed = checkCodeContains("keepOnlyBlue() setting red pixels to the number 0",target);
                    assertTrue(passed);
                  }


                  @Test
                    public void test3()
                    {
                       String target = "for";
                       String code = getCode();
                       int index = code.indexOf("public void keepOnlyBlue()");
                       boolean passed = false;
                       if (index > 0) {
                        code = code.substring(index);
                        int num = countOccurences(code, target);
                        passed = num >= 2;
                       }
                       getResults("true", ""+passed, "Checking that keepOnlyBlue() contains 2 for loops", passed);
                       assertTrue(passed);
                    }
                }
                ]]>
            </tests>
        </program>
    </section>

    <section xml:id="videos-in-runestone">
        <title>YouTube Videos</title>

        <p>Runestone uses a YouTube API that broadcasts events when a reader interacts with a video.  In this way, Runestone can record video-watching as an activity.  As <pretext/> output we concede better behavior on small screens (<q>responsiveness</q>) to enable this feature in a Runestone version.  A <attr>label</attr> attribute is necessary for persistence in the Runestone database.  Various <pretext/> features, such as playlists, are not yet supported<mdash/>make a request.</p>

        <video xml:id="yt-list-vars" label="youtube-list-vars" youtube="X1-UNHUajfk" width="60%" margins="5% 35%" preview="yt-list-variables.png">
            <title>A List Variable Video</title>
        </video>

        <p>The margins here are asymmetric just as a test.  And this text is here to see where the video ends.</p>
    </section>

    <section xml:id="rune-nested-divisions">
        <title>Deeper</title>

        <introduction>
            <p>This is a stub of a <tag>section</tag>, but it contains two <tag>subsection</tag> which each contain a PROJECT-LIKE item that includes a <tag>program</tag> element, and thus is a coding exercise.  This tests migration to the Runestone assignment area, though Runestone only has divisions two-deep (<q>chapter</q> and <q>subchapter</q>, so both will show up associated with the same <tag>section</tag><mdash/>this one.</p>

            <p>The first is a start of a C program, so will only be interactive on a Runestone server.  The second is a Python program, so will be interactive in all HTML outputs.</p>
        </introduction>

        <subsection>
            <title>Subsection One</title>

            <p>An <tag>activity</tag> next.  This one has a <tag>program</tag> so will be made interactive whenever possible.</p>

            <activity label="activity-in-subsection">
                <title>Activity in a Subsection</title>

                <statement>
                    <p>We would suggest you do something here.</p>
                </statement>
                <program xml:id="coding-exercise-partial-three" interactive="activecode" language="c">
                    <code>
                    #include &lt;stdio.h&gt;

                    int main(void)
                    </code>
                </program>
            </activity>

            <p>Nothing suggests this next <tag>project</tag> is interactive.</p>

            <project>
                <title>Project in a Subsection</title>

                <statement>
                    <p>You would work this project on paper, most likely.  It is <em>never</em> interactive since there is no indication of a desire for that, even if hosted on a capable platform.</p>

                    <p>A little bit of markup, to test a bug: <m>x^2</m>.  (The bug was only apparent under a deprecated method for specify a question to be an interactive short-answer question on Runestone Academy.)</p>
                </statement>
            </project>
        </subsection>

        <subsection>
            <title>Subsection Two</title>

            <p>An <tag>exploration</tag> next.</p>

            <exploration label="exploration-with-always-static-program">
                <title>Exploration in a Subsection</title>

                <statement>
                    <p>We would suggest now that you explore something here.  In this case we simply provide a CodeLens, which would be graded as an <q>interaction</q>.</p>
                </statement>
                <program interactive="codelens" language="python">
                    <code>
                    for i in range(10):
                        print(i)
                    </code>
                </program>
            </exploration>

            <p>The next simple <tag>exercise</tag> will be a <q>short answer</q> question on a capable interactive platform since we have included a <tag>response</tag> element.</p>

            <exercise label="interactive-short-answer">
                <title>Inline Exercise in a Subsection</title>

                <statement>
                    <p>I am an interactive short answer question, but only on a capable platform.</p>
                </statement>
                <response/>
            </exercise>
        </subsection>
    </section>

    <exercises xml:id="true-false-exercises">
        <title>True/False Exercises</title>

        <exercise xml:id="true-false-one" label="vector-space-dimension">
            <title>True/False</title>
            <idx>vector space</idx>
            <statement correct="no">
                <p>Every vector space has finite dimension.</p>
            </statement>
            <feedback>
                <p>The vector space of all polynomials with finite degree has a basis, <m>B = \{1,x,x^2,x^3,\dots\}</m>, which is infinte.</p>
            </feedback>
            <hint>
                <p><m>P_n</m>, the vector space of polynomials with degree at most <m>n</m>, has dimension <m>n+1</m> by <xref ref="theorem-exponent-laws"/>.  [Cross-reference is just a demo, content is not relevant.]  What happens if we relax the defintion and remove the parameter <m>n</m>?</p>
            </hint>
        </exercise>
    </exercises>

    <exercises xml:id="multiple-choice-exercises" groupwork="yes" groupsize="5" label="exercises-groupwork">
        <title>Multiple Choice Exercises</title>

        <introduction>
            <p>When this <tag>exercises</tag> division is hosted on Runestone Academy, it will be enabled for group work.  See group selection and submission features are at the end of the division.  See <xref ref="worksheet-groupwork"/> for more detail.  (2024-07-24: experimental.)</p>
        </introduction>

        <exercise xml:id="multiple-choice-one" label="multiple-choice-not-randomized">
            <title>Multiple-Choice, Not Randomized, One Answer</title>
            <idx>stop signs</idx>
            <statement>
                <p>What color is a stop sign?</p>
            </statement>
            <!-- to appear as problem with potentially multiple correct -->
            <!-- answers (even though there is only one), use           -->
            <!--                                                        -->
            <!--     <choices multiple-correct="yes">                   -->
            <!--                                                        -->
            <choices>
                <choice>
                    <statement>
                        <p>Green</p>
                    </statement>
                    <feedback>
                        <p>Green means <q>go!</q>.</p>
                    </feedback>
                </choice>
                <choice correct="yes">
                    <statement>
                        <p>Red</p>
                    </statement>
                    <feedback>
                        <p>Red is universally used for prohibited activities or serious warnings.</p>
                    </feedback>
                </choice>
                <choice>
                    <statement>
                        <p>White</p>
                    </statement>
                    <feedback>
                        <p>White might be hard to see.</p>
                    </feedback>
                </choice>
            </choices>
            <hint>
                <p>What did you see last time you went driving?</p>
            </hint>
            <hint>
                <p>Maybe go out for a drive?</p>
            </hint>
        </exercise>

        <exercise label="multiple-choice-feedback-math">
            <title>Multiple-Choice, Math in Feedback</title>
            <statement>
                <p>
                  What is the coefficient on <m>x^4y^4</m> in <m>(2x+5xy^2)^4</m>?
                </p>
            </statement>
            <choices>
                <choice>
                    <statement>
                    <p>
                        <m>6</m>
                    </p>
                    </statement>
                    <feedback>
                    <p>
                        Have you accounted for the <m>2</m> and <m>5</m> that are in the original binomial?
                    </p>
                    </feedback>
                </choice>
                <choice>
                    <statement>
                    <p>
                        <m>60</m>
                    </p>
                    </statement>
                    <feedback>
                    <p>
                        What should the exponents on <m>2</m> and <m>5</m> be when you expand <m>(2x+5xy^2)^4</m>?
                    </p>
                    </feedback>
                </choice>
                <choice>
                    <statement>
                    <p>
                        <m>100</m>
                    </p>
                    </statement>
                    <feedback>
                    <p>
                        Have you included something of the form <m>\binom{n}{k}</m> in your computations?
                    </p>
                    </feedback>
                </choice>
                <choice correct="yes">
                    <statement>
                    <p>
                        <m>600</m>
                    </p>
                    </statement>
                    <feedback>
                    <p>
                        Correct! Using the binomial theorem, we get a term containing the monomial <m>x^4y^4</m> by taking two of the first term, and two of the second term in the expansion of <m>(2x+5xy^2)^4</m>, and so this term is equal to
                        <me>\binom{4}{2} (2x)^2 (5xy^2)^2 = 6 \cdot 2^2 5^2 x^4 y^4 = 600 x^4 y^4</me>.
                    </p>
                    </feedback>
                </choice>
            </choices>
        </exercise>

        <exercise label="multiple-choice-multiple-answers">
            <title>Multiple-Choice, Not Randomized, Multiple Answers</title>
            <idx>stop signs</idx>
            <statement>
                <p>Which colors might be found in a rainbow?  (Note that the radio buttons now allow multiple buttons to be selected.)</p>
            </statement>
            <choices>
                <choice correct="yes">
                    <statement>
                        <p>Red</p>
                    </statement>
                    <feedback>
                        <p>Red is a definitely one of the colors.</p>
                    </feedback>
                </choice>
                <choice correct="yes">
                    <statement>
                        <p>Yellow</p>
                    </statement>
                    <feedback>
                        <p>Yes, yellow is correct.</p>
                    </feedback>
                </choice>
                <choice>
                    <statement>
                        <p>Black</p>
                    </statement>
                    <feedback>
                        <p>Remember the acronym<ellipsis/><acro>ROY G BIV</acro>.  <q>B</q> stands for blue.</p>
                    </feedback>
                </choice>
                <choice correct="yes">
                    <statement>
                        <p>Green</p>
                    </statement>
                    <feedback>
                        <p>Yes, green is one of the colors.</p>
                    </feedback>
                </choice>
            </choices>
            <hint>
                <p>Do you know the acronym<ellipsis/><acro>ROY G BIV</acro> for the colors of a rainbow, and their order?</p>
            </hint>
        </exercise>

        <exercise label="multiple-choice-randomized">
            <title>Multiple-Choice, Randomized, One Answer</title>
            <idx>stop signs</idx>
            <statement>
                <p>What color is a stop sign? [Static versions retain the order as authored.]</p>
            </statement>
            <choices randomize="yes">
                <choice>
                    <statement>
                        <p>Green</p>
                    </statement>
                    <feedback>
                        <p>Green means <q>go!</q>.</p>
                    </feedback>
                </choice>
                <choice correct="yes">
                    <statement>
                        <p>Red</p>
                    </statement>
                    <feedback>
                        <p>Red is universally used for prohibited activities or serious warnings.</p>
                    </feedback>
                </choice>
                <choice>
                    <statement>
                        <p>White</p>
                    </statement>
                    <feedback>
                        <p>White might be hard to see.</p>
                    </feedback>
                </choice>
            </choices>
            <hint>
                <p>What did you see last time you went driving?</p>
            </hint>
            <hint>
                <p>Maybe go out for a drive?</p>
            </hint>
        </exercise>

        <exercise label="multiple-choice-randomized-forced-checkbox">
            <title>Multiple-Choice, Randomized, One Answer but with Checkboxes</title>
            <idx>stop signs</idx>
            <statement>
                <p>What color is a stop sign? [Static versions retain the order as authored.]</p>
            </statement>
            <choices randomize="yes" multiple-correct="yes">
                <choice>
                    <statement>
                        <p>Green</p>
                    </statement>
                    <feedback>
                        <p>Green means <q>go!</q>.</p>
                    </feedback>
                </choice>
                <choice correct="yes">
                    <statement>
                        <p>Red</p>
                    </statement>
                    <feedback>
                        <p>Red is universally used for prohibited activities or serious warnings.</p>
                    </feedback>
                </choice>
                <choice>
                    <statement>
                        <p>Yellow</p>
                    </statement>
                    <feedback>
                        <p>Yellow means slow down.</p>
                    </feedback>
                </choice>
            </choices>
            <hint>
                <p>What did you see last time you went driving?</p>
            </hint>
            <hint>
                <p>Maybe go out for a drive?</p>
            </hint>
        </exercise>

        <exercise label="multiple-choice-randomized-multiple-answers">
            <title>Multiple-Choice, Randomized, Multiple Answers</title>
            <idx>stop signs</idx>
            <statement>
                <p>Which colors might be found in a rainbow?  (Note that the radio buttons now allow multiple buttons to be selected.) [Static versions retain the order as authored.]</p>
            </statement>
            <choices randomize="yes">
                <choice correct="yes">
                    <statement>
                        <p>Red</p>
                    </statement>
                    <feedback>
                        <p>Red is a definitely one of the colors.</p>
                    </feedback>
                </choice>
                <choice correct="yes">
                    <statement>
                        <p>Yellow</p>
                    </statement>
                    <feedback>
                        <p>Yes, yellow is correct.</p>
                    </feedback>
                </choice>
                <choice>
                    <statement>
                        <p>Black</p>
                    </statement>
                    <feedback>
                        <p>Remember the acronym<ellipsis/><acro>ROY G BIV</acro>.  <q>B</q> stands for blue.</p>
                    </feedback>
                </choice>
                <choice correct="yes">
                    <statement>
                        <p>Green</p>
                    </statement>
                    <feedback>
                        <p>Yes, green is one of the colors.</p>
                    </feedback>
                </choice>
            </choices>
            <hint>
                <p>Do you know the acronym<ellipsis/><acro>ROY G BIV</acro> for the colors of a rainbow, and their order?</p>
            </hint>
        </exercise>

        <exercise label="mathematical-multiple-choice-multiple-answers">
            <title>Mathematical Multiple-Choice, Not Randomized, Multiple Answers</title>
            <idx>stop signs</idx>
            <statement>
                <p>Which of the following is an antiderivative of <m>2\sin(x)\cos(x)</m>?</p>
            </statement>
            <choices>
                <choice correct="yes">
                    <statement>
                        <p><m>\sin^2(x)+832</m></p>
                    </statement>
                    <feedback>
                        <p>Remember that when we write <m>+C</m> on an antiderivative that this is the way we communicate that there are <em>many</em> possible derivatives, but they all <q>differ by a constant</q>.</p>
                    </feedback>
                </choice>
                <choice correct="yes">
                    <statement>
                        <p><m>\sin^2(x)</m></p>
                    </statement>
                    <feedback>
                        <p>The derivative given in the statement of the problem looks exactly like an application of the chain rule to <m>\sin^2(x)</m>.</p>
                    </feedback>
                </choice>
                <choice correct="yes">
                    <statement>
                        <p><m>-\cos^2(x)</m></p>
                    </statement>
                    <feedback>
                        <p>Take a derivative on <m>-\cos^2(x)</m> to see that this answer is correct.  Extra credit: does this answer <q>differ by a constant</q> when subtracted from either of the other two correct answers?</p>
                    </feedback>
                </choice>
                <choice>
                    <statement>
                        <p><m>-2\cos(x)\sin(x)</m></p>
                    </statement>
                    <feedback>
                        <p>The antiderivative of a product is not the product of the antiderivatives.  Use the product rule to take a derivative and see that this answer is not correct.</p>
                    </feedback>
                </choice>
            </choices>
            <hint>
                <p>You can take a derivative on any one of the choices to see if it is correct or not, rather than using techniques of integration to find <em>a single</em> correct answer.</p>
            </hint>
        </exercise>

        <exercise xml:id="multiple-choice-in-columns" label="multiple-choice-columns">
            <title>Multiple-Choice, Not Randomized, One Answer</title>
            <idx>stop signs</idx>
            <statement>
                <p>What color is a stop sign?</p>
                <p>Note: we are experimenting with choices in columns (2025-05-17).  Three columns here.</p>
            </statement>
            <!-- to appear as problem with potentially multiple correct -->
            <!-- answers (even though there is only one), use           -->
            <!--                                                        -->
            <!--     <choices multiple-correct="yes">                   -->
            <!--                                                        -->
            <choices cols="3">
                <choice>
                    <statement>
                        <p>Green</p>
                    </statement>
                    <feedback>
                        <p>Green means <q>go!</q>.</p>
                    </feedback>
                </choice>
                <choice correct="yes">
                    <statement>
                        <p>Red</p>
                    </statement>
                    <feedback>
                        <p>Red is universally used for prohibited activities or serious warnings.</p>
                    </feedback>
                </choice>
                <choice>
                    <statement>
                        <p>White</p>
                    </statement>
                    <feedback>
                        <p>White might be hard to see.</p>
                    </feedback>
                </choice>
                <choice>
                    <statement>
                        <p>Purple</p>
                    </statement>
                    <feedback>
                        <p>Hmmmmmmm.</p>
                    </feedback>
                </choice>
                <choice>
                    <statement>
                        <p>Pink</p>
                    </statement>
                    <feedback>
                        <p>I have never seen a pink road sign!</p>
                    </feedback>
                </choice>
            </choices>
            <hint>
                <p>What did you see last time you went driving?</p>
            </hint>
            <hint>
                <p>Maybe go out for a drive?</p>
            </hint>
        </exercise>
    </exercises>

    <exercises xml:id="parsons-exercises">
        <title>Parsons Exercises</title>

        <exercise label="number-theory-proof" adaptive="yes">
            <title>Parsons Problem, Mathematical Proof</title>
            <idx>even numbers</idx>
            <statement>
                <p>Create a proof of the theorem: If <m>n</m> is an even number, then <m>n\equiv 0\mod 2</m>.</p>
                <p>[Ed. If you examine the source, you will also notice the <tag>exercise</tag> lacks a <attr>language</attr> attribute. It is relying on the <c>docinfo/parsons/@language</c> value that is in bookinfo.xml. If present, that attribute will be used for any Parsons that lack a <attr>language</attr>.]</p>
            </statement>
            <blocks>
                <block order="2">
                    <p>Suppose <m>n</m> is even.</p>
                </block>
                <block order="3">
                    <choice><p>Then <m>n</m> is a prime number.</p></choice>
                    <choice correct="yes"><p>Then there exists an <m>m</m> so that <m>n = 2m</m>.</p></choice>
                    <choice><p>Then there exists an <m>m</m> so that <m>n = 2m + 1</m>.</p></choice>
                </block>
                <block order="1" correct="no">
                    <p>Click the heels of your ruby slippers together three times.</p>
                </block>
                <block order="5">
                    <p>So <m>n = 2m + 0</m>.</p>
                    <p>This is a superfluous second paragraph in this block.</p>
                </block>
                <block order="4">
                    <p>Thus <m>n\equiv 0\mod 2</m>.</p>
                </block>
                <block order="6" correct="no">
                    <p>And a little bit of irrelevant multi-line math
                        <md>
                            <mrow>c^2&amp;a^2+b^2</mrow>
                            <mrow>&amp;x^2+y^2</mrow>
                        </md>.
                    </p>
                </block>
            </blocks>
            <hint><p>Dorothy will not be much help with this proof.</p></hint>
        </exercise>

        <exercise label="parsons-with-partial-order" adaptive="yes" indentation="hide" language="python">
            <title>Parsons Problem, Partial Ordering</title>
            <statement>
                <p>Parsons problems can specify a partial ordering that allows for multiple valid solutions.</p>
                <p>Try putting the blocks in a valid order to calculate and print<c>c</c> Only use the required blocks. There are many valid orderings.</p>
            </statement>
            <blocks>
                <block order="5" name="math">
                    <cline>import math</cline>
                </block>
                <block order="7" correct="no">
                    <cline>import antigravity</cline>
                </block>
                <block order="6" name="a">
                    <cline>a = 3</cline>
                </block>
                <block order="2" name="b">
                    <choice correct="yes">
                        <cline>b = 4</cline>
                    </choice>
                    <choice>
                        <cline>4 = b</cline>
                    </choice>
                </block>
                <block order="3" name="cSq" depends="a b">
                    <cline>cSquared = a ** 2 + b ** 2</cline>
                </block>
                <block order="1" name="c" depends="cSq math">
                    <cline>c = math.sqrt(cSquared)</cline>
                </block>
                <block order="4" depends="c">
                    <cline>print(c)</cline>
                </block>
            </blocks>
        </exercise>

        <exercise label="prime-number-program-indent-yes" language="python" adaptive="yes" indentation="hide">
            <title>Parsons Problem, Programming</title>
            <idx>prime numbers</idx>
            <idx>Sieve of Eratosthenes</idx>
            <statement>
                <p>The Sieve of Eratosthenes computes prime numbers by starting with a finite list of the integers bigger than 1.  The first member of the list is a prime and is saved/recorded.  Then all multiples of that prime (which not a prime, excepting the prime itself!) are removed from the list.  Now the first number remaining in the list is the next prime number.  And the process repeats.</p>
                <p>The code blocks below can be rearranged to form one of the many possible programs to implement this algorithm to compute a list of all the primes less than <m>250</m>. [Ed. this version of this problem requires the reader to provide the necessary indentation.]</p>
                <p>This reprises <xref ref="sieve-primes"/>.</p>
            </statement>
            <blocks>
                <block order="6">
                    <cline>n = 250</cline>
                </block>
                <block order="2">
                    <choice correct="yes">
                        <cline>primes = []</cline>
                        <cline>candidates = list(range(2,n))</cline>
                    </choice>
                    <choice>
                        <cline>candidates = []</cline>
                        <cline>primes = list(range(2,n))</cline>
                    </choice>
                </block>
                <block order="7" correct="no">
                    <cline>primes = candidates + [p]</cline>
                </block>
                <block order="8">
                    <cline>while candidates:</cline>
                </block>
                <block order="3">
                    <cline>    p = candidates[0]</cline>
                    <cline>    primes.append(p)</cline>
                </block>
                <block order="1">
                    <cline>    for nonprime in range(p, n, p):</cline>
                </block>
                <block order="5">
                    <cline>        if nonprime in candidates:</cline>
                    <cline>            candidates.remove(nonprime)</cline>
                </block>
                <block order="4">
                    <cline>print(primes)</cline>
                </block>
            </blocks>
        </exercise>

        <exercise label="parsons-with-executable" language="python" adaptive="yes" indentation="show">
            <title>Parsons Problem with executable</title>
            <statement>
                <p>Parsons problems that have a <c>language</c> specified that corresponds to a valid activecode language can be made runnable.</p>
                <p>Complete the Python function <c>isolateRed(p)</c> If either the blue or green is higher than the red, average the three color values and set red, green, and blue to be that average. Otherwise, do nothing to <c>p</c>.</p>
                <p>After you check a correct answer you will be able to Run the code you created - it will be used to modify the image shown below.</p>

                <!-- 300px wide so 300/600 = 50% -->
                <datafile label="golden-gate2" filename="golden-gate.png">
                    <image source="datafiles/golden-gate-bridge.png" width="50%"/>
                </datafile>

            </statement>
            <blocks>
                <block order="4">
                    <cline>def isolateRed(p):</cline>
                </block>
                <block order="2">
                    <cline>    if p.green &gt; p.red or p.blue &gt; p.red:</cline>
                </block>
                <block order="3">
                    <cline>        avg = (p.red + p.blue + p.green) / 3</cline>
                </block>
                <block order="1">
                    <cline>        p.red = avg</cline>
                    <cline>        p.blue = avg</cline>
                    <cline>        p.green = avg</cline>
                </block>
            </blocks>
            <!-- note that the blank lines in pre and postabmbles are intentional to -->
            <!-- separate those from user code, but you might not always want them   -->
            <program-preamble>
                print("Using your code to isolate the red in the Golden Gate Bridge image.")
                import image

            </program-preamble>
            <!-- the program is empty as its contents will be replaced by student code -->
            <program datafile="golden-gate.png" codelens="no"/>
            <program-postamble>

                img = image.Image("golden-gate.png")
                win = image.ImageWin(img.getWidth(), img.getHeight())
                img.draw(win)

                # img.setDelay(delay, number of pixels between delay)
                # setDelay(1, 400) will speed up a lot
                img.setDelay(1,50)

                for row in range(img.getHeight()):
                    for col in range(img.getWidth()):
                        p = img.getPixel(col, row)
                        isolateRed(p)
                        img.setPixel(col, row, p)
            </program-postamble>
        </exercise>

        <exercise label="prime-number-program-indent-no" language="python" adaptive="yes" indentation="show">
            <title>Parsons Problem, Programming</title>
            <idx>prime numbers</idx>
            <idx>Sieve of Eratosthenes</idx>
            <statement>
                <p>The Sieve of Eratosthenes computes prime numbers by starting with a finite list of the integers bigger than 1.  The first member of the list is a prime and is saved/recorded.  Then all multiples of that prime (which not a prime, excepting the prime itself!) are removed from the list.  Now the first number remaining in the list is the next prime number.  And the process repeats.</p>
                <p>The code blocks below can be rearranged to form one of the many possible programs to implement this algorithm to compute a list of all the primes less than <m>250</m>. [Ed. this version of this problem does not require the reader to provide the necessary indentation, which is the default.]</p>
                <p>This reprises <xref ref="sieve-primes"/>.</p>
            </statement>
            <blocks>
                <block order="6">
                    <cline>n = 250</cline>
                </block>
                <block order="2">
                    <choice correct="yes">
                        <cline>primes = []</cline>
                        <cline>candidates = list(range(2,n))</cline>
                    </choice>
                    <choice>
                        <cline>candidates = []</cline>
                        <cline>primes = list(range(2,n))</cline>
                    </choice>
                </block>
                <block order="7" correct="no">
                    <cline>primes = candidates + [p]</cline>
                </block>
                <block order="8">
                    <cline>while candidates:</cline>
                </block>
                <block order="3">
                    <cline>    p = candidates[0]</cline>
                    <cline>    primes.append(p)</cline>
                </block>
                <block order="1">
                    <cline>    for nonprime in range(p, n, p):</cline>
                </block>
                <block order="5">
                    <cline>        if nonprime in candidates:</cline>
                    <cline>            candidates.remove(nonprime)</cline>
                </block>
                <block order="4">
                    <cline>print(primes)</cline>
                </block>
            </blocks>
        </exercise>

        <exercise label="number-theory-proof-numbered-left" adaptive="yes" language="natural">
            <title>Parsons Problem, Mathematical Proof, Numbered Blocks</title>
            <idx>even numbers</idx>
            <statement>
                <p>Create a proof of the theorem: If <m>n</m> is an even number, then <m>n\equiv 0\mod 2</m>. [Ed.  This version has numbered blocks, online they are on the right end of the block.]</p>
            </statement>
            <blocks numbered="right">
                <block order="2">
                    <p>Suppose <m>n</m> is even.</p>
                </block>
                <block order="3">
                    <choice><p>Then <m>n</m> is a prime number.</p></choice>
                    <choice correct="yes"><p>Then there exists an <m>m</m> so that <m>n = 2m</m>.</p></choice>
                    <choice><p>Then there exists an <m>m</m> so that <m>n = 2m + 1</m>.</p></choice>
                </block>
                <block order="1" correct="no">
                    <p>Click the heels of your ruby slippers together three times.</p>
                </block>
                <block order="5">
                    <p>So <m>n = 2m + 0</m>.</p>
                    <p>This is a superfluous second paragraph in this block.</p>
                </block>
                <block order="4">
                    <p>Thus <m>n\equiv 0\mod 2</m>.</p>
                </block>
            </blocks>
            <hint><p>Dorothy will not be much help with this proof.</p></hint>
        </exercise>

        <exercise label="prime-number-program-numbered-right" language="python" adaptive="yes" indentation="hide">
            <title>Parsons Problem, Programming</title>
            <idx>prime numbers</idx>
            <idx>Sieve of Eratosthenes</idx>
            <statement>
                <p>The Sieve of Eratosthenes computes prime numbers by starting with a finite list of the integers bigger than 1.  The first member of the list is a prime and is saved/recorded.  Then all multiples of that prime (which not a prime, excepting the prime itself!) are removed from the list.  Now the first number remaining in the list is the next prime number.  And the process repeats.</p>
                <p>The code blocks below can be rearranged to form one of the many possible programs to implement this algorithm to compute a list of all the primes less than <m>250</m>. [Ed.  This version has numbered blocks, online they are on the left end of the block.]</p>
                <p>This reprises <xref ref="sieve-primes"/>.</p>
            </statement>
            <blocks numbered="left">
                <block order="6">
                    <cline>n = 250</cline>
                </block>
                <block order="2">
                    <choice correct="yes">
                        <cline>primes = []</cline>
                        <cline>candidates = list(range(2,n))</cline>
                    </choice>
                    <choice>
                        <cline>candidates = []</cline>
                        <cline>primes = list(range(2,n))</cline>
                    </choice>
                </block>
                <block order="7" correct="no">
                    <cline>primes = candidates + [p]</cline>
                </block>
                <block order="8">
                    <cline>while candidates:</cline>
                </block>
                <block order="3">
                    <cline>    p = candidates[0]</cline>
                    <cline>    primes.append(p)</cline>
                </block>
                <block order="1">
                    <cline>    for nonprime in range(p, n, p):</cline>
                </block>
                <block order="5">
                    <cline>        if nonprime in candidates:</cline>
                    <cline>            candidates.remove(nonprime)</cline>
                </block>
                <block order="4">
                    <cline>print(primes)</cline>
                </block>
            </blocks>
        </exercise>
    </exercises>

    <exercises xml:id="horizontal-parsons-exercises">
        <title>Horizontal Parsons Exercises</title>

        <exercise label="horizontal-parson-sql-statement-simple" language="sql">
            <title>Parsons Problem, SQL statement</title>
            <statement>
                <p>Form the SQL statement by rearranging the four blocks.</p>
                <!-- <p>Note: for this SQL exercise, and the others following, blocks are authored as code via a <tag>c</tag> element, in order that the text pass through to the compiler with no changes.</p> -->
            </statement>
            <blocks layout="horizontal" randomize="yes">
                <block order="2"><c>SELECT</c></block>
                <block order="1"><c>*</c></block>
                <block order="4"><c>FROM</c></block>
                <block order="3"><c>test</c></block>
            </blocks>
        </exercise>
        <exercise label="horizontal-parson-python-test" language="python">
          <title>Parsons Problem, Python import</title>
          <statement>
              <p>Testing syntax highlighting.</p>
          </statement>
          <blocks layout="horizontal" randomize="yes">
              <block order="2"><c>from</c></block>
              <block order="1"><c>math</c></block>
              <block order="4"><c>import</c></block>
              <block order="3"><c>pi</c></block>
          </blocks>
        </exercise>
        <exercise label="horizontal-parson-sql-statement-no-randomize" language="sql">
            <title>Parsons Problem, SQL statement, no randomization</title>
            <statement>
                <p>Form the SQL statement by rearranging the four blocks.  This version of this problem will <em>always</em> present the blocks in the same fixed order (but incorrect, hopefully!), as prescribed by the author in the source.</p>
            </statement>
            <blocks layout="horizontal" randomize="no">
                <block order="2"><c>SELECT</c></block>
                <block order="1"><c>*</c></block>
                <block order="4"><c>FROM</c></block>
                <block order="3"><c>test</c></block>
            </blocks>
        </exercise>

        <exercise label="horizontal-parson-sql-statement-with-db" language="sql" database="sql/test.db">
            <title>Parsons Problem, SQL statement, automatic feedback</title>
            <statement>
                <p>Form the SQL statement by rearranging the four blocks.</p>
            </statement>
            <blocks layout="horizontal" randomize="yes">
                <block order="2"><c>SELECT</c></block>
                <block order="1"><c>*</c></block>
                <block order="4"><c>FROM</c></block>
                <block order="3"><c>test</c></block>
            </blocks>
            <tests>
            assert 1,1 == world
            assert 0,1 == hello
            assert 2,1 == 42
            </tests>
        </exercise>

        <exercise label="horizontal-parson-natural" language="natural">
            <title>Parsons Problem, Natural Language</title>
            <statement>
                <p>Form the sentence often used to show font samples.  You can reuse blocks as needed.</p>
            </statement>
            <blocks layout="horizontal" reuse="yes" randomize="yes">
                <block ref="font-the" order="6"/>
                <block order="8">quick</block>
                <block order="2">brown</block>
                <block order="3">fox</block>
                <block order="1">jumped</block>
                <block order="5">over</block>
                <block xml:id="font-the">the</block>
                <block order="7">lazy</block>
                <block order="4">dog</block>
            </blocks>
        </exercise>

        <exercise label="horizontal-parson-natural-distractor" language="natural">
            <title>Parsons Problem, Natural Language, with Distractors</title>
            <statement>
                <p>Form the sentence often used to show font samples.  Again, but now with distractors.</p>
            </statement>
            <blocks layout="horizontal">
                <block ref="font-the-two" order="7"/>
                <block order="10" correct="yes">quick</block>
                <block order="2">brown</block>
                <block order="3">fox</block>
                <block order="1">jumped</block>
                <block order="8" correct="no">foo</block>
                <block order="6">over</block>
                <block xml:id="font-the-two">the</block>
                <block order="9">lazy</block>
                <block order="5" correct="no">bar</block>
                <block order="4">dog</block>
            </blocks>
        </exercise>

        <exercise label="horizontal-parson-sql-statement-reusable" language="sql">
            <title>Parsons Problem, SQL statement, reusable</title>
            <statement>
                <p>Form the SQL statement by rearranging the four blocks.  Same problem as above, but we allow blocks to be reused (even though the solution does not require that).</p>
            </statement>
            <blocks layout="horizontal" reuse="yes" randomize="yes">
                <block order="2"><c>SELECT</c></block>
                <block order="1"><c>*</c></block>
                <block order="4"><c>FROM</c></block>
                <block order="3"><c>test</c></block>
            </blocks>
        </exercise>

        <exercise label="horizontal-parson-math-test" language="math">
            <title>Parsons Problem with math blocks</title>

            <statement>
                <p>
                Testing math mode blocks - correct answer is <m>\pi\sum\beta\alpha</m>
                </p>
            </statement>
            <blocks layout="horizontal" randomize="yes">
                <block order="2"><m>\pi</m></block>
                <block order="1"><m>\sum</m></block>
                <block order="4"><m>\beta</m></block>
                <block order="3"><m>\alpha</m></block>
            </blocks>
        </exercise>
    </exercises>

    <exercises xml:id="matching-exercises">
        <title>Matching Exercises</title>

        <introduction>
          <p>
            Matching exercises come in two varieties. Their differences are most noticeable in interactive versions.
            <dl>
                <li>
                    <title>Cardsort</title>
                    <p>A <tag>cardsort</tag> asks users to match items in a 1-1 or many-1 fashion. The interactive version of these involves dragging <q>card</q>s from the left column (the <tag>premise</tag>s) into containers on the right (the <tag>response</tag>s).</p>
                </li>
                <li>
                    <title>Matching</title>
                    <p>A <tag>matching</tag> interactive asks users to form connections between the <tag>premise</tag>s in the left column and the <tag>response</tag>s on the right. This format supports many-many matches.</p>
                </li>
            </dl>
          </p>
        </introduction>

        <!-- https://www.britannica.com/list/25-decade-defining-events-in-us-history -->
        <exercise xml:id="matching-one" label="matching-dates">
            <title>Cardsort Problem, Dates</title>
            <idx>matching US dates</idx>
            <statement>
                <p>Match each event in United States history with the year it happened.</p>
            </statement>
            <feedback>
                <p>Review <url href="https://www.britannica.com/list/25-decade-defining-events-in-us-history" visual="www.britannica.com/list/25-decade-defining-events-in-us-history">Encyclopedia Brittania, 25 Decade-Defining Events in U.S. History</url>url.</p>
            </feedback>
            <cardsort>
                <match>
                    <premise order="4">Monroe Doctrine</premise>
                    <response>1823</response>
                </match>
                <match>
                    <premise order="3">Haymarket Riot</premise>
                    <response>1886</response>
                </match>
                <match>
                    <premise order="1">Louisiana Purchase</premise>
                    <response>1803</response>
                </match>
                <match>
                    <premise order="2">Battle of Gettysburg</premise>
                    <response>1863</response>
                </match>
            </cardsort>
        </exercise>

        <exercise label="matching-derivatives">
            <title>Cardsort Problem, Derivatives</title>
            <idx>matching derivatives</idx>
            <statement>
                <p>Match each function with its derivative.</p>
            </statement>
            <feedback>
                <p>Did you compute the derivative of each function in the premises (left column)?</p>
            </feedback>
            <cardsort>
                <match>
                    <premise order="1"><m>x^3-6x^2+5</m></premise>
                    <response><m>3x^2-12x</m></response>
                </match>
                <match>
                    <premise order="3"><m>x^{-3}</m></premise>
                    <response><m>-3x^{-4}</m></response>
                </match>
                <match>
                    <premise order="2"><m>(x+1)^2</m></premise>
                    <response><m>2x+2</m></response>
                </match>
            </cardsort>
        </exercise>

        <exercise label="matching-bases">
            <title>Cardsort Problem, Linear Algebra</title>
            <idx>matching bases and subspaces</idx>
            <statement>
                <p>Match each subspace with a basis for that subspace. (You may assume that each set is really a basis for at least one of the subspaces.)</p>
            </statement>
            <feedback>
                <p>Each putative basis is a subset of exactly one of the three subspaces.  So for each subspace, two of the three sets can be ruled out by simply testing that the vectors of the basis are members of the subspace, via the membership criteria.</p>
            </feedback>
            <cardsort>
                <match>
                    <premise order="1"><m>\left\{\langle x,y,z\rangle\mid - y + z = 0\right\}</m></premise>
                    <response><m>\left\{\langle -4, 3, 3\rangle, \langle 3, -2, -2 \rangle\right\}</m></response>
                </match>
                <match>
                    <premise order="3"><m>\left\{\langle x,y,z\rangle\mid -3x - 5y + z = 0\right\}</m></premise>
                    <response><m>\left\{\langle -4, 3, 3\rangle, \langle 5, -4, -5 \rangle\right\}</m></response>
                </match>
                <match>
                    <premise order="2"><m>\left\{\langle x,y,z\rangle\mid -2x - 5y + 2z = 0\right\}</m></premise>
                    <response><m>\left\{\langle 3, -2, -2 \rangle, \langle 5, -4, -5 \rangle\right\}</m></response>
                </match>
            </cardsort>
            <hint>
                <p>For openers, a basis for a subspace must be a <em>subset</em> of the subspace.</p>
            </hint>
        </exercise>

<exercise label="matching-function-types">
    <title>Cardsort Problem, Function Types</title>
    <idx>matching function types</idx>
    <statement>
      <p>
        Sort the following functions into their correct categories. 
      </p>
    </statement>
    <feedback>
      <p>
        Review
        <url href="https://activecalculus.org/prelude/sec-changing-linear.html" visual="A precalculus textbook that could help"> Active Prelude to Calculus</url>
        url.
      </p>
    </feedback>
    <cardsort>
    <match>
      <response>Linear</response>
      <premise order="4"><m>y=5x+3</m></premise>
      <premise order="5"><m>\pi x - 6y = \sqrt{2}</m></premise>
      <premise order="6"><m>y=\frac{-1}{2}x+e</m></premise>
    </match>
    <match>
      <response>Quadratic</response>
    </match>
    <match>
      <premise order="7"><m>y=x^3-x</m></premise>
    </match>
    <match>
      <response>Exponential</response>
      <premise order="1"><m>y=2^x</m></premise>
    </match>
    <match>
      <response>Power</response>
      <premise order="2"><m>y=x^3</m></premise>
      <premise order="3"><m>y=\sqrt{x}</m></premise>
    </match>
    </cardsort>
  </exercise>


        <exercise label="matching-playing-cards">
            <title>Matching Problem, Playing Cards</title>
            <idx><h>matching</h><h>playing cards</h></idx>
            <statement>
              <p>
                Associate each playing card with every applicable property.
              </p>
            </statement>
            <feedback>
              <p>
                This one should not be very hard.  And we have a gratuitous image to test the use of HTML in this component.
              </p>
              <image source="datafiles/golden-gate-bridge.png" width="50%"/>
            </feedback>
            <matching>
                <premise ref="jack heart">Jack of Hearts</premise>
                <premise ref="ace spade">Ace of Spades</premise>
                <premise ref="queen spade">Queen of Spades</premise>
                <premise ref="king club">King of Clubs</premise>
                <premise ref="queen diamond">Queen of Diamonds</premise>
                <!--  -->
                <response xml:id="ace" order="8">Ace</response>
                <response xml:id="king" order="7">King</response>
                <response xml:id="queen" order="6">Queen</response>
                <response xml:id="jack" order="5">Jack</response>
                <response xml:id="heart" order="4">Heart</response>
                <response xml:id="diamond" order="3">Diamond</response>
                <response xml:id="club" order="2">Club</response>
                <response xml:id="spade" order="1">Spade</response>
            </matching>
        </exercise>

        <exercise label="matching-music-history">
            <title>Matching Problem, Popular Music History</title>
            <idx>matching music history</idx>
            <statement>
              <p>
                Drag each performer onto every applicable category.
              </p>
            </statement>
            <feedback>
              <p>
                Paul McCartney, Ringo Starr, Eric Clapton, Elton John.  Jethro Tull is the name of a band, not a performer, and
                its best-known member would be the flautist Ian Anderson.
              </p>
            </feedback>
            <matching>
                <premise ref="beatle">Paul</premise>
                <premise ref="beatle drum">Ringo</premise>
                <premise ref="guitar yardbirds">Eric</premise>
                <premise ref="piano">Elton</premise>
                <premise>Jethro</premise>
                <!--  -->
                <response xml:id="beatle">Beatle</response>
                <response xml:id="yardbirds">Yardbirds</response>
                <response xml:id="guitar">Guitarist</response>
                <response xml:id="drum">Drummer</response>
                <response xml:id="flute">Flautist</response>
                <response xml:id="harp">Harpist</response>
                <response xml:id="piano">Pianist</response>
                <response xml:id="math"><em>Some</em> "Math": <m>\sin(x^2)</m></response>
            </matching>
        </exercise>

        <exercise xml:id="cardsort-basic" label="cardsort-basic">
            <title>Cardsort Problem, Basic Arithmetic</title>
            <idx>matching US dates</idx>
            <statement>
                <p>This is a simple exercise to test some grading behavior.</p>
            </statement>
            <cardsort>
                <match>
                    <premise order="1">2 + 3</premise>
                    <premise order="3">4 + 1</premise>
                    <response>5</response>
                </match>
                <match>
                    <premise order="2"><m>12 + 2</m></premise>
                    <response>14</response>
                </match>
            </cardsort>
        </exercise>
    </exercises>

    <exercises xml:id="clickable-area-exercises">
        <title>Clickable Area Exercises</title>

        <exercise label="clickable-text">
            <title>Clickable Areas, <q>Regular</q> Text</title>

            <statement>
                <p>Identify (by clicking, or by circling) all of the nouns in this quotation by Eleanor Roosevelt.</p>
            </statement>

            <areas>
                <p><q>The <area>future</area> belongs to <area correct="no">those</area> who believe in the <area correct="yes">beauty</area> of <area correct="no">their</area> <area>dreams</area>.</q></p>
            </areas>

            <feedback>
                <p>The incorrect words are pronouns.</p>
            </feedback>
        </exercise>

        <exercise label="clickable-code">
            <title>Clickable Areas, Code</title>

            <statement>
                <p>Identify (by clicking, or by circling) all of the assignment statements in this Python function.</p>
            </statement>

            <areas language="python">
                <cline><area correct="no">def main():</area></cline>
                <cline>    <area correct="yes">x = 4</area></cline>
                <cline>    for i in range(5):</cline>
                <cline>        <area>y = i</area></cline>
                <cline>        <area correct="no">if y > 2:</area></cline>
                <cline>            print(y)</cline>
            </areas>

            <feedback>
                <p>Remember, the operator <c>=</c> is used for assignment.</p>
            </feedback>
        </exercise>

        <exercise label="clickable-table">
            <title>Clickable Areas, Text in a Table</title>

            <statement>
                <p>A two-dimensional array was created in Python with the list comprehension:<cd>
                        <cline>[[0 for x in range(3)] for y in range(2)]</cline>
                </cd>Then the values were (mostly) changed from zeros and the final array is shown below.</p>
                <p>Identify (by clicking, or by circling) all of the boolean values in the array.</p>
                <!-- <p>Note that every entry is inline code, authored with a <tag>c</tag>.</p> -->
            </statement>

            <areas>
                <tabular top="minor" bottom="minor" left="minor" right="minor">
                    <row>
                        <cell><c>42</c></cell>
                        <cell><area><c>True</c></area></cell>
                        <cell><area correct="no"><c>'towel'</c></area></cell>
                    </row>
                    <row>
                        <cell><area correct="no"><c>'true'</c></area></cell>
                        <cell><c>0</c></cell>
                        <cell><area><c>False</c></area></cell>
                    </row>
                </tabular>

                <p>This second table has no <tag>area</tag>, in order to test CSS for tables.</p>

                <tabular top="minor" bottom="minor" left="minor" right="minor">
                    <row>
                        <cell><c>42</c></cell>
                        <cell><c>True</c></cell>
                        <cell><c>'towel'</c></cell>
                    </row>
                    <row>
                        <cell><c>'true'</c></cell>
                        <cell><c>0</c></cell>
                        <cell><c>False</c></cell>
                    </row>
                </tabular>
            </areas>
            <hint>
                <p>Python boolean variables begin with capital latters.</p>
            </hint>
            <feedback>
                <p>Python boolean variables are <c>True</c> and <c>False</c>.  A value in quotation marks is a string, not a boolean.</p>
            </feedback>
        </exercise>
    </exercises>

    <exercises xml:id="select-exercises">
        <title>Select Exercises</title>

        <introduction>
            <p>These <term>select</term> questions specify a list of extant questions, and the reader, or Runestone, selects questions from the list to be graded (in different ways). They are only really functional with a database of students in a course, i.e.<nbsp/>when hosted on Runestone.</p>
        </introduction>

        <!-- Select one at random -->
        <exercise label="question-select">
            <title>Three-way Select Question</title>
            <select grade="random" questions="true-false-one multiple-choice-one matching-one"/>
        </exercise>

        <!-- Select according to a student's group (A or B) -->
        <exercise label="ab-experiment">
            <title>A/B Experiment Select Question</title>
            <select grade="ab-experiment" questions="true-false-one multiple-choice-one" experiment-name="sample-book"/>
        </exercise>

        <!-- Select grades first alwys, others to view -->
        <exercise label="toggle-first">
            <title>Grade First Question</title>
            <select grade="first" questions="true-false-one multiple-choice-one"/>
        </exercise>

        <!-- Select grades any one reader chooses -->
        <exercise label="toggle-any">
            <title>Grade Any Question</title>
            <select grade="any" questions="true-false-one multiple-choice-one"/>
        </exercise>

    </exercises>

    <exercises xml:id="short-answer-exercises">
        <title>Short Answer Exercises</title>

        <exercise label="short-answer-question">
            <title>Short Answer</title>

            <statement>
                <p>This sample book is configured to make some simple questions interactive on a capable platform, by adding a <tag>response</tag> element as a signal.</p>
            </statement>
            <response/>
        </exercise>
    </exercises>

    <section xml:id="polling" label="polling">
        <title>Polling</title>

        <p>(2024-04-24) This section is experimental, and may not be fully functional as you view it.  No markup in the source document is final and may change at any time.</p>

        <p>We begin with standalone queries, using the <tag>query</tag> element.  Runestone calls these <term>polls</term>.   We plan structures/blocks such as <tag>poll</tag>, <tag>survey</tag>, and <tag>questionnaire</tag>, that will be structured collections of <tag>query</tag>.</p>

        <query label="stoplight-query">
            <statement>
                <p>In my town, the stoplights have:</p>
            </statement>
            <choices>
                <choice>
                    <p>Solid yellow lights.</p>
                </choice>
                <choice>
                    <p>Yellow lights that are solid left-turn arrows.</p>
                </choice>
                <choice>
                    <p>Yellow lights that are blinking left-turn arrows.</p>
                </choice>
            </choices>
        </query>

        <query label="derivative-query">
            <statement>
                <p>Which of the following is the derivative of <m>f(x)=x^4\sin(x)</m>?</p>
            </statement>
            <choices>
                <choice>
                    <p><m>x^5 - \cos(x)</m></p>
                </choice>
                <choice>
                    <p><m>x^4\cos(x) + 4x^3\sin(x)</m></p>
                </choice>
                <choice>
                    <p><m>4x^3\cos(x)</m></p>
                </choice>
            </choices>
        </query>

        <query label="discipline-query" scale="5">
            <statement>
                <p>I like computer science better than mathematics.  <q>1</q> is <q>strongly disagree</q> and <q>5</q> is <q>strongly agree</q>.</p>
            </statement>
        </query>

        <query label="animal-query-absurd" scale="37">
            <statement>
                <p>How many stuffed animal toys did you own growing up?  (Testing an absurdly large scale, especially in print.)</p>
            </statement>
        </query>

        <query label="image-query" scale="5">
            <statement>
                <p>Which of the following paintings is your favorite?</p>
            </statement>
            <choices>
                <choice>
                    <!-- The Calydonian Boar Hunt by Peter Paul Rubens, CC0 -->
                    <!-- https://www.rawpixel.com/image/14263399/the-calydonian-boar-hunt-peter-paul-rubens -->
                    <p>The Calydonian Boar Hunt by Peter Paul Rubens</p>
                    <image source="image-from-rawpixel-id-14263399-jpeg.jpg" width="50%"/>
                </choice>
                <choice>
                    <!-- Lucas Cranach's The fountain of youth (1546) famous painting. CC0-->
                    <!-- https://www.rawpixel.com/image/3984423/illustration-image-art-people-vintage -->
                    <p>Lucas Cranach's The fountain of youth (1546)</p>
                    <image source="image-from-rawpixel-id-3984423-jpeg.jpg" width="50%"/>
                </choice>
                <choice>
                    <!-- William-Adolphe Bouguereau's Temptation (1880) -->
                    <!-- https://www.rawpixel.com/image/8704110/image-frame-art-vintage -->
                    <p>William-Adolphe Bouguereau's Temptation (1880)</p>
                    <image source="image-from-rawpixel-id-8704110-jpeg.jpg" width="50%"/>
                </choice>
            </choices>
        </query>
    </section>

    <section xml:id="doenet">
        <title>DoenetML</title>

        <p>This preliminary DoenetML example is for testing use on a Runestone server, where it will use the SPLICE protocol to report out events.  To the reader, it should <em>behave</em> identically when not on a Runestone server.</p>

        <!-- 2024-04-25: This exact interactive appears in the sample article, within a figure. -->
        <interactive label="interactive-doenetml-example" platform="doenetml" width="100%" aspect="3:2">
            <slate surface="doenetml">
                &lt;p&gt;
                Adjust the vectors &lt;m&gt;\vec u&lt;/m&gt;, &lt;m&gt;\vec v&lt;/m&gt;, and &lt;m&gt;\vec w&lt;/m&gt; in the
                left graph to visualize the areas calculated by
                &lt;m&gt;\det[\vec u\hspace{0.5em}\vec w]&lt;/m&gt;, &lt;m&gt;\det[\vec v\hspace{0.5em}\vec w]&lt;/m&gt;,
                and
                &lt;m&gt;\det[\vec u+\vec v\hspace{0.5em}\vec w]&lt;/m&gt;.
              &lt;/p&gt;
              &lt;setup&gt;&lt;line through=&quot;(0,0) $v&quot; name=&quot;vLine&quot;/&gt;&lt;math simplify  name=&quot;c&quot;&gt;$cv.x/$v.x&lt;/math&gt;&lt;/setup&gt;
              &lt;sideBySide&gt;
                &lt;graph xmin=&quot;-4&quot; ymin=&quot;-4&quot; xmax=&quot;16&quot; ymax=&quot;16&quot;&gt;
                  &lt;m draggable=&quot;false&quot; anchor=&quot;(10,14)&quot;&gt;
                    \det[\vec u\hspace{0.5em}\vec w],
                    \det[\vec v\hspace{0.5em}\vec w]
                  &lt;/m&gt;
                  &lt;point name=&quot;u&quot; styleNumber=&quot;3&quot;&gt;
                    (6,2)
                    &lt;label&gt;&lt;m&gt;\vec u&lt;/m&gt;&lt;/label&gt;
                  &lt;/point&gt;
                  &lt;point name=&quot;w&quot; styleNumber=&quot;3&quot;&gt;
                    (3,7)
                    &lt;label&gt;&lt;m&gt;\vec w&lt;/m&gt;&lt;/label&gt;
                  &lt;/point&gt;
                  &lt;point name=&quot;uPlusV&quot; styleNumber=&quot;4&quot;&gt;
                    (9,5)
                    &lt;label&gt;&lt;m&gt;\vec v&lt;/m&gt;&lt;/label&gt;
                  &lt;/point&gt;
                  &lt;polygon vertices=&quot;(0,0) $u $u+$w $w&quot; filled draggable=&quot;false&quot; styleNumber=&quot;3&quot;/&gt;
                  &lt;polygon vertices=&quot;$u $uPlusV $uPlusV+$w $u+$w&quot; filled draggable=&quot;false&quot; styleNumber=&quot;4&quot;/&gt;
                  &lt;lineSegment endpoints=&quot;(0,0) $uPlusV&quot; styleNumber=&quot;6&quot;/&gt;
                  &lt;lineSegment endpoints=&quot;$w $uPlusV+$w&quot; styleNumber=&quot;6&quot;/&gt;
                &lt;/graph&gt;
                &lt;graph xmin=&quot;-4&quot; ymin=&quot;-4&quot; xmax=&quot;16&quot; ymax=&quot;16&quot;&gt;
                  &lt;m draggable=&quot;false&quot; anchor=&quot;(12,14)&quot;&gt;
                    \det[\vec u+\vec v\hspace{0.5em}\vec w]
                  &lt;/m&gt;
                  &lt;polygon vertices=&quot;(0,0) $uPlusV $uPlusV+$w $w&quot; filled draggable=&quot;false&quot; styleNumber=&quot;2&quot;/&gt;
                  &lt;point draggable=&quot;false&quot; styleNumber=&quot;3&quot;&gt;
                    $w
                    &lt;label&gt;&lt;m&gt;\vec w&lt;/m&gt;&lt;/label&gt;
                  &lt;/point&gt;
                  &lt;point draggable=&quot;false&quot; styleNumber=&quot;4&quot;&gt;
                    $uPlusV
                    &lt;label&gt;&lt;m&gt;\vec u+\vec v&lt;/m&gt;&lt;/label&gt;
                  &lt;/point&gt;
                  &lt;lineSegment endpoints=&quot;(0,0) $u&quot; styleNumber=&quot;6&quot;/&gt;
                  &lt;lineSegment endpoints=&quot;$u $uPlusV&quot; styleNumber=&quot;6&quot;/&gt;
                  &lt;lineSegment endpoints=&quot;$w $w+$u&quot; styleNumber=&quot;6&quot;/&gt;
                  &lt;lineSegment endpoints=&quot;$w+$u $w+$uPlusV&quot; styleNumber=&quot;6&quot;/&gt;
                &lt;/graph&gt;
              &lt;/sideBySide&gt;
            </slate>
        </interactive>
    </section>

    <exercises xml:id="fill-in-exercises-old">
        <title>Fill-In Exercises (Old Style)</title>

        <introduction>
            <p>This section has <term>fill-in-the-blank</term> (<init>FITB</init>) exercises that use an old syntax.  They were designed for projects transitioning from Runestone's ReST syntax to <pretext/>.  So they are really only here for testing, and not for any sort of documentation.  They will not receive support or enhancements.  <foreign>Caveat emptor</foreign>.</p>
        </introduction>

        <exercise label="fillin-integer">
            <title>Fill-In, Integer Answer</title>

            <statement>
                <p>The game of bowling uses <var width="28"/> pins that you try to knock down. (This answer blank has been set to be very wide.)</p>
            </statement>
            <setup>
                <var>
                    <condition number="10">
                        <feedback>
                            <p>Arranged in a triangle, there are <m>1+2+3+4 = 10</m> pins, a so-called <term>triangular</term> number.</p>
                        </feedback>
                    </condition>
                    <condition number="16">
                        <feedback>
                            <p><em>Close</em>! You may have used hexadecimal notation, when you did not really mean to.</p>
                        </feedback>
                    </condition>
                    <condition string=".*">
                        <feedback>
                            <p>Incorrect.</p>
                        </feedback>
                    </condition>
                </var>
            </setup>
        </exercise>

        <exercise label="fillin-string-integer">
            <title>Fill-In, String and Number Answers</title>

            <statement>
                <p>Complete the following line of a Python program so that it will declare an integer variable <c>age</c> with an initial value of <c>5</c>. (These two answer blanks have been set to be very short.)</p>
                <p><var width="2"/> <c>age = </c> <var width="3"/><c>;</c></p>
            </statement>
            <setup>
                <var>
                    <condition string="int">
                        <feedback>
                            <p>A variable of type <c>int</c> is appropriate for whole number ages.</p>
                        </feedback>
                    </condition>
                    <condition string=".*">
                        <feedback>
                            <p>Remember that Java uses just the first three letters of the word <q>integer</q> to define an integral type.</p>
                        </feedback>
                    </condition>
                </var>
                <var>
                    <condition number="5">
                        <feedback>
                            <p>An integer variable may be initialized to a value.</p>
                        </feedback>
                    </condition>
                    <condition string=".*">
                        <feedback>
                            <p>Use <c>5</c> as the initial value of the variable.</p>
                        </feedback>
                    </condition>
                </var>
            </setup>
        </exercise>

        <exercise label="fillin-case-insensitive">
            <title>Fill-In, Case-Insensitive Answer</title>

            <statement>
                <p>The word <var/> is the opposite of <q>yes</q>.  (Try a mixture of upper and lower-case letters.)</p>
            </statement>
            <setup>
                <var case="insensitive">
                    <!-- Note, no "p" in "feedback" -->
                    <condition string="no">
                        <feedback>The correct answers are  no, No, nO, and NO.</feedback>
                    </condition>
                    <condition string=".*">
                        <feedback>Incorrect.</feedback>
                    </condition>
                </var>
            </setup>
        </exercise>

        <exercise label="fillin-decimal">
            <title>Fill-In, Decimal Answer</title>

            <statement>
                <p>The decimal number <var/> is an approximation of <m>\sfrac{1}{3}</m> to within three significant figures.  (<url href="https://en.wikipedia.org/wiki/Significant_figures" visual="en.wikipedia.org/wiki/Significant_figures">Wikipedia</url>).</p>
            </statement>
            <setup>
                <var>
                    <!-- Note, no "p" in "feedback" -->
                    <condition number="0.333" tolerance="0.0005">
                        <feedback>
                            <p>Any value in the interval <m>0.333\pm 0.0005</m> is correct.</p>
                        </feedback>
                    </condition>
                    <condition string=".*">
                        <feedback>
                            <p>Incorrect. Did you provide three <em>significant figures</em>?</p>
                        </feedback>
                    </condition>
                </var>
            </setup>
        </exercise>
    </exercises>

    <exercises xml:id="fill-in-exercises">
        <title>Fill-In Exercises</title>

        <introduction>
            <p>This section has <term>fill-in-the-blank</term> (<init>FITB</init>) exercises using newer syntax, and the subject of active development.</p>
        </introduction>

        <exercise label="fillin-numbers-many-tests">
            <title>Fill-In, New Markup Numbers</title>
            <statement>
                <p>I love <m>\pi</m>. What number am I thinking of, accurate to two decimal places?</p>
                <p><fillin width="5" answer="3.14"/></p>
            </statement>
            <evaluation>
                <evaluate>
                    <test correct="yes">
                        <numcmp use-answer="yes"/>
                        <feedback><p>The decimal approximation of <m>\pi</m> is <m>3.1415926535\ldots</m>, but to two decimal places we write <m>3.14</m>.</p></feedback>
                    </test>
                    <!-- Example B -->
                    <test>
                        <numcmp use-answer="yes" tolerance="0.1"/>
                        <feedback><p>Your answer is within 0.1 of the value I wanted.</p></feedback>
                    </test>
                    <!-- Example C -->
                    <test>
                        <numcmp value="42"/>
                        <feedback><p>That is a reasonable guess, but no.</p></feedback>
                    </test>
                    <!-- Example D -->
                    <test>
                        <numcmp min="3" max="4"/>
                        <feedback><p>You chose a value between 3 and 4.</p></feedback>
                    </test>
                    <!-- Example E -->
                    <test>
                        <numcmp value="3" tolerance="0.5"/>
                        <feedback><p>You chose a value that rounds to 3.</p></feedback>
                    </test>
                </evaluate>
            </evaluation>
        </exercise>

        <exercise label="fillin-strings-">
            <title>Fill-In, New Markup Strings</title>
            <statement>
                <p>The word I'm thinking about is hinted at by the image.</p>
                <p><image source="cartoon-magic.jpg" width="50%"/></p>
                <p>What word am I thinking about? <fillin width="5" answer="magic"/> (Interactive feedback explores a variety of options: Try what happens if you mix the case, or type in a number, or include more than the word, or try <q>pizzazz</q>.")</p>
            </statement>
            <evaluation>
                <evaluate>
                    <!-- Example A -->
                    <test correct="yes">
                        <strcmp use-answer="yes"/>
                    </test>
                    <!-- Example B -->
                    <test>
                        <strcmp use-answer="yes" case="insensitive"/>
                        <feedback><p>Some of the characters used the wrong case.</p></feedback>
                    </test>
                    <!-- Example C -->
                    <test>
                        <strcmp>[0-9]+</strcmp>
                        <feedback><p>You typed a word made out of digits.</p></feedback>
                    </test>
                    <!-- Example D -->
                    <test>
                        <strcmp use-answer="yes" strip="no"/>
                        <feedback><p>Your answer includes the correct word but has extra text.</p></feedback>
                    </test>
                    <!-- Example E -->
                    <test>
                        <strcmp strip="no" case="insensitive">z.+z</strcmp>
                        <feedback><p>Your answer includes text surrounded by z's.</p></feedback>
                    </test>
                </evaluate>
            </evaluation>
            <hint><p>Do you really need a hint? Carefully reread the question.</p></hint>
        </exercise>

        <exercise label="ex-demo-jscmp-primes">
            <title>Fill-In, Javascript test of numbers</title>
            <statement>
                <p>What is an example of a prime number less than 20? <fillin width="5" answer="13"/></p>
            </statement>
            <evaluation>
                <evaluate>
                    <test correct="yes">
                        <jscmp><!-- test if number is in a list -->
                        [2, 3, 5, 7, 11, 13, 17, 19].includes(Number(ans))
                        </jscmp>
                        <feedback><p>Any number from the list <m>\{2, 3, 5, 7, 11, 13, 17, 19\}</m> is a prime number less than 20.</p></feedback>
                    </test>
                    <test>
                        <jscmp><!-- find why it fails to be in list --><![CDATA[
                        function(){
                        const val=Number(ans);
                        if (val <= 0) { return "You need to give a positive integer." }
                        if (val >= 20) { return "The integer must be less than 20." }
                        for (let i=2; i<=3; i++) {
                            if (val % i == 0) { return `Your answer is composite; for example, it is divisible by ${i}.` }
                        }
                        return false;
                        }()]]>
                        </jscmp>
                    </test>
                </evaluate>
            </evaluation>
        </exercise>

        <exercise label="fillin-jscmp-palindrome">
            <title>Fill-In, Javascript test of strings</title>
            <statement>
                <p>What is an example of a palindrome? <fillin width="5" answer="radar"/></p>
            </statement>
            <evaluation>
                <evaluate>
                    <test correct="yes">
                        <jscmp><!-- test if string is palindrome -->
                        function(){
                            const r1 = new RegExp("^\\w+$");
                            var result=r1.test(ans);
                            if (result) {
                            let revAns = ans.split("").reverse().join("");
                            result = (ans === revAns);
                            }
                            return result;
                        }()
                        </jscmp>
                        <feedback><p>Any word that is the same forward and backward is a palindrome.</p></feedback>
                    </test>
                    <test>
                        <strcmp strip="no">\w+\s\w+</strcmp>
                        <feedback><p>Your response needs to be a single word.</p></feedback>
                    </test>
                </evaluate>
            </evaluation>
        </exercise>

        <exercise label="fillin-random-simple">
            <title>Fill-In, Simple Randomization with Numbers</title>
            <statement>
                <p>What is the square of <m>x=<eval obj="myNum"/></m>? <m>x^2=</m><fillin width="5" mode="number" ansobj="mySquare"/></p>
            </statement>
            <setup seed="1234">
                <setupScript>
                v.myNum=RNG.randDiscrete(2, 12, 1);
                v.mySquare=v.myNum**2;
                </setupScript>
            </setup>
            <evaluation>
                <evaluate>
                    <test correct="yes">
                        <numcmp use-answer="yes"/>
                    </test>
                    <test>
                        <numcmp object="myNum"/>
                        <feedback><p>You responded with the original number. Now square it.</p></feedback>
                    </test>
                </evaluate>
            </evaluation>
        </exercise>

        <exercise label="fillin-math-solve-equation">
            <title>Fill-In, Dynamic Math with Simple Numerical Answer</title>
            <statement>
                <p>Solve the equation <me><eval obj="theFunction"/>=0</me> to get the value of <m>x</m>.</p>
                <p><m>x = </m> <fillin width="5" mode="math" ansobj="theAnswer"/></p>
            </statement>
            <solution>
                <p>We want to isolate the <m>x</m> in the equation <m><eval obj="theFunction"/>=0</m>. Because addition of <m><eval obj="b"/></m> is the last operation, we apply the inverse by adding <m><eval obj="negB"/></m> to both sides. The new, but equivalent equation is now <m><eval obj="m"/>x = <eval obj="negB"/></m>. Dividing both sides of the equation by <m><eval obj="m"/></m>, we obtain the solution <m>x=<eval obj="theAnswer"/></m>.</p>
            </solution>
            <setup seed="12345">
                <de-object name="m" context="number">
                    <de-random distribution="discrete" nonzero="yes" min="-4" max="5" by="1" />
                </de-object>
                <de-object name="b" context="number">
                    <de-random distribution="discrete" min="-10" max="10" />
                </de-object>
                <de-object name="negB" context="number">
                    <de-number reduce="yes">-b</de-number>
                </de-object>
                <de-object name="theFunction" context="formula">
                    <de-expression mode="formula" reduce="yes">m*x+b</de-expression>
                </de-object>
                <de-object name="theAnswer" context="formula">
                    <de-expression mode="formula" reduce="yes">-b/m</de-expression>
                </de-object>
            </setup>
            <evaluation>
                <evaluate>
                    <test correct="yes">
                        <mathcmp use-answer="yes" />
                    </test>
                    <test>
                        <de-expression mode="formula">{{b}}/{{m}}</de-expression>
                        <feedback>Check for a sign error while isolating <m>x</m>.</feedback>
                    </test>
                </evaluate>
            </evaluation>
        </exercise>

        <exercise label="fillin-math-find-derivatives">
            <title>Fill-In, Dynamic Math with Formulas as Answers</title>
            <statement>
                <p>Consider the function <m>f(x)=<eval obj="formula"/></m>. Find <m>f'(x)</m> and <m>f''(x)</m>.</p>
                <p><m>f'(x) = </m> <fillin mode="math" width="15" ansobj="correctD1" name="firstD"/> and <m>f''(x)=</m> <fillin mode="math" width="15" ansobj="correctD2" name="secondD"/></p>
            </statement>
            <solution>
                <p>The derivative of a constant is zero, so <m>\frac{d}{dx}[<eval obj="b"/>]=0</m>. The term <m>x^{<eval obj="n"/>}</m> is a power, so the power rule gives us <m>\frac{d}{dx}[x^{<eval obj="n"/>}]=<eval obj="n"/>x^{<eval obj="nm1"/>}</m>. Putting this together, we find <m>f'(x)=<eval obj="correctD1"/></m>. Applying the power rule a second time, we find <m>f''(x)=<eval obj="correctD2"/></m>.</p>
            </solution>
            <setup seed="1234">
                <de-object name="a" context="number">
                    <de-random distribution="discrete" min="-4" max="5" by="1" nonzero="yes"/>
                </de-object>
                <de-object name="n" context="number">
                    <de-random distribution="discrete" min="2" max="5"/>
                </de-object>
                <de-object name="nm1" context="number">
                    <de-number reduce="yes">n-1</de-number>
                </de-object>
                <de-object name="nm2" context="number">
                    <de-number reduce="yes">n-2</de-number>
                </de-object>
                <de-object name="b" context="number">
                    <de-random distribution="discrete" min="-10" max="10" nonzero="yes"/>
                </de-object>
                <de-object name="formula" context="formula">
                    <de-expression mode="formula">a*x^n+b</de-expression>
                </de-object>
                <de-object name="correctD1" context="formula">
                    <de-expression mode="derivative" reduce="yes">
                    <formula><eval obj="formula"/></formula>
                    <variable name="x"/>
                    </de-expression>
                </de-object>
                <de-object name="correctD2" context="formula">
                    <de-expression mode="derivative" reduce="yes">
                        <formula><eval obj="correctD1"/></formula>
                        <variable name="x"/>
                    </de-expression>
                </de-object>
            </setup>
            <evaluation>
                <evaluate submit="firstD">
                    <test correct="yes">
                        <mathcmp use-answer="yes"/>
                    </test>
                    <test>
                        <mathcmp obj="correctD2"/>
                        <feedback><p>You confused which derivative is which.</p></feedback>
                    </test>
                </evaluate>
                <evaluate submit="secondD">
                    <test correct="yes">
                        <mathcmp use-answer="yes"/>
                    </test>
                    <test>
                        <eval obj="correctD1"/>
                        <feedback><p>You confused which derivative is which.</p></feedback>
                    </test>
                </evaluate>
            </evaluation>
        </exercise>

        <exercise label="fillin-math-decompose-function">
            <title>Fill-In, Dynamic Math with Interdependent Formula Checking</title>
            <statement>
                <p>Consider the function <me>h(x)=<eval obj="composition"/></me>. Find two nontrivial functions <m>f(x)</m> and <m>g(x)</m> so that <m>h(x) = f(g(x))</m>.</p>
                <p><m>f(x) = </m> <fillin mode="math" width="15" ansobj="outerFormula" name="fGiven"/> and <m>g(x)=</m> <fillin mode="math" width="15" ansobj="innerFormula" name="gGiven"/></p>
            </statement>
            <solution>
                <p>Noticing that the expression <m><eval obj="innerFormula"/></m> appears inside parentheses with a power, it makes sense to think of that as the inner function, defining <m>g(x) = <eval obj="innerFormula"/></m>. The outer function describes what happens to that. If we imagined replacing the formula <m><eval obj="innerFormula"/></m> with a box and then call that box our variable <m>x</m>, we find the outer function is given by <m>f(x) = <eval obj="outerFormula"/></m>.</p>
                <p>This is not the only non-trivial composition. Can you find others?</p>
            </solution>
            <setup seed="4321">
                <de-object name="a" context="number">
                    <de-random distribution="discrete" min="-4" max="5" by="1" nonzero="yes" />
                </de-object>
                <de-object name="n" context="number">
                    <de-random distribution="discrete" min="2" max="5" />
                </de-object>
                <de-object name="b" context="number">
                    <de-random distribution="discrete" min="-10" max="10" by="1" nonzero="yes" />
                </de-object>
                <de-object name="c" context="number">
                    <de-random distribution="discrete" min="-4" max="5" by="1" nonzero="yes" />
                </de-object>
                <de-object name="d" context="number">
                    <de-random distribution="discrete" min="-10" max="10" by="1" nonzero="yes" />
                </de-object>
                <de-object name="outerFormula" context="formula">
                    <de-expression mode="formula" reduce="yes">a*x^n+b</de-expression>
                </de-object>
                <de-object name="innerFormula" context="formula">
                    <de-expression mode="formula" reduce="yes">c*x+d</de-expression>
                </de-object>
                <de-object name="identityFunction" context="formula">
                    <de-expression mode="formula">x</de-expression>
                </de-object>
                <de-object name="composition" context="formula" reduce="yes">
                    <de-expression mode="substitution">
                        <formula><eval obj="outerFormula"/></formula>
                        <variable name="x"><eval obj="innerFormula"/></variable>
                    </de-expression>
                </de-object>
            </setup>
            <evaluation answers-coupled="yes">
                <evaluate name="fGiven">
                    <test>
                        <eval obj="identityFunction"/>
                        <feedback><p><m>f(x)=x</m> is not allowed for nontrivial compositions.</p></feedback>
                    </test>
                    <test>
                        <logic op="not">
                            <mathcmp>
                                <eval obj="composition"/>
                                <de-expression context="formula" mode="substitution">
                                    <formula><eval obj="fGiven"/></formula>
                                    <variable name="x"><eval obj="gGiven"/></variable>
                                </de-expression>
                            </mathcmp>
                        </logic>
                        <mathcmp>
                            <eval obj="composition"/>
                            <de-expression context="formula" mode="substitution">
                                <formula><eval obj="gGiven"/></formula>
                                <variable name="x"><eval obj="fGiven"/></variable>
                            </de-expression>
                        </mathcmp>
                        <feedback><p>You have composed in the wrong order.</p></feedback>
                    </test>
                </evaluate>
                <evaluate name="gGiven">
                    <test>
                        <eval obj="identityFunction"/>
                        <feedback><m>g(x)=x</m> is not allowed for nontrivial compositions.</feedback>
                    </test>
                </evaluate>
                <evaluate all="yes">
                    <test correct="yes">
                        <mathcmp>
                            <eval obj="composition"/>
                            <de-expression context="formula" mode="substitution">
                                <formula><eval obj="fGiven"/></formula>
                                <variable name="x"><eval obj="gGiven"/></variable>
                            </de-expression>
                        </mathcmp>
                        <logic op="not">
                            <mathcmp>
                                <eval obj="fGiven"/>
                                <eval obj="identityFunction"/>
                            </mathcmp>
                        </logic>
                        <logic op="not">
                            <mathcmp>
                                <eval obj="gGiven"/>
                                <eval obj="identityFunction"/>
                            </mathcmp>
                        </logic>
                    </test>
                </evaluate>
            </evaluation>
        </exercise>
    </exercises>

    <exercises xml:id="runestone-hodgepodge">
        <title>Hodgepodge</title>

        <exercise label="multifile-program-2">
            <statement>
                <p>This is a test of accessing program resources across pages by relying on what is in the database.</p>
            </statement>

            <program interactive="activecode" add-files="addh-v1 addcpp-v1" compile-also="addcpp-v1" language="cpp" include-source="yes">
                <![CDATA[
                #include "add.h"
                #include <iostream>
                using namespace std;
                int main() {
                    int a = 1;
                    int b = 2;
                    cout << "The sum of " << a << " and " << b << " is " << add(a, b) << endl;
                }]]>
            </program>
        </exercise>

        <exercise label="true-false-exercise-with-tasks-in-exercises">
            <title>With Tasks in an Exercises Division</title>
            <introduction>
                <p>Structured with task, recycled earlier from earlier, to make sure that the tasks do not get counted as Runestone reading activities (since they are inside an <tag>exercise</tag> inside of an <tag>exercises</tag> division.</p>
            </introduction>

            <task label="true-false-task-in-exercises">
                <title>True/False</title>
                <idx>vector space</idx>
                <statement correct="no">
                    <p>Every vector space has finite dimension.</p>
                </statement>
                <feedback>
                    <p>The vector space of all polynomials with finite degree has a basis, <m>B = \{1,x,x^2,x^3,\dots\}</m>, which is infinte.</p>
                </feedback>
                <hint>
                    <p><m>P_n</m>, the vector space of polynomials with degree at most <m>n</m>, has dimension <m>n+1</m> by <xref ref="theorem-exponent-laws"/>.  [Cross-reference is just a demo, content is not relevant.]  What happens if we relax the defintion and remove the parameter <m>n</m>?</p>
                </hint>
            </task>

            <task label="short-answer-task-in-exercises">
                <statement>
                    <p>Explain your reasoning in the previous question.</p>
                </statement>
                <response/>
            </task>

            <conclusion>
                <p>A sequence of <tag>task</tag> can have a <tag>conclusion</tag>, like this one, even if they do not see much use in practice.</p>
            </conclusion>
        </exercise>
    </exercises>

    <section xml:id="exercises-timed">
        <title>Exercises that are Timed</title>

        <p>This is a section that merely explains and holds an <tag>exercises</tag> division, which will be at the level of a <tag>subsection</tag>.  There is a <attr>time-limit</attr> attribute on <tag>exercises</tag>, set to the value <c>10</c>, which implies (a) the collection of (two) exercises is a <q>timed exam</q> when hosted on Runestone, and (b) a student will have 10 minutes to complete the collection.</p>

        <p>Showing results, showing feedback, displaying a timer, and allowing pausing are all enabled by default.  To disable any of these features, set the corresponding attributes on the <tag>exercises</tag> division, <attr>results</attr>, <attr>feedback</attr>, <attr>timer</attr>, <attr>pause</attr>, to the value <c>no</c>.  As a test, we have turned off pausing.  Don't panic!</p>

        <p>Of course, if you are not viewing this while online and hosted on a Runestone server, then these exercises will not look any different than in other places.</p>

        <p>(Since this is an unstructured division, the number of the <tag>exercises</tag> is not displayed when born.  It does <em>have</em> a number, which is the same as the enclosing <tag>section</tag>.  To wit: <xref ref="exercises-timed"/> versus <xref ref="timing-exercises"/>.)</p>

        <p>If you prefer that a given <tag>section</tag> has more than one <tag>exercises</tag> within it (timed or not), realize that you must then structure your <tag>section</tag> with a ssequence of <tag>subsection</tag> as peers of the multiple <tag>exercises</tag> you desire.</p>

        <exercises xml:id="timing-exercises" label="timed-exercises" time-limit="10" pause="no">
            <title>Timed Exercises</title>

            <introduction>
                <p>You have 10 minutes to do these exercises when hosted online on a Runestone server.</p>
            </introduction>

            <exercise label="vector-space-dimension-timed">
                <title>True/False</title>
                <idx>vector space</idx>
                <statement correct="no">
                    <p>Every vector space has finite dimension.</p>
                </statement>
                <feedback>
                    <p>The vector space of all polynomials with finite degree has a basis, <m>B = \{1,x,x^2,x^3,\dots\}</m>, which is infinte.</p>
                </feedback>
                <hint>
                    <p><m>P_n</m>, the vector space of polynomials with degree at most <m>n</m>, has dimension <m>n+1</m> by <xref ref="theorem-exponent-laws"/>.  [Cross-reference is just a demo, content is not relevant.]  What happens if we relax the defintion and remove the parameter <m>n</m>?</p>
                </hint>
            </exercise>

            <exercise label="multiple-choice-not-randomized-timed">
                <title>Multiple-Choice, Not Randomized, One Answer</title>
                <idx>stop signs</idx>
                <statement>
                    <p>What color is a stop sign?</p>
                </statement>
                <!-- to appear as problem with potentially multiple correct -->
                <!-- answers (even though there is only one), use           -->
                <!--                                                        -->
                <!--     <choices multiple-correct="yes">                   -->
                <!--                                                        -->
                <choices>
                    <choice>
                        <statement>
                            <p>Green</p>
                        </statement>
                        <feedback>
                            <p>Green means <q>go!</q>.</p>
                        </feedback>
                    </choice>
                    <choice correct="yes">
                        <statement>
                            <p>Red</p>
                        </statement>
                        <feedback>
                            <p>Red is universally used for prohibited activities or serious warnings.</p>
                        </feedback>
                    </choice>
                    <choice>
                        <statement>
                            <p>White</p>
                        </statement>
                        <feedback>
                            <p>White might be hard to see.</p>
                        </feedback>
                    </choice>
                </choices>
                <hint>
                    <p>What did you see last time you went driving?</p>
                </hint>
                <hint>
                    <p>Maybe go out for a drive?</p>
                </hint>
            </exercise>
        </exercises>
    </section>

    <section xml:id="interactive-projects">
        <title>Projects and Friends</title>

        <p><q>PROJECT-LIKE</q> refers to the elements/blocks <tag>project</tag>, <tag>activity</tag>, <tag>activity</tag>, and <tag>exploration</tag>.  They are very similar to <tag>exercise</tag>, and here we stress that they can be interactive in all the same ways an <tag>exercise</tag> can.  Key differences are that they are blocks, and so are peers of other blocks like paragraphs and examples, and are children of divisions.  By default they have their own numbering scheme, though we expect this to convert to an elective behavior.</p>

        <p>Both <tag>exercise</tag> and PROJECT-LIKE can be structured with <tag>task</tag>.  It would be natural to have a <tag>project</tag> with multiple <tag>task</tag>, each a possibly different interactive problem type.  We expect that to be possible soon.  For now, <tag>exercise</tag> and <tag>project</tag> (and friends) need to be structured with a <tag>statement</tag> (and their associated signal) in order to be interactive.</p>

        <activity label="activity-multiple-choice-multiple-answers">
            <title>Multiple-Choice, Not Randomized, Multiple Answers</title>
            <idx>stop signs</idx>
            <statement>
                <p>Which colors might be found in a rainbow?  (Note that the radio buttons now allow multiple buttons to be selected.)</p>
            </statement>
            <choices>
                <choice correct="yes">
                    <statement>
                        <p>Red</p>
                    </statement>
                    <feedback>
                        <p>Red is a definitely one of the colors.</p>
                    </feedback>
                </choice>
                <choice correct="yes">
                    <statement>
                        <p>Yellow</p>
                    </statement>
                    <feedback>
                        <p>Yes, yellow is correct.</p>
                    </feedback>
                </choice>
                <choice>
                    <statement>
                        <p>Black</p>
                    </statement>
                    <feedback>
                        <p>Remember the acronym<ellipsis/><acro>ROY G BIV</acro>.  <q>B</q> stands for blue.</p>
                    </feedback>
                </choice>
                <choice correct="yes">
                    <statement>
                        <p>Green</p>
                    </statement>
                    <feedback>
                        <p>Yes, green is one of the colors.</p>
                    </feedback>
                </choice>
            </choices>
            <hint>
                <p>Do you know the acronym<ellipsis/><acro>ROY G BIV</acro> for the colors of a rainbow, and their order?</p>
            </hint>
        </activity>

        <p>Now an <tag>exercise</tag> with three <tag>task</tag>.  Since the middle one is a short-answer question, it will only be interactive on a capable platform.</p>

        <exercise label="true-false-exercise-with-tasks">
            <title>True/False and Explain</title>
            <introduction>
                <p>Structured with <tag>task</tag>, we can have an <tag>introduction</tag>.  If you are viewing this <tag>exercise</tag> in the Runestone assignment builder, you will notice that each of these three <tag>task</tag> appears as its own problem and therefore each one gets its own copy of this <tag>introduction</tag> you are reading right now.</p>
            </introduction>

            <task label="true-false-task">
                <title>True/False</title>
                <idx>vector space</idx>
                <statement correct="no">
                    <p>Every vector space has finite dimension.</p>
                </statement>
                <feedback>
                    <p>The vector space of all polynomials with finite degree has a basis, <m>B = \{1,x,x^2,x^3,\dots\}</m>, which is infinte.</p>
                </feedback>
                <hint>
                    <p><m>P_n</m>, the vector space of polynomials with degree at most <m>n</m>, has dimension <m>n+1</m> by <xref ref="theorem-exponent-laws"/>.  [Cross-reference is just a demo, content is not relevant.]  What happens if we relax the defintion and remove the parameter <m>n</m>?</p>
                </hint>
            </task>

            <task label="short-answer-task">
                <statement>
                    <p>Explain your reasoning in the previous question.</p>
                </statement>
                <response/>
            </task>

            <task label="matching-task">
                <title>Matching Problem, Dates</title>
                <idx>matching US dates</idx>
                <statement>
                    <p>Match each event in United States history with the year it happened. (We are recycling this to test the static representation of a matching problem authored inside of <tag>task</tag>.)</p>
                </statement>
                <feedback>
                    <p>Review <url href="https://www.britannica.com/list/25-decade-defining-events-in-us-history" visual="www.britannica.com/list/25-decade-defining-events-in-us-history">Encyclopedia Brittania, 25 Decade-Defining Events in U.S. History</url> url.</p>
                </feedback>
                <cardsort>
                    <match>
                        <premise order="4">Monroe Doctrine</premise>
                        <response>1823</response>
                    </match>
                    <match>
                        <premise order="3">Haymarket Riot</premise>
                        <response>1886</response>
                    </match>
                    <match>
                        <premise order="1">Louisiana Purchase</premise>
                        <response>1803</response>
                    </match>
                    <match>
                        <premise order="2">Battle of Gettysburg</premise>
                        <response>1863</response>
                    </match>
                </cardsort>
            </task>

            <conclusion>
                <p>A <tag>conclusion</tag> is possible and will be replicated after each of the three <tag>task</tag> when they are viewed individually in the Runestone assignment builder.</p>
            </conclusion>
        </exercise>

        <p>Now an <tag>exploration</tag> nested two-deep with <em>the same two questions</em>, two times each, just for testing purposes.</p>

        <exploration label="exploration-two-deep">
            <title>Exploring Two-Deep</title>

            <introduction>
                <p>This is a top-level introduction.</p>
            </introduction>

            <task>
                <title>First Iterations of Each</title>

                <introduction>
                    <p>This is an introduction to the first iterations, at the second level.</p>
                </introduction>

                <task label="task-multiple-choice-first">
                    <title>Multiple-Choice, Not Randomized, One Answer (First Copy)</title>
                    <idx>stop signs</idx>
                    <statement>
                        <p>What color is a stop sign?</p>
                    </statement>
                    <choices>
                        <choice>
                            <statement>
                                <p>Green</p>
                            </statement>
                            <feedback>
                                <p>Green means <q>go!</q>.</p>
                            </feedback>
                        </choice>
                        <choice correct="yes">
                            <statement>
                                <p>Red</p>
                            </statement>
                            <feedback>
                                <p>Red is universally used for prohibited activities or serious warnings.</p>
                            </feedback>
                        </choice>
                        <choice>
                            <statement>
                                <p>White</p>
                            </statement>
                            <feedback>
                                <p>White might be hard to see.</p>
                            </feedback>
                        </choice>
                    </choices>
                    <hint>
                        <p>What did you see last time you went driving?</p>
                    </hint>
                    <hint>
                        <p>Maybe go out for a drive?</p>
                    </hint>
                </task>

                <task label="task-active-code-first">
                    <title>Python ActiveCode (First Copy)</title>
                    <statement>
                        <p>Run the following program and observe the information provided at each step.</p>
                    </statement>
                    <program label="python-active-code-first" interactive="activecode" language="python">
                        <code>
                        for i in range(10):
                            print(i)
                        </code>
                    </program>
                    <answer><p>We're still not really sure.</p></answer>
                </task>

                <conclusion>
                    <p>We include a conclusion to the first iterations, at the second level (with no conclusion at the top-level).</p>
                </conclusion>
            </task>

            <task>
                <title>Second Iterations of Each</title>

                <introduction>
                    <p>This is an introduction to the second iterations, at the second level.</p>
                </introduction>

                <task label="task-multiple-choice-second">
                    <title>Multiple-Choice, Not Randomized, One Answer (Second Copy)</title>
                    <idx>stop signs</idx>
                    <statement>
                        <p>What color is a stop sign?</p>
                        <p>We include a spurious Python <tag>program</tag> element in the <tag>statement</tag> which should never convert this from a multiple-choice question into a programming exercise (on any host), but should still get syntax highlighting as part of rendering the exercise.</p>
                        <program xml:id="python-in-statement" language="python">
                            <code>
                            sum = 0
                            sum += 6
                            for i in range(sum):
                                print("Hello, World!")
                            </code>
                        </program>
                    </statement>
                    <choices>
                        <choice>
                            <statement>
                                <p>Green</p>
                            </statement>
                            <feedback>
                                <p>Green means <q>go!</q>.</p>
                            </feedback>
                        </choice>
                        <choice correct="yes">
                            <statement>
                                <p>Red</p>
                            </statement>
                            <feedback>
                                <p>Red is universally used for prohibited activities or serious warnings.</p>
                            </feedback>
                        </choice>
                        <choice>
                            <statement>
                                <p>White</p>
                            </statement>
                            <feedback>
                                <p>White might be hard to see.</p>
                            </feedback>
                        </choice>
                    </choices>
                    <hint>
                        <p>What did you see last time you went driving?</p>
                    </hint>
                    <hint>
                        <p>Maybe go out for a drive?</p>
                    </hint>
                </task>

                <task label="task-active-code-second">
                    <title>Python ActiveCode (Second Copy)</title>
                    <statement>
                        <p>Run the following program and observe the information provided at each step.</p>
                    </statement>
                    <program label="python-active-code-second" interactive="activecode" language="python">
                        <code>
                        for i in range(10):
                            print(i)
                        </code>
                    </program>
                    <answer><p>We're still not really sure.</p></answer>
                </task>

                <conclusion>
                    <p>We include a conclusion to the first iterations, at the second level (with no conclusion at the top-level).</p>
                </conclusion>
            </task>
            <!-- An overall conclusion would go here, which we omit for testing purposes -->
        </exploration>

        <p>This is an <tag>exercise</tag> which has been structured deeply with <tag>task</tag>.  It is here to allow for testing a tabbed viewer presentation in online outputs.</p>

        <exercise xml:id="exercise-structured" label="very-structured-exercise">
            <title>A very structured exercise</title>

            <introduction>
                <p>This is an over-arching introduction to the whole exercise.  We follow with some tasks.  In interdum suscipit ullamcorper. Morbi sit amet malesuada augue, id vestibulum magna. Nulla blandit dui metus, malesuada mollis sapien ullamcorper sit amet. Nulla at neque nisi. Integer vel porta felis.</p>
            </introduction>

            <task>
                <title>A super-simple task</title>
                <p>This first task is very simple, just a paragraph.  In interdum suscipit ullamcorper. Morbi sit amet malesuada augue, id vestibulum magna. Nulla blandit dui metus, malesuada mollis sapien ullamcorper sit amet. Nulla at neque nisi. Integer vel porta felis.</p>
            </task>

            <task>
                <p>Now three paragraphs.  In interdum suscipit ullamcorper. Morbi sit amet malesuada augue, id vestibulum magna. Nulla blandit dui metus, malesuada mollis sapien ullamcorper sit amet. Nulla at neque nisi. Integer vel porta felis.</p>
                <p>In interdum suscipit ullamcorper. Morbi sit amet malesuada augue, id vestibulum magna. Nulla blandit dui metus, malesuada mollis sapien ullamcorper sit amet. Nulla at neque nisi. Integer vel porta felis.</p>
                <p>In interdum suscipit ullamcorper. Morbi sit amet malesuada augue, id vestibulum magna. Nulla blandit dui metus, malesuada mollis sapien ullamcorper sit amet. Nulla at neque nisi. Integer vel porta felis.</p>
            </task>

            <task>
                <title>A title of a task that has a subtask with an <tag>answer</tag> for the Solutions</title>
                <introduction>
                    <p>This second task is further divided by more tasks.  This is its introduction.  In interdum suscipit ullamcorper. Morbi sit amet malesuada augue, id vestibulum magna. Nulla blandit dui metus, malesuada mollis sapien ullamcorper sit amet. Nulla at neque nisi. Integer vel porta felis.</p>
                    <p>In interdum suscipit ullamcorper. Morbi sit amet malesuada augue, id vestibulum magna. Nulla blandit dui metus, malesuada mollis sapien ullamcorper sit amet. Nulla at neque nisi. Integer vel porta felis.</p>
                </introduction>
                <task>
                    <title>A task with a title and an <tag>answer</tag> for the Solutions</title>
                    <statement>
                        <p>A really simple subtask.  In interdum suscipit ullamcorper. Morbi sit amet malesuada augue, id vestibulum magna. Nulla blandit dui metus, malesuada mollis sapien ullamcorper sit amet. Nulla at neque nisi. Integer vel porta felis.</p>
                        <p>A short paragraph, before an answer.</p>
                    </statement>
                    <answer>
                        <p>With a proof.</p>
                        <proof>
                            <p>In interdum suscipit ullamcorper. Morbi sit amet malesuada augue, id vestibulum magna. Nulla blandit dui metus, malesuada mollis sapien ullamcorper sit amet. Nulla at neque nisi. Integer vel porta felis.</p>
                        </proof>
                        <p>And a bit more to say.</p>
                    </answer>
                </task>
                <task>
                    <statement>
                        <p>A subtask with an answer.  In interdum suscipit ullamcorper. Morbi sit amet malesuada augue, id vestibulum magna. Nulla blandit dui metus, malesuada mollis sapien ullamcorper sit amet. Nulla at neque nisi. Integer vel porta felis.</p>
                    </statement>
                    <answer>
                        <p>Right!  In interdum suscipit ullamcorper. Morbi sit amet malesuada augue, id vestibulum magna. Nulla blandit dui metus, malesuada mollis sapien ullamcorper sit amet. Nulla at neque nisi. Integer vel porta felis.</p>
                    </answer>
                </task>
                <task>
                    <introduction>
                        <p>Three simple sub-sub-tasks.  In interdum suscipit ullamcorper. Morbi sit amet malesuada augue, id vestibulum magna. Nulla blandit dui metus, malesuada mollis sapien ullamcorper sit amet. Nulla at neque nisi. Integer vel porta felis.</p>
                    </introduction>
                    <task>
                        <p>First subsubtask.  Short paragraph.</p>
                    </task>
                    <task>
                        <title>A second three-deep subsubtask!</title>
                        <p>Second subsubtask.  In interdum suscipit ullamcorper. Morbi sit amet malesuada augue, id vestibulum magna. Nulla blandit dui metus, malesuada mollis sapien ullamcorper sit amet. Nulla at neque nisi. Integer vel porta felis.</p>
                        <p>In interdum suscipit ullamcorper. Morbi sit amet malesuada augue, id vestibulum magna. Nulla blandit dui metus, malesuada mollis sapien ullamcorper sit amet. Nulla at neque nisi. Integer vel porta felis.</p>
                    </task>
                    <task>
                        <p>Third subsubtask.  In interdum suscipit ullamcorper. Morbi sit amet malesuada augue, id vestibulum magna. Nulla blandit dui metus, malesuada mollis sapien ullamcorper sit amet. Nulla at neque nisi. Integer vel porta felis.</p>
                        <p>In interdum suscipit ullamcorper</p>
                        <p>In interdum suscipit ullamcorper. Morbi sit amet malesuada augue, id vestibulum magna. Nulla blandit dui metus, malesuada mollis sapien ullamcorper sit amet. Nulla at neque nisi. Integer vel porta felis.</p>
                    </task>
                    <conclusion>
                        <p>The conclusion of the structured subtask.  In interdum suscipit ullamcorper. Morbi sit amet malesuada augue, id vestibulum magna. Nulla blandit dui metus, malesuada mollis sapien ullamcorper sit amet. Nulla at neque nisi. Integer vel porta felis.</p>
                    </conclusion>
                </task>
                <task>
                    <p>A simple task as the last subtask.  In interdum suscipit ullamcorper. Morbi sit amet malesuada augue, id vestibulum magna. Nulla blandit dui metus, malesuada mollis sapien ullamcorper sit amet. Nulla at neque nisi. Integer vel porta felis.</p>
                </task>
                <conclusion>
                    <p>This concludes our structured second task.  In interdum suscipit ullamcorper. Morbi sit amet malesuada augue, id vestibulum magna. Nulla blandit dui metus, malesuada mollis sapien ullamcorper sit amet. Nulla at neque nisi. Integer vel porta felis.</p>
                </conclusion>
            </task>

            <task>
                <statement>
                    <p>This third top-level task is intermediate in complexity, you are reading the <c>statement</c>, which is followed by more items. In interdum suscipit ullamcorper. Morbi sit amet malesuada augue, id vestibulum magna. Nulla blandit dui metus, malesuada mollis sapien ullamcorper sit amet. Nulla at neque nisi. Integer vel porta felis.</p>
                </statement>
                <hint>
                    <p>One hint.  In interdum suscipit ullamcorper. Morbi sit amet malesuada augue, id vestibulum magna. Nulla blandit dui metus, malesuada mollis sapien ullamcorper sit amet. Nulla at neque nisi. Integer vel porta felis.</p>
                    <p>In interdum suscipit ullamcorper. Morbi sit amet malesuada augue, id vestibulum magna. Nulla blandit dui metus, malesuada mollis sapien ullamcorper sit amet. Nulla at neque nisi. Integer vel porta felis.</p>
                </hint>
                <answer>
                    <p>First answer.  In interdum suscipit ullamcorper.</p>
                </answer>
                <answer>
                    <p>Second answer.  In interdum suscipit ullamcorper. Morbi sit amet malesuada augue, id vestibulum magna. Nulla blandit dui metus, malesuada mollis sapien ullamcorper sit amet. Nulla at neque nisi. Integer vel porta felis.</p>
                    <p>In interdum suscipit ullamcorper. Morbi sit amet malesuada augue, id vestibulum magna. Nulla blandit dui metus, malesuada mollis sapien ullamcorper sit amet. Nulla at neque nisi. Integer vel porta felis.</p>
                    <p>In interdum suscipit ullamcorper. Morbi sit amet malesuada augue, id vestibulum magna. Nulla blandit dui metus, malesuada mollis sapien ullamcorper sit amet. Nulla at neque nisi. Integer vel porta felis.</p>
                </answer>
                <solution>
                    <p>At last, the solution.  In interdum suscipit ullamcorper. Morbi sit amet malesuada augue, id vestibulum magna. Nulla blandit dui metus, malesuada mollis sapien ullamcorper sit amet. Nulla at neque nisi. Integer vel porta felis.</p>
                </solution>
            </task>

            <conclusion>
                <p>This is a conclusion where you could summarize the exercise.  In interdum suscipit ullamcorper. Morbi sit amet malesuada augue, id vestibulum magna. Nulla blandit dui metus, malesuada mollis sapien ullamcorper sit amet. Nulla at neque nisi. Integer vel porta felis.</p>
            </conclusion>
        </exercise>
    </section>

    <reading-questions>

        <exercise label="simple-reading-question">
            <statement>
                <p>This is a simple question.  Does this look like a short answer question?</p>
                <p>Both questions in this <q>reading-questions</q> division should render in an interactive <q>short answer</q> form on a capable platform.</p>
            </statement>
            <response/>
            <hint>
                <p>Shouldn't be hard!</p>
            </hint>
        </exercise>

        <exercise label="second-reading-question" attachment="yes">
            <statement>
                <p>And a second reading question, so we can test having more than one.  Specifically to be certain each goes into the manifest properly.  How about some math now, <m>a^2+b^2=c^2</m>.  Is that all right?</p>
            </statement>
            <response/>
        </exercise>
    </reading-questions>

    <section xml:id="atomic-video">
        <title>YouTube Video Embedding</title>

        <p>An <tag>video</tag> can be placed in five different ways:<ol>
            <li>all by itself, as a peer of <tag>p</tag> typically, with layout control,</li>
            <li>inside a <tag>figure</tag>, earning a number and caption,</li>
            <li>inside a <tag>sidebyside</tag>, with size and layout configured,</li>
            <li>inside a <tag>figure</tag> inside a <tag>sidebyside</tag>, with size and layout configured, with a number and caption, and</li>
            <li>inside a <tag>figure</tag> inside a <tag>sidebyside</tag> inside a <tag>figure</tag>, with size and layout configured, with a number and caption, but now sub-numbered ((a), (b), (c),<ellipsis/>).</li>
        </ol>Examples of each, and more.</p>

        <p>A YouTube video is embedded much differently when hosted on a Runestone server, so that an <init>API</init> is available to report reader (student) interactions.  We are testing here the various possibilities.</p>



        <p>All by itsef, with no layout specified, so showing the default size and placement.  Vivamus in congue massa. Morbi condimentum ac magna at accumsan. Vestibulum ac augue eu lorem semper gravida.</p>

        <video xml:id="yt-list-vars-one" label="youtube-list-vars-one" youtube="X1-UNHUajfk"/>

        <p>Width set at 40%, so equal margins and thus centered.  Aenean faucibus augue tellus, et sollicitudin tortor finibus non. Maecenas semper dolor quis diam placerat, iaculis sollicitudin augue finibus. Vestibulum facilisis ligula lectus, ac tristique nisl aliquet non.</p>

        <video xml:id="yt-list-vars-two" label="youtube-list-vars-two" youtube="X1-UNHUajfk" width="40%"/>

        <p>Asymmetric margins of 20% and 40% given, implying 40% width, equal to previous instance.  Vivamus suscipit diam eget mi cursus viverra.</p>

        <video xml:id="yt-list-vars-three" label="youtube-list-vars-three" youtube="X1-UNHUajfk" margins="20% 40%" />

        <p>As a plain component of a <tag>sidebyside</tag>.  Widths here are 20% and 30%, margins and gaps are automatic, default alignment on top edges.  Nulla pharetra imperdiet elit, in sodales nibh blandit ultricies. Maecenas efficitur ac felis ut pharetra.</p>

        <sidebyside widths="20% 30%">
            <video xml:id="yt-list-vars-four" label="youtube-list-vars-four" youtube="X1-UNHUajfk"/>
            <video xml:id="yt-list-vars-five" label="youtube-list-vars-five" youtube="X1-UNHUajfk"/>
        </sidebyside>

        <p>Inside a <tag>figure</tag> with no adjustments, so default behavior.  Note how a <tag>figure</tag> occupies the entire width of the page, so then does the caption.</p>

        <figure>
            <caption>List Variables</caption>
            <video xml:id="yt-list-vars-six" label="youtube-list-vars-six" youtube="X1-UNHUajfk"/>
        </figure>

        <p>Inside a <tag>figure</tag> with asymmetric (large) margins of 30% and 60%.  Quisque finibus augue sit amet facilisis fringilla. Aenean faucibus augue tellus, et sollicitudin tortor finibus non.</p>

        <figure>
            <caption>List Variables</caption>
            <video xml:id="yt-list-vars-seven" label="youtube-list-vars-seven" youtube="X1-UNHUajfk" margins="30% 60%"/>
        </figure>

        <p>Inside figures inside a <tag>sidebyside</tag>.  Same widths as previous <tag>sidebyside</tag> but alignment on bottoms of the panels, to partially align captions.  Note how the captions are constrained in width by the width of the panels of the side-by-side.</p>

        <sidebyside widths="20% 30%" valign="bottom">
            <figure>
                <caption>List Variables</caption>
                <video xml:id="yt-list-vars-eight" label="youtube-list-vars-eight" youtube="X1-UNHUajfk"/>
            </figure>
            <figure>
                <caption>List Variables (Again)</caption>
                <video xml:id="yt-list-vars-nine" label="youtube-list-vars-nine" youtube="X1-UNHUajfk"/>
            </figure>
        </sidebyside>

        <p>Identical code to previous example, but now wrapped in an overall <tag>figure</tag>, which has its own caption and number, leaving the interior figures to be sub-numbered.  Cross-references use the full number: <xref ref="ups-video" text="type-global"/>.</p>

        <figure>
            <caption>Amalgamation of Videos</caption>
            <sidebyside widths="20% 30%" valign="bottom">
                <figure>
                    <caption>List Variables</caption>
                    <video xml:id="yt-list-vars-ten" label="youtube-list-vars-ten" youtube="X1-UNHUajfk"/>
                </figure>
                <figure xml:id="ups-video">
                    <caption>List Variables</caption>
                    <title>List Variables</title>
                    <video xml:id="yt-list-vars-eleven" label="youtube-list-vars-eleven" youtube="X1-UNHUajfk"/>
                </figure>
            </sidebyside>
        </figure>
    </section>

    <section xml:id="section-runestone-assignment-testing">
        <title>Runestone Assignment Testing</title>
        <p>
            This is a section that is specifically for testing when exercises are migrated to a
            Runestone Assignment page.
        </p>
        <exercises>
            <exercise label="exercisegroup-exercise-zero">
                <statement>
                    <p>
                        This is an <tag>exercises</tag> division (at the level of a <tag>subsection</tag>) which is not being numbered.  We've hijacked this first exercise to say so, and to precede the <tag>exercisegroup</tag> following, which is the real test right now.
                        What is <m>0+0</m>?
                    </p>
                </statement>
            </exercise>

            <exercisegroup>
                <title>An Exercise Group</title>
                <introduction>
                    <p>
                        This introduction should appear ahead of each exercise when it shows
                        up in the Runestone Assignment page.
                    </p>
                    <tabular>
                        <row>
                            <cell><m>(0,0)</m></cell>
                            <cell><m>(0,1)</m></cell>
                        </row>
                        <row>
                            <cell><m>(1,0)</m></cell>
                            <cell><m>(1,1)</m></cell>
                        </row>
                    </tabular>
                    <image>
                        <latex-image label="runestone-blue-square">
                            \begin{tikzpicture}
                                \draw[fill=blue!20] (0,0) -| (1,1) -| cycle;
                            \end{tikzpicture}
                        </latex-image>
                        <shortdescription>a blue square</shortdescription>
                    </image>
                    <p>
                        It has a table, and an image too, to check it all comes through.
                    </p>
                </introduction>
                <exercise label="exercisegroup-exercise-one">
                    <statement>
                        <p>
                            What is <m>1+1</m>?
                        </p>
                    </statement>
                    <choices>
                        <choice correct="yes">
                            <statement>
                                <p>Two</p>
                            </statement>
                        </choice>
                        <choice>
                            <statement>
                                <p>Three</p>
                            </statement>
                        </choice>
                     </choices>
                </exercise>
                <exercise label="exercisegroup-exercise-two">
                    <statement>
                        <p>
                            What is <m>2+2</m>?
                        </p>
                    </statement>
                    <choices>
                        <choice>
                            <statement>
                                <p>Two</p>
                            </statement>
                        </choice>
                        <choice correct="yes">
                            <statement>
                                <p>Four</p>
                            </statement>
                        </choice>
                     </choices>
                </exercise>
            </exercisegroup>
            <exercise label="exercisegroup-exercise-three">
                <statement>
                    <p>
                        What is <m>3+3</m>?
                    </p>
                </statement>
            </exercise>
        </exercises>
        <p>And a final paragraph in the section, and a chance to say there is a trailing <tag>exercise</tag> outside the <tag>exercisegroup</tag>.</p>
    </section>

    <worksheet groupwork="yes" groupsize="2" xml:id="worksheet-groupwork">
        <title>A <q>Group Work</q> Worksheet</title>

        <p>This is a <tag>worksheet</tag> which has a <attr>groupwork</attr> attribute set to <c>yes</c>, along with a <attr>label</attr> attribute to assist with the Runestone database.  Note, you can also set a <attr>groupsize</attr> attribute.  When hosted on Runestone, the exercises within will be available for a group of students to submit together.</p>

        <exercise label="groupwork-multiple-choice">
            <title>Multiple-Choice, Group Work</title>
            <idx>stop signs</idx>
            <idx>group work</idx>
            <statement>
                <p>What color is a stop sign?</p>
            </statement>
            <choices>
                <choice>
                    <statement>
                        <p>Green</p>
                    </statement>
                    <feedback>
                        <p>Green means <q>go!</q>.</p>
                    </feedback>
                </choice>
                <choice correct="yes">
                    <statement>
                        <p>Red</p>
                    </statement>
                    <feedback>
                        <p>Red is universally used for prohibited activities or serious warnings.</p>
                    </feedback>
                </choice>
                <choice>
                    <statement>
                        <p>White</p>
                    </statement>
                    <feedback>
                        <p>White might be hard to see.</p>
                    </feedback>
                </choice>
            </choices>
            <hint>
                <p>What did you see last time you went driving?</p>
            </hint>
            <hint>
                <p>Maybe go out for a drive?</p>
            </hint>
        </exercise>

        <p>Worksheets allow for material interleaved with the <tag>exercise</tag> throughout.</p>

        <exercise label="groupwork-number-theory" adaptive="yes" language="natural">
            <title>Parsons Problem, Group Work</title>
            <idx>even numbers</idx>
            <idx>groupwork</idx>
            <statement>
                <p>Create a proof of the theorem: If <m>n</m> is an even number, then <m>n\equiv 0\mod 2</m>.</p>
            </statement>
            <blocks>
                <block order="2">
                    <p>Suppose <m>n</m> is even.</p>
                </block>
                <block order="3">
                    <choice><p>Then <m>n</m> is a prime number.</p></choice>
                    <choice correct="yes"><p>Then there exists an <m>m</m> so that <m>n = 2m</m>.</p></choice>
                    <choice><p>Then there exists an <m>m</m> so that <m>n = 2m + 1</m>.</p></choice>
                </block>
                <block order="1" correct="no">
                    <p>Click the heels of your ruby slippers together three times.</p>
                </block>
                <block order="5">
                    <p>So <m>n = 2m + 0</m>.</p>
                    <p>This is a superfluous second paragraph in this block.</p>
                </block>
                <block order="4">
                    <p>Thus <m>n\equiv 0\mod 2</m>.</p>
                </block>
                <block order="6" correct="no">
                    <p>And a little bit of irrelevant multi-line math
                        <md>
                            <mrow>c^2&amp;a^2+b^2</mrow>
                            <mrow>&amp;x^2+y^2</mrow>
                        </md>.
                    </p>
                </block>
            </blocks>
            <hint><p>Dorothy will not be much help with this proof.</p></hint>
        </exercise>
    </worksheet>

    <exercises xml:id="groupwork-title" groupwork="yes" label="exercises-title-groupwork">
        <introduction>
            <p>This is an <tag>exercises</tag> division with no <tag>title</tag>, set as groupwork, and therefore its default title will automatically indicate it is meant for a group.  Otherwise, it is not of any new interest.</p>
        </introduction>

        <exercise xml:id="multiple-choice-five" label="multiple-choice-not-randomized-five">
            <title>Multiple-Choice, Not Randomized, One Answer</title>
            <idx>stop signs</idx>
            <statement>
                <p>What color is a stop sign?</p>
            </statement>
            <!-- to appear as problem with potentially multiple correct -->
            <!-- answers (even though there is only one), use           -->
            <!--                                                        -->
            <!--     <choices multiple-correct="yes">                   -->
            <!--                                                        -->
            <choices>
                <choice>
                    <statement>
                        <p>Green</p>
                    </statement>
                    <feedback>
                        <p>Green means <q>go!</q>.</p>
                    </feedback>
                </choice>
                <choice correct="yes">
                    <statement>
                        <p>Red</p>
                    </statement>
                    <feedback>
                        <p>Red is universally used for prohibited activities or serious warnings.</p>
                    </feedback>
                </choice>
                <choice>
                    <statement>
                        <p>White</p>
                    </statement>
                    <feedback>
                        <p>White might be hard to see.</p>
                    </feedback>
                </choice>
            </choices>
            <hint>
                <p>What did you see last time you went driving?</p>
            </hint>
            <hint>
                <p>Maybe go out for a drive?</p>
            </hint>
        </exercise>
    </exercises>

    <section xml:id="splice-integration">
        <title>SPLICE Integration</title>

        <p><url href="https://cssplice.org/" visual="cssplice.org">SPLICE</url> is a project to supply documentation and infrastructure to help with adopting shared standards, protocols, and tools for web-based learning tools. The project has designed a <url href="https://cssplice.org/slcp/index.html" visual="cssplice.org/slcp">protocol</url> for an embedded iframe to communicate with its host page.</p>

        <p>One aspect is the ability of an iframe to ask for a new size. Below is a test of that capability.</p>

        <p>These are examples that use the <url href="https://cssplice.org/slcp/index.html" visual="cssplice.org/slcp">SPLICE</url> protocol for communicating with a server, such as Runestone. They are all integrated into this <pretext/> book as an <tag>interactive</tag> that uses an <attr>iframe</attr> attribute to embed an iframe from some other server.</p>

        <p>This first sample tests the ability of an iframe to ask for a new size.</p>

        <interactive xml:id="splice-resize-example" platform="javascript" width="60%" aspect="2:1" source="splice/splice-resize.js"/>

        <p>The next uses <url href="https://codecheck.io" visual="codecheck.io">CodeCheck</url>.</p>

        <figure xml:id="horstmann-codecheck">
            <caption>CodeCheck <c>iframe</c></caption>
            <interactive label="interactive-horstmann-codecheck"
                iframe="https://codecheck.io/files/wiley/ch-bj4cc-c06_exp_6_105"
                width="95%"
                aspect="1:1"
            />
        </figure>

        <p>And the remaing four are from the <url href="https://opendsax.cs.vt.edu/" visual="opendsax.cs.vt.edu">OpenDSA</url> project.</p>

        <figure xml:id="opendsa-slideshow">
            <caption>Stack pop slideshow</caption>
            <interactive label="opendsa-slideshow-pop"
                iframe="https://opendsax.cs.vt.edu/embed/astackPopCON"
                width="95%"
            />
        </figure>

        <figure xml:id="splice-integration-insert">
            <caption>A List Insertion Exercise</caption>
            <interactive label="OpenDSA-list-insertion"
                iframe="https://opendsax.cs.vt.edu/OpenDSA/Exercises/List/AlistInsertPRO.html"
                width="100%"
            />
        </figure>

        <figure xml:id="splice-integration-bs">
            <caption>A Binary Search Exercise</caption>
            <interactive label="OpenDSA-integration-bs"
                iframe="https://opendsax.cs.vt.edu/OpenDSA/AV/Searching/binarySearchPRO.html"
                width="175%"
                aspect="3:1"
            />
        </figure>

        <figure xml:id="splice-integration-dijkstra">
            <caption>Dijkstra's Algorithm Exercise</caption>
            <interactive label="OpenDSA-integration-dijkstra"
                iframe="https://opendsax.cs.vt.edu/OpenDSA/AV/Graph/DijkstraPE.html"
                width="175%"
                aspect="1:1"
            />
        </figure>

        <!-- Following exercises should go into their own section, but that -->
        <!-- messes up numbering and it is hard to see changes.  Wait until -->
        <!-- this settles down some, and then split these off.              -->

        <p>(2025-11-05) The following two exercises are <alert>strictly EXPERIMENTAL</alert>.  Do not incorporate them into your projects as they are likely to change dramatically.</p>

        <!-- 2025-11-05: Donated by Matt Boelkins from Active Calculus  -->
        <!-- where it has @xml:id "doenet-interactive-exercise-1-1-1" -->
        <exercise>
            <title>Finding the average velocity of a moving object from data (dual, Doenet)</title>
            <dynamic>
                <statement>
                    <interactive label="doenet-velocity" platform="doenetml">
                        <slate surface="doenetml">
                            <![CDATA[
                              <setup>
                                <math name="a"><selectFromSequence from="0.3" to="0.5" step="0.1"/></math>
                                <math name="b"><selectFromSequence from="1.3" to="1.8" step="0.1"/></math>
                                <math name="c"><selectFromSequence from="1" to="3" step="1"/></math>
                                <function name="s" symbolic="false" >
                                  $b*x^2
                                </function>
                              </setup>

                            <!--
                              <p><m>a=$a</m>, <m>b=$b</m>, <m>c=$c</m></p>
                            -->

                              <p>
                                Consider a car whose position <m>s</m> (in feet) at time <m>t</m> (in seconds) is given by the table:
                              </p>

                              <table suppressTableNameInTitle="true">
                                <tabular top="minor" bottom="minor" left="minor" right="minor">
                                  <row>
                                    <cell><m>t</m> (sec)</cell>
                                    <cell><m>0</m></cell>
                                    <cell><math simplify>$a</math></cell>
                                    <cell><math simplify>2$a</math></cell>
                                    <cell><math simplify>3$a</math></cell>
                                    <cell><math simplify>4$a</math></cell>
                                    <cell><math simplify>5$a</math></cell>
                                  </row>
                                  <row>
                                    <cell><m>s</m> (feet)</cell>
                                    <cell><math simplify displayDigits="4">$$s(0)</math></cell>
                                    <cell><math simplify displayDigits="4">$$s($a)</math></cell>
                                    <cell><math simplify displayDigits="4">$$s(2$a)</math></cell>
                                    <cell><math simplify displayDigits="4">$$s(3$a)</math></cell>
                                    <cell><math simplify displayDigits="4">$$s(4$a)</math></cell>
                                    <cell><math simplify displayDigits="4">$$s(5$a)</math></cell>
                                  </row>
                                </tabular>
                              </table>

                              <p>
                                <ol marker="a">
                                  <li>
                                    <p> What are the units on the average velocity of the car? </p>
                                      <answer>
                                        <choiceInput name="choice1" inline>
                                          <choice>miles per hour</choice>
                                          <choice>feet</choice>
                                          <choice credit="1">feet per second</choice>
                                          <choice>seconds</choice>
                                        </choiceInput>
                                      </answer>
                                  </li>
                                  <li>
                                    <p>Find the average velocity of the car on the interval <m>0 \le t \le <math simplify>3*$a</math>.</m> </p>
                                  </li>
                                  <answer allowedErrorInNumbers="0.05" allowedErrorIsAbsolute="true">
                                      ($$s(3*$a)-$$s(0*$a))/(3$a)
                                  </answer>
                                  <!--
                                  <math simplify displayDigits="8"> ($$s(3*$a)-$$s(0*$a))/(3$a) </math>, <math displayDigits="8"> ($$s(3*$a)-$$s(0*$a))/(3$a) </math>
                                  -->
                                  <li>
                                    <p>
                                      Find the average velocity of the car on the interval <m>[<math simplify>$c*$a</math>, <math simplify>($c+2)*$a</math>]</m>.
                                    </p>
                                  </li>
                                  <answer allowedErrorInNumbers="0.05" allowedErrorIsAbsolute="true">
                                      ($$s(($c+2)*$a)-$$s($c*$a))/(2$a)
                                  </answer>
                                </ol>
                              </p>
                            ]]>
                        </slate>
                    </interactive>
                </statement>
            </dynamic>
            <static>
                <introduction>
                  <p>
                    Consider a car whose position <m>s</m> (in feet) at time <m>t</m> (in seconds) is given by the table:
                  </p>
                  <!-- $a = 0.3, $$s(x) = 1.3*x^2 -->
                  <tabular top="minor" bottom="minor" left="minor" right="minor">
                    <row>
                      <cell><m>t</m> (sec)</cell>
                      <cell><m>0</m></cell>
                      <cell><m>0.3</m></cell>
                      <cell><m>0.6</m></cell>
                      <cell><m>0.9</m></cell>
                      <cell><m>1.2</m></cell>
                      <cell><m>1.5</m></cell>
                    </row>
                    <row>
                      <cell><m>s</m> (feet)</cell>
                      <cell><m>0</m></cell>
                      <cell><m>0.117</m></cell>
                      <cell><m>0.468</m></cell>
                      <cell><m>1.053</m></cell>
                      <cell><m>1.872</m></cell>
                      <cell><m>2.925</m></cell>
                    </row>
                  </tabular>
                </introduction>
                <task>
                  <statement>
                    <p>
                      What are the units on the average velocity of the car?
                    </p>
                  </statement>
                  <hint>
                    <p>
                      Consider possibilities such as <q>feet</q>, <q>seconds</q>, <q>feet per second</q>, or <q>seconds per foot</q>.
                    </p>
                  </hint>
                  <answer>
                    <p>
                      feet per second
                    </p>
                  </answer>
                </task>
                <task>
                  <statement>
                    <p>
                      Find the average velocity of the car on the interval <m>0 \le t \le 0.9</m>.
                    </p>
                  </statement>
                  <hint>
                    <p>
                      Recall that average velocity is <q>change in position divided by change in time</q>.
                    </p>
                  </hint>
                  <answer>
                    <p>
                      The average velocity of the car on the interval <m>0 \le t \le 0.9</m> is <m>1.17</m> feet per second.
                    </p>
                  </answer>
                </task>
                <task>
                  <statement>
                    <p>
                      <!-- $c = 3 -->
                      Find the average velocity of the car on the interval <m>[0.9, 1.5]</m>.
                    </p>
                  </statement>
                  <answer>
                    <p>
                      The average velocity of the car on the interval <m>[0.9,1.5]</m> is <m>3.12</m> feet per second.
                    </p>
                  </answer>
                </task>
            </static>
        </exercise>

        <exercise>
            <title>OpenDSA List Insertion (Dual)</title>
            <dynamic>
                <statement>
                    <p>Work this following problem. Note that this is really just a test to see if additional text (beyond an <tag>interactive</tag>) will show up.</p>
                    <interactive label="OpenDSA-list-insertion-exercise"
                        iframe="https://opendsax.cs.vt.edu/OpenDSA/Exercises/List/AlistInsertPRO.html"
                        width="100%"/>
                </statement>
            </dynamic>
            <static>
                <statement>
                    <p>An exercise about array-based list insertion goes here.</p>
                </statement>
            </static>
        </exercise>

    <p>This example recreates the Show-Eval visualization from the Runestone Components, using a PreTexT <tag>interactive</tag>. It also records student activity using SPLICE.</p>
    <p>It demonstrates how the Show-Eval tool can be used to visualize the evaluation of Python expressions step by step.</p>
    <p>This could also be used for doing similar visualization of mathematical expressions.  Support for MathJax would take some work, but this example would be a good starting point.</p>
    <figure xml:id="show-eval-visualization1">
        <caption>Show-Eval Visualization</caption>
        <interactive label="show-eval-visualization" platform="javascript" source="https://runestone.academy/cdn/runestone/showEval-0.10.0.js" width="100%" >
            <slate surface="html">
                <style>
                    .showEval { font-family: monospace; font-size: 1.5em; }
                    .showEval span { vertical-align: text-top; }
                </style>
                <button id="nextStep">Next Step</button>
                <button id="reset">Reset</button>
                <div class='showEval'>eggs = ['dogs', 'cats', 'moose']</div>
                <div id="showeval"></div>
                <script>
                    document.addEventListener("DOMContentLoaded", function() {
                        console.log("Document loaded");
                        // for each step, put the part to replaced in the first set of {{ }}, and the replacement text in the following {{ }}
                        steps = ["''.join({{eggs}}{{['dogs', 'cats', 'moose']}}).upper().join(eggs)",
                        "{{''.join(['dogs', 'cats', 'moose'])}}{{'dogscatsmoose'}}.upper().join(eggs)",
                        "{{'dogscatsmoose'.upper()}}{{'DOGSCATSMOOSE'}}.join(eggs)",
                        "'DOGSCATSMOOSE'.join({{eggs}}{{['dogs', 'cats', 'moose']}})",
                        "{{'DOGSCATSMOOSE'.join(['dogs', 'cats', 'moose'])}}{{'dogsDOGSCATSMOOSEcatsDOGSCATSMOOSEmoose'}}"];
                        s = new SHOWEVAL.ShowEval(document.querySelector('#showeval'), steps, false); });
                </script>
            </slate>
        </interactive>
        </figure>
    </section>

    <exercises xml:id="chapter-exam" label="chapter-exam" time-limit="15" pause="yes">
        <title>Timed Chapter Exam</title>

        <introduction>
            <p>This is an <tag>exercises</tag> division, as a peer of the <tag>section</tag> in this <tag>chapter</tag> of a <tag>book</tag>.  It is also setup as a Runestone timed exam.  So it is an example of how you might have a per-chapter exam.  This contrasts with an earlier timed exam which is constructed as a per-section exam (<xref ref="timing-exercises"/>).  The exercises are the same here, but in a different order.  As a test, this exam is <q>pauseable</q> and has a 15 minute time limit.</p>
        </introduction>

        <exercise label="multiple-choice-not-randomized-timed-two">
            <title>Multiple-Choice, Not Randomized, One Answer</title>
            <idx>stop signs</idx>
            <statement>
                <p>What color is a stop sign?</p>
            </statement>
            <choices>
                <choice>
                    <statement>
                        <p>Green</p>
                    </statement>
                    <feedback>
                        <p>Green means <q>go!</q>.</p>
                    </feedback>
                </choice>
                <choice correct="yes">
                    <statement>
                        <p>Red</p>
                    </statement>
                    <feedback>
                        <p>Red is universally used for prohibited activities or serious warnings.</p>
                    </feedback>
                </choice>
                <choice>
                    <statement>
                        <p>White</p>
                    </statement>
                    <feedback>
                        <p>White might be hard to see.</p>
                    </feedback>
                </choice>
            </choices>
            <hint>
                <p>What did you see last time you went driving?</p>
            </hint>
            <hint>
                <p>Maybe go out for a drive?</p>
            </hint>
        </exercise>

        <exercise label="vector-space-dimension-timed-two">
            <title>True/False</title>
            <idx>vector space</idx>
            <statement correct="no">
                <p>Every vector space has finite dimension.</p>
            </statement>
            <feedback>
                <p>The vector space of all polynomials with finite degree has a basis, <m>B = \{1,x,x^2,x^3,\dots\}</m>, which is infinte.</p>
            </feedback>
            <hint>
                <p><m>P_n</m>, the vector space of polynomials with degree at most <m>n</m>, has dimension <m>n+1</m> by <xref ref="theorem-exponent-laws"/>.  [Cross-reference is just a demo, content is not relevant.]  What happens if we relax the defintion and remove the parameter <m>n</m>?</p>
            </hint>
        </exercise>
    </exercises>
</chapter>
